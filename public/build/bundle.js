var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function i(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function l(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t){return function(e){return e.preventDefault(),t.call(this,e)}}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}let g;function m(t){g=t}function b(){const t=function(){if(!g)throw new Error("Function called outside component initialization");return g}();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach((e=>{e.call(t,i)}))}}}const w=[],E=[],_=[],I=[],T=Promise.resolve();let N=!1;function x(t){_.push(t)}let A=!1;const S=new Set;function O(){if(!A){A=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];m(e),k(e.$$)}for(m(null),w.length=0;E.length;)E.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];S.has(e)||(S.add(e),e())}_.length=0}while(w.length);for(;I.length;)I.pop()();N=!1,A=!1,S.clear()}}function k(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(x)}}const D=new Set;let P;function C(t,e){t&&t.i&&(D.delete(t),t.i(e))}function L(t,e,n,r){if(t&&t.o){if(D.has(t))return;D.add(t),P.c.push((()=>{D.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function R(t){t&&t.c()}function V(t,n,o){const{fragment:s,on_mount:u,on_destroy:a,after_update:c}=t.$$;s&&s.m(n,o),x((()=>{const n=u.map(e).filter(i);a?a.push(...n):r(n),t.$$.on_mount=[]})),c.forEach(x)}function M(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(w.push(t),N||(N=!0,T.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(e,i,o,s,u,c,h=[-1]){const f=g;m(e);const l=i.props||{},p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:h,skip_bound:!1};let d=!1;if(p.ctx=o?o(e,l,((t,n,...r)=>{const i=r.length?r[0]:n;return p.ctx&&u(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),d&&j(e,t)),n})):[],p.update(),d=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();i.intro&&C(e.$$.fragment),V(e,i.target,i.anchor),O()}m(f)}class F{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var q=function(t,e){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function B(t,e){function n(){this.constructor=t}q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var G=function(){return(G=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function z(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function K(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function $(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Q(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(H(arguments[e]));return t}function W(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Y(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Y(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var X=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function J(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Z(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var tt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,et.prototype.create),o}return B(e,t),e}(Error),et=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?nt(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new tt(i,u,r);return a},t}();function nt(t,e){return t.replace(rt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var rt=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function it(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ot(t,e){var n=new st(t,e);return n.subscribe.bind(n)}var st=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ut),void 0===r.error&&(r.error=ut),void 0===r.complete&&(r.complete=ut);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ut(){}var at=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),ct="[DEFAULT]",ht=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=ct);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new X;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=G({identifier:ct,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService(ct)}catch(t){}try{for(var r=$(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=H(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=ct),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return z(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Q(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===ct?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:ct:t},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ft,lt=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ht(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function pt(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var dt,vt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(dt||(dt={}));var yt,gt={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},mt=dt.INFO,bt=((ft={})[dt.DEBUG]="log",ft[dt.VERBOSE]="log",ft[dt.INFO]="info",ft[dt.WARN]="warn",ft[dt.ERROR]="error",ft),wt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=bt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,pt(["["+i+"]  "+t.name+":"],n))}},Et=function(){function t(t){this.name=t,this._logLevel=mt,this._logHandler=wt,this._userLogHandler=null,vt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in dt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?gt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,pt([this,dt.DEBUG],t)),this._logHandler.apply(this,pt([this,dt.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,pt([this,dt.VERBOSE],t)),this._logHandler.apply(this,pt([this,dt.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,pt([this,dt.INFO],t)),this._logHandler.apply(this,pt([this,dt.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,pt([this,dt.WARN],t)),this._logHandler.apply(this,pt([this,dt.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,pt([this,dt.ERROR],t)),this._logHandler.apply(this,pt([this,dt.ERROR],t))},t}();function _t(t){vt.forEach((function(e){e.setLogLevel(t)}))}var It,Tt=((yt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",yt["bad-app-name"]="Illegal App name: '{$appName}",yt["duplicate-app"]="Firebase App named '{$appName}' already exists",yt["app-deleted"]="Firebase App named '{$appName}' already deleted",yt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",yt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",yt),Nt=new et("app","Firebase",Tt),xt="@firebase/app",At="[DEFAULT]",St=((It={})[xt]="fire-core",It["@firebase/analytics"]="fire-analytics",It["@firebase/auth"]="fire-auth",It["@firebase/database"]="fire-rtdb",It["@firebase/functions"]="fire-fn",It["@firebase/installations"]="fire-iid",It["@firebase/messaging"]="fire-fcm",It["@firebase/performance"]="fire-perf",It["@firebase/remote-config"]="fire-rc",It["@firebase/storage"]="fire-gcs",It["@firebase/firestore"]="fire-fst",It["fire-js"]="fire-js",It["firebase-wrapper"]="fire-js-all",It),Ot=new Et("@firebase/app"),kt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Y(void 0,t),this.container=new lt(e.name),this._addComponent(new at("app",(function(){return o}),"PUBLIC"));try{for(var s=$(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=At),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=At),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ot.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Nt.create("app-deleted",{appName:this.name_})},t}();kt.prototype.name&&kt.prototype.options||kt.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Dt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=At);var s=o.name;if("string"!=typeof s||!s)throw Nt.create("bad-app-name",{appName:String(s)});if(it(e,s))throw Nt.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=St[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ot.warn(a.join(" "))}o(new at(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:_t,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Nt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=gt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:dt[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=vt;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!it(e,t=t||At))throw Nt.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return Ot.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Nt.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Y(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=$(Object.keys(e)),f=h.next();!f.done;f=h.next()){var l=f.value;e[l]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pt=function t(){var e=Dt(kt);return e.INTERNAL=G(G({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Y(e,t)},createSubscribe:ot,ErrorFactory:et,deepExtend:Y}),e}(),Ct=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Lt=self.firebase.SDK_VERSION;Lt&&Lt.indexOf("LITE")>=0&&Ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Rt=Pt.initializeApp;Pt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Z()&&Ot.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Rt.apply(void 0,t)};var Vt=Pt;!function(t,e){t.INTERNAL.registerComponent(new at("platform-logger",(function(t){return new Ct(t)}),"PRIVATE")),t.registerVersion(xt,"0.6.13",e),t.registerVersion("fire-js","")}(Vt);
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Vt.registerVersion("firebase","8.0.2","app");
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var Mt=function(t,e){return(Mt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function jt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ut,Ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qt=qt||{},Bt=Ft||self;function Gt(){}function zt(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Kt(t){var e=zt(t);return"array"==e||"object"==e&&"number"==typeof t.length}function $t(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ht="closure_uid_"+(1e9*Math.random()>>>0),Qt=0;function Wt(t,e,n){return t.call.apply(t.bind,arguments)}function Yt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Xt(t,e,n){return(Xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Wt:Yt).apply(null,arguments)}function Jt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Zt=Date.now;function te(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ee(){this.j=this.j,this.i=this.i}ee.prototype.j=!1,ee.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Ht)&&t[Ht]||(t[Ht]=++Qt)})(this)},ee.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ne=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},re=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ie(t){return Array.prototype.concat.apply([],arguments)}function oe(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function se(t){return/^[\s\xa0]*$/.test(t)}var ue,ae=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ce(t,e){return-1!=t.indexOf(e)}function he(t,e){return t<e?-1:t>e?1:0}t:{var fe=Bt.navigator;if(fe){var le=fe.userAgent;if(le){ue=le;break t}}ue=""}function pe(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function de(t){var e={};for(var n in t)e[n]=t[n];return e}var ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ve.length;o++)n=ve[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ge(t){return ge[" "](t),t}ge[" "]=Gt;var me,be,we=ce(ue,"Opera"),Ee=ce(ue,"Trident")||ce(ue,"MSIE"),_e=ce(ue,"Edge"),Ie=_e||Ee,Te=ce(ue,"Gecko")&&!(ce(ue.toLowerCase(),"webkit")&&!ce(ue,"Edge"))&&!(ce(ue,"Trident")||ce(ue,"MSIE"))&&!ce(ue,"Edge"),Ne=ce(ue.toLowerCase(),"webkit")&&!ce(ue,"Edge");function xe(){var t=Bt.document;return t?t.documentMode:void 0}t:{var Ae="",Se=(be=ue,Te?/rv:([^\);]+)(\)|;)/.exec(be):_e?/Edge\/([\d\.]+)/.exec(be):Ee?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(be):Ne?/WebKit\/(\S+)/.exec(be):we?/(?:Version)[ \/]?(\S+)/.exec(be):void 0);if(Se&&(Ae=Se?Se[1]:""),Ee){var Oe=xe();if(null!=Oe&&Oe>parseFloat(Ae)){me=String(Oe);break t}}me=Ae}var ke,De={};function Pe(t){return function(t,e){var n=De;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ae(String(me)).split("."),r=ae(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=he(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||he(0==s[2].length,0==u[2].length)||he(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(Bt.document&&Ee){var Ce=xe();ke=Ce||(parseInt(me,10)||void 0)}else ke=void 0;var Le=ke,Re=!Ee||9<=Number(Le),Ve=Ee&&!Pe("9"),Me=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Bt.addEventListener("test",Gt,e),Bt.removeEventListener("test",Gt,e)}catch(t){}return t}();function je(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ue(t,e){if(je.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Te){t:{try{ge(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Fe[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}je.prototype.b=function(){this.defaultPrevented=!0},te(Ue,je);var Fe={2:"touch",3:"pen",4:"mouse"};Ue.prototype.b=function(){Ue.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ve)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Be,this.Y=this.Z=!1}function ze(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ke(t){this.src=t,this.a={},this.b=0}function $e(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ne(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function He(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=He(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ge(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Qe="closure_lm_"+(1e6*Math.random()|0),We={};function Ye(t,e,n,r,i){if(r&&r.once)return Je(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);return null}return n=un(n),t&&t[qe]?t.va(e,n,$t(r)?!!r.capture:!!r,i):Xe(t,e,n,!1,r,i)}function Xe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$t(i)?!!i.capture:!!i;if(s&&!Re)return null;var u=on(t);if(u||(t[Qe]=u=new Ke(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=rn,e=Re?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Me||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(en(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Je(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);return null}return n=un(n),t&&t[qe]?t.wa(e,n,$t(r)?!!r.capture:!!r,i):Xe(t,e,n,!0,r,i)}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else r=$t(r)?!!r.capture:!!r,n=un(n),t&&t[qe]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=He(o=t.a[e],n,r,i))&&(ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=on(t))&&(e=t.a[e.toString()],t=-1,e&&(t=He(e,n,r,i)),(n=-1<t?e[t]:null)&&tn(n))}function tn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[qe])$e(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(en(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=on(e))?($e(n,t),0==n.b&&(n.src=null,e[Qe]=null)):ze(t)}}}function en(t){return t in We?We[t]:We[t]="on"+t}function nn(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&tn(t),n.call(r,e)}function rn(t,e){if(t.Y)return!0;if(!Re){if(!e)t:{e=["window","event"];for(var n=Bt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return nn(t,e=new Ue(e,this))}return nn(t,new Ue(e,this))}function on(t){return(t=t[Qe])instanceof Ke?t:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(t){return"function"==zt(t)?t:(t[sn]||(t[sn]=function(e){return t.handleEvent(e)}),t[sn])}function an(){ee.call(this),this.c=new Ke(this),this.J=this,this.C=null}function cn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&$e(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}te(an,ee),an.prototype[qe]=!0,(Ut=an.prototype).addEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},Ut.removeEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},Ut.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new je(t,n);else if(t instanceof je)t.target=t.target||n;else{var i=t;ye(t=new je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=cn(s,r,!0,t)&&i}if(i=cn(s=t.a=n,r,!0,t)&&i,i=cn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=cn(s=t.a=e[o],r,!1,t)&&i;return i},Ut.G=function(){if(an.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ze(n[r]);delete e.a[t],e.b--}}this.C=null},Ut.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ut.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var hn=Bt.JSON.stringify;function fn(){this.b=this.a=null}var ln,pn=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new vn}),(function(t){t.reset()}),100);function dn(){var t=bn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function vn(){this.next=this.b=this.a=null}function yn(t){Bt.setTimeout((function(){throw t}),0)}function gn(t,e){ln||function(){var t=Bt.Promise.resolve(void 0);ln=function(){t.then(wn)}}(),mn||(ln(),mn=!0),bn.add(t,e)}fn.prototype.add=function(t,e){var n=pn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},vn.prototype.reset=function(){this.next=this.b=this.a=null};var mn=!1,bn=new fn;function wn(){for(var t;t=dn();){try{t.a.call(t.b)}catch(t){yn(t)}var e=pn;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}mn=!1}function En(t,e){an.call(this),this.b=t||1,this.a=e||Bt,this.f=Xt(this.Ya,this),this.g=Zt()}function _n(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function In(t,e,n){if("function"==zt(t))n&&(t=Xt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Xt(t.handleEvent,t)}return 2147483647<Number(e)?-1:Bt.setTimeout(t,e||0)}function Tn(t){t.a=In((function(){t.a=null,t.c&&(t.c=!1,Tn(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}te(En,an),(Ut=En.prototype).aa=!1,Ut.M=null,Ut.Ya=function(){if(this.aa){var t=Zt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(_n(this),this.start()))}},Ut.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Zt())},Ut.G=function(){En.S.G.call(this),_n(this),delete this.a};var Nn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}Mt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Tn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Bt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ee);function xn(t){ee.call(this),this.b=t,this.a={}}te(xn,ee);var An=[];function Sn(t,e,n,r){Array.isArray(n)||(n&&(An[0]=n.toString()),n=An);for(var i=0;i<n.length;i++){var o=Ye(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function On(t){pe(t.a,(function(t,e){this.a.hasOwnProperty(e)&&tn(t)}),t),t.a={}}function kn(){this.a=!0}function Dn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return hn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}xn.prototype.G=function(){xn.S.G.call(this),On(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kn.prototype.info=function(){};var Pn=null;function Cn(){return Pn=Pn||new an}function Ln(t){je.call(this,"serverreachability",t)}function Rn(t){var e=Cn();e.dispatchEvent(new Ln(e,t))}function Vn(t){je.call(this,"statevent",t)}function Mn(t){var e=Cn();e.dispatchEvent(new Vn(e,t))}function jn(t){je.call(this,"timingevent",t)}function Un(t,e){if("function"!=zt(t))throw Error("Fn must not be null and must be a function");return Bt.setTimeout((function(){t()}),e)}te(Ln,je),te(Vn,je),te(jn,je);var Fn={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},qn={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function Bn(){}function Gn(t){var e;return(e=t.a)||(e=t.a={}),e}function zn(){}Bn.prototype.a=null;var Kn,$n={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Hn(){je.call(this,"d")}function Qn(){je.call(this,"c")}function Wn(){}function Yn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new xn(this),this.P=Xn,t=Ie?125:void 0,this.R=new En(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}te(Hn,je),te(Qn,je),te(Wn,Bn),Kn=new Wn;var Xn=45e3,Jn={},Zn={};function tr(t,e,n){t.H=1,t.i=_r(yr(e)),t.j=n,t.I=!0,er(t,null)}function er(t,e){t.u=Zt(),ir(t),t.l=yr(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Rr(n.b,"t",r),t.D=0,t.a=Oi(t.g,t.g.C?e:null),0<t.O&&(t.F=new Nn(Xt(t.Ca,t,t.a),t.O)),Sn(t.J,t.a,"readystatechange",t.Wa),e=t.B?de(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Rn(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function nr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=rr(t,n);if(i==Zn){4==e&&(t.h=4,Mn(14),r=!1),Dn(t.c,t.f,null,"[Incomplete Response]");break}if(i==Jn){t.h=4,Mn(15),Dn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Dn(t.c,t.f,i,null),cr(t,i)}4==e&&0==n.length&&(t.h=1,Mn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ei(e),e.F=!0)):(Dn(t.c,t.f,n,"[Invalid Chunked Response]"),ar(t),ur(t))}function rr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Zn:(n=Number(e.substring(n,r)),isNaN(n)?Jn:(r+=1)+n>e.length?Zn:(e=e.substr(r,n),t.D=r+n,e))}function ir(t){t.U=Zt()+t.P,or(t,t.P)}function or(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Un(Xt(t.Ua,t),e)}function sr(t){t.o&&(Bt.clearTimeout(t.o),t.o=null)}function ur(t){0==t.g.v||t.A||Ti(t.g,t)}function ar(t){sr(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_n(t.R),On(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function cr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Br(n.b,t)))if(n.I=t.N,!t.C&&Br(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Ii(n),li(n)}wi(n),Mn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Un(Xt(n.Ra,n),6e3));if(1>=qr(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else xi(n,11)}else if((t.C||n.a==t)&&Ii(n),!se(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(ce(h,"spdy")||ce(h,"quic")||ce(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Gr(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,Er(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=Zt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Si(a,a.C?a.ga:null,a.fa),p.C){zr(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(sr(d),ir(d)),a.a=p}else bi(a);0<n.g.length&&vi(n)}else"stop"!=i[0]&&"close"!=i[0]||xi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?xi(n,7):fi(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Rn(4)}catch(t){}}function hr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Kt(t)||"string"==typeof t)re(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Kt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Kt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function fr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof fr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function lr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];pr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)pr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function pr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ut=Yn.prototype).setTimeout=function(t){this.P=t},Ut.Wa=function(t){t=t.target;var e=this.F;e&&3==ui(t)?e.f():this.Ca(t)},Ut.Ca=function(t){try{if(t==this.a)t:{var e=ui(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!Ie&&!this.a.$())){this.A||4!=e||7==n||Rn(8==n||0>=r?3:2),sr(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Mn(12),ar(this),ur(this);break t}Dn(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,cr(this,a)}this.I?(nr(this,e,o),Ie&&this.b&&3==e&&(Sn(this.J,this.R,"tick",this.Va),this.R.start())):(Dn(this.c,this.f,o,null),cr(this,o)),4==e&&ar(this),this.b&&!this.A&&(4==e?Ti(this.g,this):(this.b=!1,ir(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Mn(12)):(this.h=0,Mn(13)),ar(this),ur(this)}}}catch(t){}},Ut.Va=function(){if(this.a){var t=ui(this.a),e=this.a.$();this.D<e.length&&(sr(this),nr(this,t,e),this.b&&4!=t&&ir(this))}},Ut.cancel=function(){this.A=!0,ar(this)},Ut.Ua=function(){this.o=null;var t=Zt();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Rn(3),Mn(17)),ar(this),this.h=2,ur(this)):or(this,this.U-t)},(Ut=fr.prototype).K=function(){lr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ut.L=function(){return lr(this),this.a.concat()},Ut.get=function(t,e){return pr(this.b,t)?this.b[t]:e},Ut.set=function(t,e){pr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ut.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var dr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof vr){this.a=void 0!==e?e:t.a,gr(this,t.f),this.j=t.j,mr(this,t.c),br(this,t.h),this.g=t.g,e=t.b;var n=new Dr;n.c=e.c,e.a&&(n.a=new fr(e.a),n.b=e.b),wr(this,n),this.i=t.i}else t&&(n=String(t).match(dr))?(this.a=!!e,gr(this,n[1]||"",!0),this.j=Ir(n[2]||""),mr(this,n[3]||"",!0),br(this,n[4]),this.g=Ir(n[5]||"",!0),wr(this,n[6]||"",!0),this.i=Ir(n[7]||"")):(this.a=!!e,this.b=new Dr(null,this.a))}function yr(t){return new vr(t)}function gr(t,e,n){t.f=n?Ir(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function mr(t,e,n){t.c=n?Ir(e,!0):e}function br(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function wr(t,e,n){e instanceof Dr?(t.b=e,function(t,e){e&&!t.f&&(Pr(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Cr(this,e),Rr(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Tr(e,Or)),t.b=new Dr(e,t.a))}function Er(t,e,n){t.b.set(e,n)}function _r(t){return Er(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Zt()).toString(36)),t}function Ir(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Tr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Nr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Nr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}vr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Tr(e,xr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Tr(e,xr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Tr(n,"/"==n.charAt(0)?Sr:Ar,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Tr(n,kr)),t.join("")};var xr=/[#\/\?@]/g,Ar=/[#\?:]/g,Sr=/[#\?]/g,Or=/[#\?@]/g,kr=/#/g;function Dr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Pr(t){t.a||(t.a=new fr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Cr(t,e){Pr(t),e=Vr(t,e),pr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&lr(t)))}function Lr(t,e){return Pr(t),e=Vr(t,e),pr(t.a.b,e)}function Rr(t,e,n){Cr(t,e),0<n.length&&(t.c=null,t.a.set(Vr(t,e),oe(n)),t.b+=n.length)}function Vr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Mr(t,e){this.b=t,this.a=e}function jr(t){this.g=t||Ur,Bt.PerformanceNavigationTiming?t=0<(t=Bt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Bt.ia&&Bt.ia.ya&&Bt.ia.ya()&&Bt.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Ut=Dr.prototype).add=function(t,e){Pr(this),this.c=null,t=Vr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ut.forEach=function(t,e){Pr(this),this.a.forEach((function(n,r){re(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ut.L=function(){Pr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ut.K=function(t){Pr(this);var e=[];if("string"==typeof t)Lr(this,t)&&(e=ie(e,this.a.get(Vr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ie(e,t[n])}return e},Ut.set=function(t,e){return Pr(this),this.c=null,Lr(this,t=Vr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ut.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ut.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ur=10;function Fr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function qr(t){return t.b?1:t.a?t.a.size:0}function Br(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Gr(t,e){t.a?t.a.add(e):t.b=e}function zr(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Kr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=jt(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return oe(t.c)}function $r(){}function Hr(){this.a=new $r}function Qr(t,e,n){var r=n||"";try{hr(t,(function(t,n){var i=t;$t(t)&&(i=hn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Wr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}jr.prototype.cancel=function(){var t,e;if(this.c=Kr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=jt(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},$r.prototype.stringify=function(t){return Bt.JSON.stringify(t,void 0)},$r.prototype.parse=function(t){return Bt.JSON.parse(t,void 0)};var Yr=Bt.JSON.parse;function Xr(t){an.call(this),this.headers=new fr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Jr,this.D=this.F=!1}te(Xr,an);var Jr="",Zr=/^https?$/i,ti=["POST","PUT"];function ei(t){return"content-type"==t.toLowerCase()}function ni(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ri(t),oi(t)}function ri(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ii(t){if(t.b&&void 0!==qt&&(!t.s[1]||4!=ui(t)||2!=t.X()))if(t.l&&4==ui(t))In(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==ui(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(dr)[1]||null;if(!o&&Bt.self&&Bt.self.location){var s=Bt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Zr.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<ui(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.X()+"]",ri(t)}}finally{oi(t)}}}function oi(t,e){if(t.a){si(t);var n=t.a,r=t.s[0]?Gt:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function si(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Bt.clearTimeout(t.m),t.m=null)}function ui(t){return t.a?t.a.readyState:0}function ai(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return pe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Er(t,e,n))}function ci(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hi(t){this.pa=0,this.g=[],this.c=new kn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=ci("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=ci("baseRetryDelayMs",5e3,t),this.Ma=ci("retryDelaySeedMs",1e4,t),this.Ja=ci("forwardChannelMaxRetries",2,t),this.ma=ci("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new jr(t&&t.concurrentRequestLimit),this.ka=new Hr,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function fi(t){if(pi(t),3==t.v){var e=t.R++,n=yr(t.B);Er(n,"SID",t.J),Er(n,"RID",e),Er(n,"TYPE","terminate"),gi(t,n),(e=new Yn(t,t.c,e,void 0)).H=2,e.i=_r(yr(n)),n=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(n=Bt.navigator.sendBeacon(e.i.toString(),"")),!n&&Bt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Oi(e.g,null),e.a.ba(e.i)),e.u=Zt(),ir(e)}Ai(t)}function li(t){t.a&&(Ei(t),t.a.cancel(),t.a=null)}function pi(t){li(t),t.j&&(Bt.clearTimeout(t.j),t.j=null),Ii(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Bt.clearTimeout(t.h),t.h=null)}function di(t,e){t.g.push(new Mr(t.La++,e)),3==t.v&&vi(t)}function vi(t){Fr(t.b)||t.h||(t.h=!0,gn(t.Ba,t),t.u=0)}function yi(t,e){var n;n=e?e.f:t.R++;var r=yr(t.B);Er(r,"SID",t.J),Er(r,"RID",n),Er(r,"AID",t.P),gi(t,r),t.i&&t.l&&ai(r,t.i,t.l),n=new Yn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=mi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Gr(t.b,n),tr(n,r,e)}function gi(t,e){t.f&&hr({},(function(t,n){Er(e,n,t)}))}function mi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Xt(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Qr(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function bi(t){t.a||t.j||(t.U=1,gn(t.Aa,t),t.o=0)}function wi(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=Un(Xt(t.Aa,t),Ni(t,t.o)),t.o++,!0)}function Ei(t){null!=t.s&&(Bt.clearTimeout(t.s),t.s=null)}function _i(t){t.a=new Yn(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=yr(t.la);Er(e,"RID","rpc"),Er(e,"SID",t.J),Er(e,"CI",t.H?"0":"1"),Er(e,"AID",t.P),gi(t,e),Er(e,"TYPE","xmlhttp"),t.i&&t.l&&ai(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=_r(yr(e)),n.j=null,n.I=!0,er(n,t)}function Ii(t){null!=t.m&&(Bt.clearTimeout(t.m),t.m=null)}function Ti(t,e){var n=null;if(t.a==e){Ii(t),Ei(t),t.a=null;var r=2}else{if(!Br(t.b,e))return;n=e.s,zr(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Zt()-e.u;var i=t.u;(r=Cn()).dispatchEvent(new jn(r,n,e,i)),vi(t)}else bi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(qr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=Un(Xt(t.Ba,t,e),Ni(t,t.u)),t.u++,0)))}(t,e)||2==r&&wi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:xi(t,5);break;case 4:xi(t,10);break;case 3:xi(t,6);break;default:xi(t,2)}}function Ni(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function xi(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Xt(t.Xa,t);n||(n=new vr("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||gr(n,"https"),_r(n)),function(t,e){var n=new kn;if(Bt.Image){var r=new Image;r.onload=Jt(Wr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Jt(Wr,n,r,"TestLoadImage: error",!1,e),r.onabort=Jt(Wr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jt(Wr,n,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mn(2);t.v=0,t.f&&t.f.ra(e),Ai(t),pi(t)}function Ai(t){t.v=0,t.I=-1,t.f&&(0==Kr(t.b).length&&0==t.g.length||(t.b.c.length=0,oe(t.g),t.g.length=0),t.f.qa())}function Si(t,e,n){var r=function(t){return t instanceof vr?yr(t):new vr(t,void 0)}(n);if(""!=r.c)e&&mr(r,e+"."+r.c),br(r,r.h);else{var i=Bt.location;r=function(t,e,n,r){var i=new vr(null,void 0);return t&&gr(i,t),e&&mr(i,e),n&&br(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&pe(t.W,(function(t,e){Er(r,e,t)})),e=t.A,n=t.na,e&&n&&Er(r,e,n),Er(r,"VER",t.ha),gi(t,r),r}function Oi(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xr(t.Ka)).F=t.C,e}function ki(){}function Di(){if(Ee&&!(10<=Number(Le)))throw Error("Environmental error: no available transport.")}function Pi(t,e){an.call(this),this.a=new hi(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!se(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!se(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Ri(this)}function Ci(t){Hn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Li(){Qn.call(this),this.status=1}function Ri(t){this.a=t}(Ut=Xr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Gn(this.H):Gn(Kn),this.a.onreadystatechange=Xt(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void ni(this,t)}t=n||"";var i=new fr(this.headers);r&&hr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=ei,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Bt.FormData&&t instanceof Bt.FormData,!(0<=ne(ti,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{si(this),0<this.o&&((this.D=function(t){return Ee&&Pe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Xt(this.xa,this)):this.m=In(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ni(this,t)}},Ut.xa=function(){void 0!==qt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Ut.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),oi(this))},Ut.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),oi(this,!0)),Xr.S.G.call(this)},Ut.za=function(){this.j||(this.A||this.l||this.g?ii(this):this.Ta())},Ut.Ta=function(){ii(this)},Ut.X=function(){try{return 2<ui(this)?this.a.status:-1}catch(t){return-1}},Ut.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Ut.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Yr(e)}},Ut.ua=function(){return this.h},Ut.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ut=hi.prototype).ha=8,Ut.v=1,Ut.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Yn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ye(r=de(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=mi(this,n,e),Er(i=yr(this.B),"RID",t),Er(i,"CVER",22),this.A&&Er(i,"X-HTTP-Session-Id",this.A),gi(this,i),this.i&&r&&ai(i,this.i,r),Gr(this.b,n),this.Ga&&Er(i,"TYPE","init"),this.da?(Er(i,"$req",e),Er(i,"SID","null"),n.V=!0,tr(n,i,null)):tr(n,i,e),this.v=2}}else 3==this.v&&(t?yi(this,t):0==this.g.length||Fr(this.b)||yi(this))},Ut.Aa=function(){if(this.j=null,_i(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Un(Xt(this.Sa,this),t)}},Ut.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,li(this),_i(this))},Ut.Ra=function(){null!=this.m&&(this.m=null,li(this),wi(this),Mn(19))},Ut.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Mn(2)):(this.c.info("Failed to ping google.com"),Mn(1))},(Ut=ki.prototype).ta=function(){},Ut.sa=function(){},Ut.ra=function(){},Ut.qa=function(){},Ut.Ha=function(){},Di.prototype.a=function(t,e){return new Pi(t,e)},te(Pi,an),(Ut=Pi.prototype).addEventListener=function(t,e,n,r){Pi.S.addEventListener.call(this,t,e,n,r)},Ut.removeEventListener=function(t,e,n,r){Pi.S.removeEventListener.call(this,t,e,n,r)},Ut.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Mn(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Si(t,null,t.fa),vi(t)},Ut.close=function(){fi(this.a)},Ut.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,di(this.a,e)}else this.g?((e={}).__data__=hn(t),di(this.a,e)):di(this.a,t)},Ut.G=function(){this.a.f=null,delete this.f,fi(this.a),delete this.a,Pi.S.G.call(this)},te(Ci,Hn),te(Li,Qn),te(Ri,ki),Ri.prototype.ta=function(){this.a.dispatchEvent("a")},Ri.prototype.sa=function(t){this.a.dispatchEvent(new Ci(t))},Ri.prototype.ra=function(t){this.a.dispatchEvent(new Li(t))},Ri.prototype.qa=function(){this.a.dispatchEvent("b")},Di.prototype.createWebChannel=Di.prototype.a,Pi.prototype.send=Pi.prototype.Pa,Pi.prototype.open=Pi.prototype.Oa,Pi.prototype.close=Pi.prototype.close,Fn.NO_ERROR=0,Fn.TIMEOUT=8,Fn.HTTP_ERROR=6,qn.COMPLETE="complete",zn.EventType=$n,$n.OPEN="a",$n.CLOSE="b",$n.ERROR="c",$n.MESSAGE="d",an.prototype.listen=an.prototype.va,Xr.prototype.listenOnce=Xr.prototype.wa,Xr.prototype.getLastError=Xr.prototype.Qa,Xr.prototype.getLastErrorCode=Xr.prototype.ua,Xr.prototype.getStatus=Xr.prototype.X,Xr.prototype.getResponseJson=Xr.prototype.Na,Xr.prototype.getResponseText=Xr.prototype.$,Xr.prototype.send=Xr.prototype.ba;var Vi=Fn,Mi=qn,ji=zn,Ui=Xr,Fi=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},qi=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Bi=new Et("@firebase/firestore");function Gi(){return Bi.logLevel}function zi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=dt.DEBUG){var r=e.map(Hi);Bi.debug.apply(Bi,W(["Firestore (8.0.2): "+t],r))}}function Ki(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=dt.ERROR){var r=e.map(Hi);Bi.error.apply(Bi,W(["Firestore (8.0.2): "+t],r))}}function $i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=dt.WARN){var r=e.map(Hi);Bi.warn.apply(Bi,W(["Firestore (8.0.2): "+t],r))}}function Hi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Qi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.0.2) INTERNAL ASSERTION FAILED: "+t;throw Ki(e),new Error(e)}function Wi(t,e){t||Qi()}function Yi(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Xi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ji=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Xi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Zi(t,e){return t<e?-1:t>e?1:0}function to(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function eo(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function no(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function io(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var oo=function(){function t(t,e){this.h=t,this.l=e,this._={}}return t.prototype.get=function(t){var e=this.h(t),n=this._[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.l(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this._[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.l(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this._[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this._[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.l(n[r][0],t))return 1===n.length?delete this._[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ro(this._,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.T=function(){return io(this._)},t}(),so={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return B(e,t),e}(Error),ao=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new uo(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new uo(so.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new uo(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uo(so.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.I=function(t){return this.seconds===t.seconds?Zi(this.nanoseconds,t.nanoseconds):Zi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),co=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new ao(0,0))},t.prototype.A=function(t){return this.timestamp.I(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.R=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.P=function(){return this.timestamp},t}(),ho=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Qi(),void 0===n?n=t.length-e:n>t.length-e&&Qi(),this.segments=t,this.offset=e,this.g=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.g},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.V(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.p(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.v=function(t){return t=void 0===t?1:t,this.p(this.segments,this.offset+t,this.length-t)},t.prototype.S=function(){return this.p(this.segments,this.offset,this.length-1)},t.prototype.D=function(){return this.segments[this.offset]},t.prototype.C=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.T=function(){return 0===this.length},t.prototype.N=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.F=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.O=function(){return this.segments.slice(this.offset,this.limit())},t.V=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.prototype.M=function(){return this.O().join("/")},e.prototype.toString=function(){return this.M()},e.k=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new uo(so.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.$=function(){return new e([])},e}(ho),lo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.p=function(t,n,r){return new e(t,n,r)},e.L=function(t){return lo.test(t)},e.prototype.M=function(){return this.O().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.L(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.M()},e.prototype.B=function(){return 1===this.length&&"__name__"===this.get(0)},e.q=function(){return new e(["__name__"])},e.U=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new uo(so.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new uo(so.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new uo(so.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new uo(so.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.$=function(){return new e([])},e}(ho),vo=function(){function t(t){this.path=t}return t.K=function(e){return new t(fo.k(e))},t.W=function(e){return new t(fo.k(e).v(5))},t.prototype.j=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===fo.V(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.V=function(t,e){return fo.V(t.path,e.path)},t.G=function(t){return t.length%2==0},t.H=function(e){return new t(new fo(e.slice()))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yo(t){return null==t}function go(t){return 0===t&&1/t==-1/0}function mo(t){return"number"==typeof t&&Number.isInteger(t)&&!go(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var bo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.J=null};function wo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bo(t,e,n,r,i,o,s)}function Eo(t){var e=Yi(t);if(null===e.J){var n=e.path.M();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.M()+t.op.toString()+ps(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.M()+e.dir;var e})).join(","),yo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ga(e.startAt)),e.endAt&&(n+="|ub:",n+=ga(e.endAt)),e.J=n}return e.J}function _o(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!_a(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!cs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ba(t.startAt,e.startAt)&&ba(t.endAt,e.endAt)}function Io(t){return vo.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var To=function(){function t(t){this.Y=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.Y,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Y)},t.prototype.X=function(){return 2*this.Y.length},t.prototype.A=function(t){return Zi(this.Y,t.Y)},t.prototype.isEqual=function(t){return this.Y===t.Y},t}();To.Z=new To("");var No,xo,Ao=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=co.min()),void 0===o&&(o=co.min()),void 0===s&&(s=To.Z),this.target=t,this.targetId=e,this.tt=n,this.sequenceNumber=r,this.et=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.nt=function(e){return new t(this.target,this.targetId,this.tt,e,this.et,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.st=function(e,n){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.it=function(e){return new t(this.target,this.targetId,this.tt,this.sequenceNumber,this.et,e,this.resumeToken)},t}(),So=function(t){this.count=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oo(t){switch(t){case so.OK:return Qi();case so.CANCELLED:case so.UNKNOWN:case so.DEADLINE_EXCEEDED:case so.RESOURCE_EXHAUSTED:case so.INTERNAL:case so.UNAVAILABLE:case so.UNAUTHENTICATED:return!1;case so.INVALID_ARGUMENT:case so.NOT_FOUND:case so.ALREADY_EXISTS:case so.PERMISSION_DENIED:case so.FAILED_PRECONDITION:case so.ABORTED:case so.OUT_OF_RANGE:case so.UNIMPLEMENTED:case so.DATA_LOSS:return!0;default:return Qi()}}function ko(t){if(void 0===t)return Ki("GRPC error has no .code"),so.UNKNOWN;switch(t){case No.OK:return so.OK;case No.CANCELLED:return so.CANCELLED;case No.UNKNOWN:return so.UNKNOWN;case No.DEADLINE_EXCEEDED:return so.DEADLINE_EXCEEDED;case No.RESOURCE_EXHAUSTED:return so.RESOURCE_EXHAUSTED;case No.INTERNAL:return so.INTERNAL;case No.UNAVAILABLE:return so.UNAVAILABLE;case No.UNAUTHENTICATED:return so.UNAUTHENTICATED;case No.INVALID_ARGUMENT:return so.INVALID_ARGUMENT;case No.NOT_FOUND:return so.NOT_FOUND;case No.ALREADY_EXISTS:return so.ALREADY_EXISTS;case No.PERMISSION_DENIED:return so.PERMISSION_DENIED;case No.FAILED_PRECONDITION:return so.FAILED_PRECONDITION;case No.ABORTED:return so.ABORTED;case No.OUT_OF_RANGE:return so.OUT_OF_RANGE;case No.UNIMPLEMENTED:return so.UNIMPLEMENTED;case No.DATA_LOSS:return so.DATA_LOSS;default:return Qi()}}(xo=No||(No={}))[xo.OK=0]="OK",xo[xo.CANCELLED=1]="CANCELLED",xo[xo.UNKNOWN=2]="UNKNOWN",xo[xo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xo[xo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xo[xo.NOT_FOUND=5]="NOT_FOUND",xo[xo.ALREADY_EXISTS=6]="ALREADY_EXISTS",xo[xo.PERMISSION_DENIED=7]="PERMISSION_DENIED",xo[xo.UNAUTHENTICATED=16]="UNAUTHENTICATED",xo[xo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xo[xo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xo[xo.ABORTED=10]="ABORTED",xo[xo.OUT_OF_RANGE=11]="OUT_OF_RANGE",xo[xo.UNIMPLEMENTED=12]="UNIMPLEMENTED",xo[xo.INTERNAL=13]="INTERNAL",xo[xo.UNAVAILABLE=14]="UNAVAILABLE",xo[xo.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Do=function(){function t(t,e){this.V=t,this.root=e||Co.EMPTY}return t.prototype.rt=function(e,n){return new t(this.V,this.root.rt(e,n,this.V).copy(null,null,Co.ot,null,null))},t.prototype.remove=function(e){return new t(this.V,this.root.remove(e,this.V).copy(null,null,Co.ot,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.T();){var n=this.V(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.T();){var r=this.V(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.T=function(){return this.root.T()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.at=function(){return this.root.at()},t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(t){return this.root.ut(t)},t.prototype.forEach=function(t){this.ut((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ut((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.lt=function(){return new Po(this.root,null,this.V,!1)},t.prototype._t=function(t){return new Po(this.root,t,this.V,!1)},t.prototype.ft=function(){return new Po(this.root,null,this.V,!0)},t.prototype.dt=function(t){return new Po(this.root,t,this.V,!0)},t}(),Po=function(){function t(t,e,n,r){this.wt=r,this.Tt=[];for(var i=1;!t.T();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.wt?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.wt?t.right:t.left}}return t.prototype.Et=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.wt)for(t=t.left;!t.T();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.T();)this.Tt.push(t),t=t.left;return e},t.prototype.It=function(){return this.Tt.length>0},t.prototype.At=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},t}(),Co=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.T=function(){return!1},t.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left.T()?this:this.left.min()},t.prototype.at=function(){return this.min().key},t.prototype.ct=function(){return this.right.T()?this.key:this.right.ct()},t.prototype.rt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.rt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.rt(t,e,n))).Rt()},t.prototype.Pt=function(){if(this.left.T())return t.EMPTY;var e=this;return e.left.gt()||e.left.left.gt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).Rt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.T()||i.left.gt()||i.left.left.gt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.gt()&&(i=i.yt()),i.right.T()||i.right.gt()||i.right.left.gt()||(i=i.vt()),0===n(e,i.key)){if(i.right.T())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Rt()},t.prototype.gt=function(){return this.color},t.prototype.Rt=function(){var t=this;return t.right.gt()&&!t.left.gt()&&(t=t.bt()),t.left.gt()&&t.left.left.gt()&&(t=t.yt()),t.left.gt()&&t.right.gt()&&(t=t.St()),t},t.prototype.Vt=function(){var t=this.St();return t.right.left.gt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.yt())).bt()).St()),t},t.prototype.vt=function(){var t=this.St();return t.left.left.gt()&&(t=(t=t.yt()).St()),t},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.St=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Dt=function(){var t=this.Ct();return Math.pow(2,t)<=this.size+1},t.prototype.Ct=function(){if(this.gt()&&this.left.gt())throw Qi();if(this.right.gt())throw Qi();var t=this.left.Ct();if(t!==this.right.Ct())throw Qi();return t+(this.gt()?0:1)},t}();Co.EMPTY=null,Co.RED=!0,Co.ot=!1,Co.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Qi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Qi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Qi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Qi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Qi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.rt=function(t,e,n){return new Co(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.T=function(){return!0},t.prototype.ut=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.at=function(){return null},t.prototype.ct=function(){return null},t.prototype.gt=function(){return!1},t.prototype.Dt=function(){return!0},t.prototype.Ct=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Lo=function(){function t(t){this.V=t,this.data=new Do(this.V)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.at()},t.prototype.last=function(){return this.data.ct()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ut((function(e,n){return t(e),!1}))},t.prototype.Nt=function(t,e){for(var n=this.data._t(t[0]);n.It();){var r=n.Et();if(this.V(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data._t(e):this.data.lt();n.It();)if(!t(n.Et().key))return},t.prototype.Ft=function(t){var e=this.data._t(t);return e.It()?e.Et().key:null},t.prototype.lt=function(){return new Ro(this.data.lt())},t.prototype._t=function(t){return new Ro(this.data._t(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).rt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.T=function(){return this.data.T()},t.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.lt(),r=e.data.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(0!==this.V(i,o))return!1}return!0},t.prototype.O=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.V);return n.data=e,n},t}(),Ro=function(){function t(t){this.Mt=t}return t.prototype.Et=function(){return this.Mt.Et().key},t.prototype.It=function(){return this.Mt.It()},t}(),Vo=new Do(vo.V);function Mo(){return Vo}function jo(){return Mo()}var Uo=new Do(vo.V);function Fo(){return Uo}var qo=new Do(vo.V),Bo=new Lo(vo.V);function Go(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bo,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zo=new Lo(Zi);function Ko(){return zo}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $o=function(){function t(t){this.V=t?function(e,n){return t(e,n)||vo.V(e.key,n.key)}:function(t,e){return vo.V(t.key,e.key)},this.kt=Fo(),this.$t=new Do(this.V)}return t.Lt=function(e){return new t(e.V)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.at()},t.prototype.last=function(){return this.$t.ct()},t.prototype.T=function(){return this.$t.T()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ut((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.rt(t.key,t),e.$t.rt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.lt(),r=e.$t.lt();n.It();){var i=n.Et().key,o=r.Et().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.V=this.V,r.kt=e,r.$t=n,r},t}(),Ho=function(){function t(){this.Bt=new Do(vo.V)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Bt.get(e);n?0!==t.type&&3===n.type?this.Bt=this.Bt.rt(e,t):3===t.type&&1!==n.type?this.Bt=this.Bt.rt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Bt=this.Bt.rt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Bt=this.Bt.remove(e):1===t.type&&2===n.type?this.Bt=this.Bt.rt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Bt=this.Bt.rt(e,{type:2,doc:t.doc}):Qi():this.Bt=this.Bt.rt(e,t)},t.prototype.qt=function(){var t=[];return this.Bt.ut((function(e,n){t.push(n)})),t},t}(),Qo=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Ut=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Kt=s,this.Wt=u}return t.jt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,$o.Lt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Qt.T()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Kt===t.Kt&&this.Qt.isEqual(t.Qt)&&na(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ut.isEqual(t.Ut)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Wo=function(){function t(t,e,n,r,i){this.et=t,this.Gt=e,this.zt=n,this.Ht=r,this.Jt=i}return t.Yt=function(e,n){var r=new Map;return r.set(e,Yo.Xt(e,n)),new t(co.min(),r,Ko(),Mo(),Go())},t}(),Yo=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Zt=e,this.te=n,this.ee=r,this.ne=i}return t.Xt=function(e,n){return new t(To.Z,n,Go(),Go(),Go())},t}(),Xo=function(t,e,n,r){this.se=t,this.removedTargetIds=e,this.key=n,this.ie=r},Jo=function(t,e){this.targetId=t,this.re=e},Zo=function(t,e,n,r){void 0===n&&(n=To.Z),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ts=function(){function t(){this.oe=0,this.ae=rs(),this.ce=To.Z,this.ue=!1,this.he=!0}return Object.defineProperty(t.prototype,"Zt",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"le",{get:function(){return 0!==this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.fe=function(t){t.X()>0&&(this.he=!0,this.ce=t)},t.prototype.de=function(){var t=Go(),e=Go(),n=Go();return this.ae.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Qi()}})),new Yo(this.ce,this.ue,t,e,n)},t.prototype.we=function(){this.he=!1,this.ae=rs()},t.prototype.Te=function(t,e){this.he=!0,this.ae=this.ae.rt(t,e)},t.prototype.Ee=function(t){this.he=!0,this.ae=this.ae.remove(t)},t.prototype.Ie=function(){this.oe+=1},t.prototype.me=function(){this.oe-=1},t.prototype.Ae=function(){this.he=!0,this.ue=!0},t}(),es=function(){function t(t){this.Re=t,this.Pe=new Map,this.ge=Mo(),this.Ve=ns(),this.ye=new Lo(Zi)}return t.prototype.pe=function(t){for(var e=0,n=t.se;e<n.length;e++){var r=n[e];t.ie instanceof Fu?this.ve(r,t.ie):t.ie instanceof qu&&this.be(r,t.key,t.ie)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.be(s,t.key,t.ie)}},t.prototype.Se=function(t){var e=this;this.De(t,(function(n){var r=e.Ce(n);switch(t.state){case 0:e.Ne(n)&&r.fe(t.resumeToken);break;case 1:r.me(),r.le||r.we(),r.fe(t.resumeToken);break;case 2:r.me(),r.le||e.removeTarget(n);break;case 3:e.Ne(n)&&(r.Ae(),r.fe(t.resumeToken));break;case 4:e.Ne(n)&&(e.xe(n),r.fe(t.resumeToken));break;default:Qi()}}))},t.prototype.De=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Ne(r)&&e(r)}))},t.prototype.Fe=function(t){var e=t.targetId,n=t.re.count,r=this.Oe(e);if(r){var i=r.target;if(Io(i))if(0===n){var o=new vo(i.path);this.be(e,o,new qu(o,co.min()))}else Wi(1===n);else this.Me(e)!==n&&(this.xe(e),this.ye=this.ye.add(e))}},t.prototype.ke=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.Oe(i);if(o){if(r.Zt&&Io(o.target)){var s=new vo(o.target.path);null!==e.ge.get(s)||e.$e(i,s)||e.be(i,s,new qu(s,t))}r._e&&(n.set(i,r.de()),r.we())}}));var r=Go();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.Oe(t);return!n||2===n.tt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Wo(t,n,this.ye,this.ge,r);return this.ge=Mo(),this.Ve=ns(),this.ye=new Lo(Zi),i},t.prototype.ve=function(t,e){if(this.Ne(t)){var n=this.$e(t,e.key)?2:0;this.Ce(t).Te(e.key,n),this.ge=this.ge.rt(e.key,e),this.Ve=this.Ve.rt(e.key,this.Le(e.key).add(t))}},t.prototype.be=function(t,e,n){if(this.Ne(t)){var r=this.Ce(t);this.$e(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.rt(e,this.Le(e).delete(t)),n&&(this.ge=this.ge.rt(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ce(t).de();return this.Re.Be(t).size+e.te.size-e.ne.size},t.prototype.Ie=function(t){this.Ce(t).Ie()},t.prototype.Ce=function(t){var e=this.Pe.get(t);return e||(e=new ts,this.Pe.set(t,e)),e},t.prototype.Le=function(t){var e=this.Ve.get(t);return e||(e=new Lo(Zi),this.Ve=this.Ve.rt(t,e)),e},t.prototype.Ne=function(t){var e=null!==this.Oe(t);return e||zi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Oe=function(t){var e=this.Pe.get(t);return e&&e.le?null:this.Re.qe(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new ts),this.Re.Be(t).forEach((function(n){e.be(t,n,null)}))},t.prototype.$e=function(t,e){return this.Re.Be(t).has(e)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ns(){return new Do(vo.V)}function rs(){return new Do(vo.V)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function is(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function os(t){var e=t.mapValue.fields.__previous_value__;return is(e)?os(e):e}function ss(t){var e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new ao(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var us=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?is(t)?4:10:Qi()}function cs(t,e){var n=as(t);if(n!==as(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ss(t).isEqual(ss(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vs(t.timestampValue),r=vs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return gs(t.bytesValue).isEqual(gs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ys(t.geoPointValue.latitude)===ys(e.geoPointValue.latitude)&&ys(t.geoPointValue.longitude)===ys(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ys(t.integerValue)===ys(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ys(t.doubleValue),r=ys(e.doubleValue);return n===r?go(n)===go(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return to(t.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(no(n)!==no(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cs(n[i],r[i])))return!1;return!0}(t,e);default:return Qi()}}function hs(t,e){return void 0!==(t.values||[]).find((function(t){return cs(t,e)}))}function fs(t,e){var n=as(t),r=as(e);if(n!==r)return Zi(n,r);switch(n){case 0:return 0;case 1:return Zi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ys(t.integerValue||t.doubleValue),r=ys(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ls(t.timestampValue,e.timestampValue);case 4:return ls(ss(t),ss(e));case 5:return Zi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=gs(t),r=gs(e);return n.A(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Zi(n[i],r[i]);if(0!==o)return o}return Zi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Zi(ys(t.latitude),ys(e.latitude));return 0!==n?n:Zi(ys(t.longitude),ys(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=fs(n[i],r[i]);if(o)return o}return Zi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Zi(r[s],o[s]);if(0!==u)return u;var a=fs(n[r[s]],i[o[s]]);if(0!==a)return a}return Zi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Qi()}}function ls(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Zi(t,e);var n=vs(t),r=vs(e),i=Zi(n.seconds,r.seconds);return 0!==i?i:Zi(n.nanos,r.nanos)}function ps(t){return ds(t)}function ds(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=vs(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?gs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,vo.W(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ds(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ds(t.fields[o])}return e+"}"}(t.mapValue):Qi();var e,n}function vs(t){if(Wi(!!t),"string"==typeof t){var e=0,n=us.exec(t);if(Wi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ys(t.seconds),nanos:ys(t.nanos)}}function ys(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function gs(t){return"string"==typeof t?To.fromBase64String(t):To.fromUint8Array(t)}function ms(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.M()}}function bs(t){return!!t&&"integerValue"in t}function ws(t){return!!t&&"arrayValue"in t}function Es(t){return!!t&&"nullValue"in t}function _s(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Is(t){return!!t&&"mapValue"in t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ts={asc:"ASCENDING",desc:"DESCENDING"},Ns={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xs=function(t,e){this.t=t,this.Ue=e};function As(t){return{integerValue:""+t}}function Ss(t,e){if(t.Ue){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:go(e)?"-0":e}}function Os(t,e){return mo(e)?As(e):Ss(t,e)}function ks(t,e){return t.Ue?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ds(t,e){return t.Ue?e.toBase64():e.toUint8Array()}function Ps(t,e){return ks(t,e.P())}function Cs(t){return Wi(!!t),co.m(function(t){var e=vs(t);return new ao(e.seconds,e.nanos)}(t))}function Ls(t,e){return function(t){return new fo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).M()}function Rs(t){var e=fo.k(t);return Wi(iu(e)),e}function Vs(t,e){return Ls(t.t,e.path)}function Ms(t,e){var n=Rs(e);if(n.get(1)!==t.t.projectId)throw new uo(so.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new uo(so.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new vo(qs(n))}function js(t,e){return Ls(t.t,e)}function Us(t){var e=Rs(t);return 4===e.length?fo.$():qs(e)}function Fs(t){return new fo(["projects",t.t.projectId,"databases",t.t.database]).M()}function qs(t){return Wi(t.length>4&&"documents"===t.get(4)),t.v(5)}function Bs(t,e,n){return{name:Vs(t,e),fields:n.proto.mapValue.fields}}function Gs(t,e){var n;if(e instanceof Su)n={update:Bs(t,e.key,e.value)};else if(e instanceof Lu)n={delete:Vs(t,e.key)};else if(e instanceof Ou)n={update:Bs(t,e.key,e.data),updateMask:ru(e.Qe)};else if(e instanceof Du)n={transform:{document:Vs(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof cu)return{fieldPath:e.field.M(),setToServerValue:"REQUEST_TIME"};if(n instanceof hu)return{fieldPath:e.field.M(),appendMissingElements:{values:n.elements}};if(n instanceof lu)return{fieldPath:e.field.M(),removeAllFromArray:{values:n.elements}};if(n instanceof du)return{fieldPath:e.field.M(),increment:n.Ke};throw Qi()}(0,t)}))}};else{if(!(e instanceof Ru))return Qi();n={verify:Vs(t,e.key)}}return e.je.We||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ps(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Qi()}(t,e.je)),n}function zs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?wu.updateTime(Cs(t.updateTime)):void 0!==t.exists?wu.exists(t.exists):wu.Ge()}(e.currentDocument):wu.Ge();if(e.update){e.update.name;var r=Ms(t,e.update.name),i=new Vu({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new gu(e.map((function(t){return po.U(t)})))}(e.updateMask);return new Ou(r,i,o,n)}return new Su(r,i,n)}if(e.delete){var s=Ms(t,e.delete);return new Lu(s,n)}if(e.transform){var u=Ms(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Wi("REQUEST_TIME"===e.setToServerValue),n=new cu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new hu(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new lu(i)}else"increment"in e?n=new du(t,e.increment):Qi();var o=po.U(e.fieldPath);return new mu(o,n)}(t,e)}));return Wi(!0===n.exists),new Du(u,a)}if(e.verify){var c=Ms(t,e.verify);return new Ru(c,n)}return Qi()}function Ks(t,e){return{documents:[js(t,e.path)]}}function $s(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=js(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=js(t,r.S()),n.structuredQuery.from=[{collectionId:r.C()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(_s(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NAN"}};if(Es(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_s(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NAN"}};if(Es(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(t.field),op:Js(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Zs(t.field),direction:Xs(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Ue||yo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ws(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ws(e.endAt)),n}function Hs(t){var e=Us(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Qs(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new wa(tu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return yo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ys(n.startAt));var h=null;return n.endAt&&(h=Ys(n.endAt)),zu(e,i,u,s,a,"F",c,h)}function Qs(t){return t?void 0!==t.unaryFilter?[nu(t)]:void 0!==t.fieldFilter?[eu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Qs(t)})).reduce((function(t,e){return t.concat(e)})):Qi():[]}function Ws(t){return{before:t.before,values:t.position}}function Ys(t){var e=!!t.before,n=t.values||[];return new ya(n,e)}function Xs(t){return Ts[t]}function Js(t){return Ns[t]}function Zs(t){return{fieldPath:t.M()}}function tu(t){return po.U(t.fieldPath)}function eu(t){return ua.create(tu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Qi()}}(t.fieldFilter.op),t.fieldFilter.value)}function nu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=tu(t.unaryFilter.field);return ua.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=tu(t.unaryFilter.field);return ua.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tu(t.unaryFilter.field);return ua.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tu(t.unaryFilter.field);return ua.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Qi()}}function ru(t){var e=[];return t.fields.forEach((function(t){return e.push(t.M())})),{fieldPaths:e}}function iu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ou=function(){this.ze=void 0};function su(t,e,n){return t instanceof cu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof hu?fu(t,e):t instanceof lu?pu(t,e):function(t,e){var n=au(t,e),r=vu(n)+vu(t.Ke);return bs(n)&&bs(t.Ke)?As(r):Ss(t.serializer,r)}(t,e)}function uu(t,e,n){return t instanceof hu?fu(t,e):t instanceof lu?pu(t,e):n}function au(t,e){return t instanceof du?bs(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e}(ou),hu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return B(e,t),e}(ou);function fu(t,e){for(var n=yu(e),r=function(t){n.some((function(e){return cs(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var lu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return B(e,t),e}(ou);function pu(t,e){for(var n=yu(e),r=function(t){n=n.filter((function(e){return!cs(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Ke=n,r}return B(e,t),e}(ou);function vu(t){return ys(t.integerValue||t.doubleValue)}function yu(t){return ws(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gu=function(){function t(t){this.fields=t,t.sort(po.V)}return t.prototype.He=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].N(t))return!0;return!1},t.prototype.isEqual=function(t){return to(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),mu=function(t,e){this.field=t,this.transform=e},bu=function(t,e){this.version=t,this.transformResults=e},wu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Ge=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"We",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Eu(t,e){return void 0!==t.updateTime?e instanceof Fu&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Fu}var _u=function(){};function Iu(t,e,n){return t instanceof Su?function(t,e,n){return new Fu(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Ou?function(t,e,n){if(!Eu(t.je,e))return new Bu(t.key,n.version);var r=ku(t,e);return new Fu(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Du?function(t,e,n){if(Wi(null!=n.transformResults),!Eu(t.je,e))return new Bu(t.key,n.version);var r=Pu(t,e),i=function(t,e,n){var r=[];Wi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Fu&&(u=e.field(o.field)),r.push(uu(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Cu(t,r.data(),i);return new Fu(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new qu(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Tu(t,e,n,r){return t instanceof Su?function(t,e){if(!Eu(t.je,e))return e;var n=Au(e);return new Fu(t.key,n,t.value,{Je:!0})}(t,e):t instanceof Ou?function(t,e){if(!Eu(t.je,e))return e;var n=Au(e),r=ku(t,e);return new Fu(t.key,n,r,{Je:!0})}(t,e):t instanceof Du?function(t,e,n,r){if(!Eu(t.je,e))return e;var i=Pu(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Fu&&(c=n.field(u.field)),null===c&&r instanceof Fu&&(c=r.field(u.field)),i.push(su(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=Cu(t,i.data(),o);return new Fu(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return Eu(t.je,e)?new qu(t.key,co.min()):e}(t,e)}function Nu(t,e){return t instanceof Du?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Fu?e.field(o.field):void 0,u=au(o.transform,s||null);null!=u&&(n=null==n?(new Mu).set(o.field,u):n.set(o.field,u))}return n?n.Ye():null}(t,e):null}function xu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.je.isEqual(e.je)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||to(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof hu&&e instanceof hu||t instanceof lu&&e instanceof lu?to(t.elements,e.elements,cs):t instanceof du&&e instanceof du?cs(t.Ke,e.Ke):t instanceof cu&&e instanceof cu}(t.transform,e.transform)}(t,e)})))}function Au(t){return t instanceof Fu?t.version:co.min()}var Su=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.je=r,i.type=0,i}return B(e,t),e}(_u),Ou=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Qe=r,o.je=i,o.type=1,o}return B(e,t),e}(_u);function ku(t,e){return function(t,e){var n=new Mu(e);return t.Qe.fields.forEach((function(e){if(!e.T()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Ye()}(t,e instanceof Fu?e.data():Vu.empty())}var Du=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.je=wu.exists(!0),r}return B(e,t),e}(_u);function Pu(t,e){return e}function Cu(t,e,n){for(var r=new Mu(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Ye()}var Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=3,r}return B(e,t),e}(_u),Ru=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.je=n,r.type=4,r}return B(e,t),e}(_u),Vu=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.T())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Is(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.C()])||null},t.prototype.isEqual=function(t){return cs(this.proto,t.proto)},t}(),Mu=function(){function t(t){void 0===t&&(t=Vu.empty()),this.Xe=t,this.Ze=new Map}return t.prototype.set=function(t,e){return this.tn(t,e),this},t.prototype.delete=function(t){return this.tn(t,null),this},t.prototype.tn=function(t,e){for(var n=this.Ze,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===as(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.C(),e)},t.prototype.Ye=function(){var t=this.en(po.$(),this.Ze);return null!=t?new Vu(t):this.Xe},t.prototype.en=function(t,e){var n=this,r=!1,i=this.Xe.field(t),o=Is(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.en(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ju(t){var e=[];return ro(t.fields||{},(function(t,n){var r=new po([t]);if(Is(n)){var i=ju(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new gu(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Uu=function(t,e){this.key=t,this.version=e},Fu=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).nn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return B(e,t),e.prototype.field=function(t){return this.nn.field(t)},e.prototype.data=function(){return this.nn},e.prototype.sn=function(){return this.nn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.nn.isEqual(t.nn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.nn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Uu),qu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return B(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Uu),Bu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Uu),Gu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.rn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.on=null,this.an=null,this.startAt,this.endAt};function zu(t,e,n,r,i,o,s,u){return new Gu(t,e,n,r,i,o,s,u)}function Ku(t){return new Gu(t)}function $u(t){return!yo(t.limit)&&"F"===t.limitType}function Hu(t){return!yo(t.limit)&&"L"===t.limitType}function Qu(t){return t.rn.length>0?t.rn[0].field:null}function Wu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.cn())return r.field}return null}function Yu(t){return null!==t.collectionGroup}function Xu(t){var e=Yi(t);if(null===e.on){e.on=[];var n=Wu(e),r=Qu(e);if(null!==n&&null===r)n.B()||e.on.push(new wa(n)),e.on.push(new wa(po.q(),"asc"));else{for(var i=!1,o=0,s=e.rn;o<s.length;o++){var u=s[o];e.on.push(u),u.field.B()&&(i=!0)}if(!i){var a=e.rn.length>0?e.rn[e.rn.length-1].dir:"asc";e.on.push(new wa(po.q(),a))}}}return e.on}function Ju(t){var e=Yi(t);if(!e.an)if("F"===e.limitType)e.an=wo(e.path,e.collectionGroup,Xu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Xu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new wa(o.field,s))}var u=e.endAt?new ya(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ya(e.startAt.position,!e.startAt.before):null;e.an=wo(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.an}function Zu(t,e,n){return new Gu(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ta(t,e){return new Gu(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}function ea(t,e){return new Gu(t.path,t.collectionGroup,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}function na(t,e){return _o(Ju(t),Ju(e))&&t.limitType===e.limitType}function ra(t){return Eo(Ju(t))+"|lt:"+t.limitType}function ia(t){return"Query(target="+function(t){var e=t.path.M();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.M()+" "+e.op+" "+ps(e.value);var e})).join(", ")+"]"),yo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.M()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ga(t.startAt)),t.endAt&&(e+=", endAt: "+ga(t.endAt)),"Target("+e+")"}(Ju(t))+"; limitType="+t.limitType+")"}function oa(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.j(t.collectionGroup)&&t.path.N(n):vo.G(t.path)?t.path.isEqual(n):t.path.F(n)}(t,e)&&function(t,e){for(var n=0,r=t.rn;n<r.length;n++){var i=r[n];if(!i.field.B()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ma(t.startAt,Xu(t),e)||t.endAt&&ma(t.endAt,Xu(t),e))}(t,e)}function sa(t){return function(e,n){for(var r=!1,i=0,o=Xu(t);i<o.length;i++){var s=o[i],u=Ea(s,e,n);if(0!==u)return u;r=r||s.field.B()}return 0}}var ua=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return B(e,t),e.create=function(t,n,r){return t.B()?"in"===n||"not-in"===n?this.un(t,n,r):new aa(t,n,r):"array-contains"===n?new la(t,r):"in"===n?new pa(t,r):"not-in"===n?new da(t,r):"array-contains-any"===n?new va(t,r):new e(t,n,r)},e.un=function(t,e,n){return"in"===e?new ca(t,n):new ha(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.hn(fs(e,this.value)):null!==e&&as(this.value)===as(e)&&this.hn(fs(e,this.value))},e.prototype.hn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Qi()}},e.prototype.cn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),aa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=vo.W(r.referenceValue),i}return B(e,t),e.prototype.matches=function(t){var e=vo.V(t.key,this.key);return this.hn(e)},e}(ua),ca=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=fa("in",n),r}return B(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ua),ha=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=fa("not-in",n),r}return B(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ua);function fa(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return vo.W(t.referenceValue)}))}var la=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return B(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ws(e)&&hs(e.arrayValue,this.value)},e}(ua),pa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return B(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&hs(this.value.arrayValue,e)},e}(ua),da=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return B(e,t),e.prototype.matches=function(t){if(hs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!hs(this.value.arrayValue,e)},e}(ua),va=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return B(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ws(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return hs(e.value.arrayValue,t)}))},e}(ua),ya=function(t,e){this.position=t,this.before=e};function ga(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ps(t)})).join(",")}function ma(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.B()?vo.V(vo.W(s.referenceValue),n.key):fs(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ba(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!cs(t.position[n],e.position[n]))return!1;return!0}var wa=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Ea(t,e,n){var r=t.field.B()?vo.V(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?fs(r,i):Qi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Qi()}}function _a(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ia=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Ta=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ln=t,this._n=e,this.fn=n,this.dn=r,this.wn=i,this.Tn=0,this.En=null,this.In=Date.now(),this.reset()}return t.prototype.reset=function(){this.Tn=0},t.prototype.mn=function(){this.Tn=this.wn},t.prototype.An=function(t){var e=this;this.cancel();var n=Math.floor(this.Tn+this.Rn()),r=Math.max(0,Date.now()-this.In),i=Math.max(0,n-r);i>0&&zi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Tn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.En=this.ln.Pn(this._n,i,(function(){return e.In=Date.now(),t()})),this.Tn*=this.dn,this.Tn<this.fn&&(this.Tn=this.fn),this.Tn>this.wn&&(this.Tn=this.wn)},t.prototype.gn=function(){null!==this.En&&(this.En.Vn(),this.En=null)},t.prototype.cancel=function(){null!==this.En&&(this.En.cancel(),this.En=null)},t.prototype.Rn=function(){return(Math.random()-.5)*this.Tn},t}(),Na=function(){function t(t){var e=this;this.yn=null,this.pn=null,this.result=void 0,this.error=void 0,this.vn=!1,this.bn=!1,t((function(t){e.vn=!0,e.result=t,e.yn&&e.yn(t)}),(function(t){e.vn=!0,e.error=t,e.pn&&e.pn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.bn&&Qi(),this.bn=!0,this.vn?this.error?this.Sn(n,this.error):this.Dn(e,this.result):new t((function(t,i){r.yn=function(n){r.Dn(e,n).next(t,i)},r.pn=function(e){r.Sn(n,e).next(t,i)}}))},t.prototype.Cn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Nn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Dn=function(e,n){return e?this.Nn((function(){return e(n)})):t.resolve(n)},t.prototype.Sn=function(e,n){return e?this.Nn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.xn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Fn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.xn(r)},t}(),xa=function(){function t(e,n,r){this.name=e,this.version=n,this.On=r,12.2===t.Mn(J())&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return zi("SimpleDb","Removing database:",t),Pa(window.indexedDB.deleteDatabase(t)).Cn()},t.kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.$n())return!0;var e=J(),n=t.Mn(e),r=0<n&&n<10,i=t.Ln(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.$n=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Bn)},t.qn=function(t,e){return t.store(e)},t.Mn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Ln=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Un=function(t){return z(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(zi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Sa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new uo(so.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Sa(t,n))},i.onupgradeneeded=function(t){zi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.On.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){zi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Qn&&(this.db.onversionchange=function(t){return n.Qn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.Qn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return z(this,void 0,void 0,(function(){var i,o,s,u,a;return K(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,h;return K(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Un(t)];case 2:return u.db=f.sent(),e=ka.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Na.reject(t)})).Cn(),a={},s.catch((function(){})),[4,e.Wn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),h="FirebaseError"!==c.name&&o<3,zi("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Aa=function(){function t(t){this.jn=t,this.Gn=!1,this.zn=null}return Object.defineProperty(t.prototype,"vn",{get:function(){return this.Gn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Hn",{get:function(){return this.zn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.jn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Gn=!0},t.prototype.Jn=function(t){this.zn=t},t.prototype.delete=function(){return Pa(this.jn.delete())},t}(),Sa=function(t){function e(e,n){var r=this;return(r=t.call(this,so.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return B(e,t),e}(uo);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Oa(t){return"IndexedDbTransactionError"===t.name}var ka=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Yn=new Ia,this.transaction.oncomplete=function(){n.Yn.resolve()},this.transaction.onabort=function(){e.error?n.Yn.reject(new Sa(t,e.error)):n.Yn.resolve()},this.transaction.onerror=function(e){var r=La(e.target.error);n.Yn.reject(new Sa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Sa(n,e)}},Object.defineProperty(t.prototype,"Wn",{get:function(){return this.Yn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Yn.reject(t),this.aborted||(zi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Da(e)},t}(),Da=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(zi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(zi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pa(n)},t.prototype.add=function(t){return zi("SimpleDb","ADD",this.store.name,t,t),Pa(this.store.add(t))},t.prototype.get=function(t){var e=this;return Pa(this.store.get(t)).next((function(n){return void 0===n&&(n=null),zi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return zi("SimpleDb","DELETE",this.store.name,t),Pa(this.store.delete(t))},t.prototype.count=function(){return zi("SimpleDb","COUNT",this.store.name),Pa(this.store.count())},t.prototype.Xn=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Zn(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ts=function(t,e){zi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.es=!1;var r=this.cursor(n);return this.Zn(r,(function(t,e,n){return n.delete()}))},t.prototype.ns=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Zn(r,e)},t.prototype.ss=function(t){var e=this.cursor({});return new Na((function(n,r){e.onerror=function(t){var e=La(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Zn=function(t,e){var n=[];return new Na((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Aa(i),s=e(i.primaryKey,i.value,o);if(s instanceof Na){var u=s.catch((function(t){return o.done(),Na.reject(t)}));n.push(u)}o.vn?r():null===o.Hn?i.continue():i.continue(o.Hn)}else r()}})).next((function(){return Na.xn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.es?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Pa(t){return new Na((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=La(t.target.error);n(e)}}))}var Ca=!1;function La(t){var e=xa.Mn(J());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ca||(Ca=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ra(){return"undefined"!=typeof window?window:null}function Va(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ma=function(){function t(t,e,n,r,i){this.rs=t,this._n=e,this.os=n,this.op=r,this.cs=i,this.us=new Ia,this.then=this.us.promise.then.bind(this.us.promise),this.us.promise.catch((function(t){}))}return t.hs=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.ls=setTimeout((function(){return e._s()}),t)},t.prototype.Vn=function(){return this._s()},t.prototype.cancel=function(t){null!==this.ls&&(this.clearTimeout(),this.us.reject(new uo(so.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype._s=function(){var t=this;this.rs.fs((function(){return null!==t.ls?(t.clearTimeout(),t.op().then((function(e){return t.us.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.ls&&(this.cs(this),clearTimeout(this.ls),this.ls=null)},t}(),ja=function(){function t(){var t=this;this.ds=Promise.resolve(),this.ws=[],this.Ts=!1,this.Es=[],this.Is=null,this.As=!1,this.Rs=[],this.Ps=new Ta(this,"async_queue_retry"),this.gs=function(){var e=Va();e&&zi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ps.gn()};var e=Va();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.gs)}return Object.defineProperty(t.prototype,"Vs",{get:function(){return this.Ts},enumerable:!1,configurable:!0}),t.prototype.fs=function(t){this.enqueue(t)},t.prototype.ys=function(t){this.ps(),this.vs(t)},t.prototype.bs=function(){if(!this.Ts){this.Ts=!0;var t=Va();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.gs)}},t.prototype.enqueue=function(t){return this.ps(),this.Ts?new Promise((function(t){})):this.vs(t)},t.prototype.Ss=function(t){var e=this;this.fs((function(){return e.ws.push(t),e.Ds()}))},t.prototype.Ds=function(){return z(this,void 0,void 0,(function(){var t,e=this;return K(this,(function(n){switch(n.label){case 0:if(0===this.ws.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ws[0]()];case 2:return n.sent(),this.ws.shift(),this.Ps.reset(),[3,4];case 3:if(!Oa(t=n.sent()))throw t;return zi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ws.length>0&&this.Ps.An((function(){return e.Ds()})),n.label=5;case 5:return[2]}}))}))},t.prototype.vs=function(t){var e=this,n=this.ds.then((function(){return e.As=!0,t().catch((function(t){throw e.Is=t,e.As=!1,Ki("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.As=!1,t}))}));return this.ds=n,n},t.prototype.Pn=function(t,e,n){var r=this;this.ps(),this.Rs.indexOf(t)>-1&&(e=0);var i=Ma.hs(this,t,e,n,(function(t){return r.Cs(t)}));return this.Es.push(i),i},t.prototype.ps=function(){this.Is&&Qi()},t.prototype.Ns=function(){},t.prototype.xs=function(){return z(this,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return[4,t=this.ds];case 1:e.sent(),e.label=2;case 2:if(t!==this.ds)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Fs=function(t){for(var e=0,n=this.Es;e<n.length;e++)if(n[e]._n===t)return!0;return!1},t.prototype.Os=function(t){var e=this;return this.xs().then((function(){e.Es.sort((function(t,e){return t.os-e.os}));for(var n=0,r=e.Es;n<r.length;n++){var i=r[n];if(i.Vn(),"all"!==t&&i._n===t)break}return e.xs()}))},t.prototype.Ms=function(t){this.Rs.push(t)},t.prototype.Cs=function(t){var e=this.Es.indexOf(t);this.Es.splice(e,1)},t}();function Ua(t,e){if(Ki("AsyncQueue",e+": "+t),Oa(t))return new uo(so.UNAVAILABLE,e+": "+t);throw t}var Fa=function(){this.ks=void 0,this.listeners=[]},qa=function(){this.queries=new oo((function(t){return ra(t)}),na),this.onlineState="Unknown",this.$s=new Set};function Ba(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return K(this,(function(c){switch(c.label){case 0:if(n=Yi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Fa),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Ls(r)];case 2:return s.ks=c.sent(),[3,4];case 3:return u=c.sent(),a=Ua(u,"Initialization of query '"+ia(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Bs(n.onlineState),o.ks&&e.qs(o.ks)&&$a(n),[2]}}))}))}function Ga(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(u){return n=Yi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Us(r))]:[2]}))}))}function za(t,e){for(var n=Yi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].qs(s)&&(r=!0);a.ks=s}}r&&$a(n)}function Ka(t,e,n){var r=Yi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function $a(t){t.$s.forEach((function(t){t.next()}))}var Ha=function(){function t(t,e,n){this.query=t,this.Qs=e,this.Ks=!1,this.Ws=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Qo(t.query,t.docs,t.Ut,e,t.Qt,t.fromCache,t.Kt,!0)}var o=!1;return this.Ks?this.js(t)&&(this.Qs.next(t),o=!0):this.Gs(t,this.onlineState)&&(this.zs(t),o=!0),this.Ws=t,o},t.prototype.onError=function(t){this.Qs.error(t)},t.prototype.Bs=function(t){this.onlineState=t;var e=!1;return this.Ws&&!this.Ks&&this.Gs(this.Ws,t)&&(this.zs(this.Ws),e=!0),e},t.prototype.Gs=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Hs&&n||t.docs.T()&&"Offline"!==e)},t.prototype.js=function(t){if(t.docChanges.length>0)return!0;var e=this.Ws&&this.Ws.hasPendingWrites!==t.hasPendingWrites;return!(!t.Kt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.zs=function(t){t=Qo.jt(t.query,t.docs,t.Qt,t.fromCache),this.Ks=!0,this.Qs.next(t)},t}(),Qa=function(){function t(t){this.uid=t}return t.prototype.Js=function(){return null!=this.uid},t.prototype.Ys=function(){return this.Js()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Qa.UNAUTHENTICATED=new Qa(null),Qa.Xs=new Qa("google-credentials-uid"),Qa.Zs=new Qa("first-party-uid");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Wa=function(t,e){this.user=e,this.type="OAuth",this.ti={},this.ti.Authorization="Bearer "+t},Ya=function(){function t(){this.ei=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.ni=function(){},t.prototype.si=function(t){this.ei=t,t(Qa.UNAUTHENTICATED)},t.prototype.ii=function(){this.ei=null},t}(),Xa=function(){function t(t){var e=this;this.ri=null,this.currentUser=Qa.UNAUTHENTICATED,this.oi=!1,this.ai=0,this.ei=null,this.forceRefresh=!1,this.ri=function(){e.ai++,e.currentUser=e.ci(),e.oi=!0,e.ei&&e.ei(e.currentUser)},this.ai=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ri):(this.ri(null),t.get().then((function(t){e.auth=t,e.ri&&e.auth.addAuthTokenListener(e.ri)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.ai,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.ai!==e?(zi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wi("string"==typeof n.accessToken),new Wa(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.ni=function(){this.forceRefresh=!0},t.prototype.si=function(t){this.ei=t,this.oi&&t(this.currentUser)},t.prototype.ii=function(){this.auth&&this.auth.removeAuthTokenListener(this.ri),this.ri=null,this.ei=null},t.prototype.ci=function(){var t=this.auth&&this.auth.getUid();return Wi(null===t||"string"==typeof t),new Qa(t)},t}(),Ja=function(){function t(t,e){this.ui=t,this.hi=e,this.type="FirstParty",this.user=Qa.Zs}return Object.defineProperty(t.prototype,"ti",{get:function(){var t={"X-Goog-AuthUser":this.hi},e=this.ui.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Za=function(){function t(t,e){this.ui=t,this.hi=e}return t.prototype.getToken=function(){return Promise.resolve(new Ja(this.ui,this.hi))},t.prototype.si=function(t){t(Qa.Zs)},t.prototype.ii=function(){},t.prototype.ni=function(){},t}(),tc=function(){function t(t,e,n,r){this.batchId=t,this.li=e,this.baseMutations=n,this.mutations=r}return t.prototype._i=function(t,e,n){for(var r=n.fi,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Iu(o,e,r[i]))}return e},t.prototype.di=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Tu(i,e,e,this.li))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Tu(a,e,o,this.li))}return e},t.prototype.wi=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.di(r.key,t.get(r.key));i&&(n=n.rt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Go())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&to(this.mutations,t.mutations,(function(t,e){return xu(t,e)}))&&to(this.baseMutations,t.baseMutations,(function(t,e){return xu(t,e)}))},t}(),ec=function(){function t(t,e,n,r){this.batch=t,this.Ti=e,this.fi=n,this.Ei=r}return t.from=function(e,n,r){Wi(e.mutations.length===r.length);for(var i=qo,o=e.mutations,s=0;s<o.length;s++)i=i.rt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),nc=function(){function t(){this.Ii=new oo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mi=!1}return t.prototype.Ai=function(t){var e=this.Ii.get(t);return e?e.readTime:co.min()},t.prototype.Ri=function(t,e){this.Pi(),this.Ii.set(t.key,{gi:t,readTime:e})},t.prototype.Vi=function(t,e){void 0===e&&(e=null),this.Pi(),this.Ii.set(t,{gi:null,readTime:e})},t.prototype.yi=function(t,e){this.Pi();var n=this.Ii.get(e);return void 0!==n?Na.resolve(n.gi):this.pi(t,e)},t.prototype.getEntries=function(t,e){return this.vi(t,e)},t.prototype.apply=function(t){return this.Pi(),this.mi=!0,this.bi(t)},t.prototype.Pi=function(){},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rc(t){return new xs(t,!0)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ic(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var oc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sc=function(){function t(){this.Si=[]}return t.prototype.Di=function(t){this.Si.push(t)},t.prototype.Ci=function(){this.Si.forEach((function(t){return t()}))},t}(),uc=function(){function t(t,e,n){this.Ni=t,this.xi=e,this.Fi=n}return t.prototype.Oi=function(t,e){var n=this;return this.xi.Mi(t,e).next((function(r){return n.ki(t,e,r)}))},t.prototype.ki=function(t,e,n){return this.Ni.yi(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].di(e,t);return t}))},t.prototype.$i=function(t,e,n){var r=jo();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].di(t,e);r=r.rt(t,e)})),r},t.prototype.Li=function(t,e){var n=this;return this.Ni.getEntries(t,e).next((function(e){return n.Bi(t,e)}))},t.prototype.Bi=function(t,e){var n=this;return this.xi.qi(t,e).next((function(r){var i=n.$i(t,e,r),o=Mo();return i.forEach((function(t,e){e||(e=new qu(t,co.min())),o=o.rt(t,e)})),o}))},t.prototype.Ui=function(t,e,n){return function(t){return vo.G(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Qi(t,e.path):Yu(e)?this.Ki(t,e,n):this.Wi(t,e,n)},t.prototype.Qi=function(t,e){return this.Oi(t,new vo(e)).next((function(t){var e=Fo();return t instanceof Fu&&(e=e.rt(t.key,t)),e}))},t.prototype.Ki=function(t,e,n){var r=this,i=e.collectionGroup,o=Fo();return this.Fi.ji(t,i).next((function(s){return Na.forEach(s,(function(s){var u=function(t,e){return new Gu(e,null,t.rn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Wi(t,u,n).next((function(t){t.forEach((function(t,e){o=o.rt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Wi=function(t,e,n){var r,i,o=this;return this.Ni.Ui(t,e,n).next((function(n){return r=n,o.xi.Gi(t,e)})).next((function(e){return i=e,o.zi(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=Tu(a,h,h,o.li);r=f instanceof Fu?r.rt(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){oa(e,n)||(r=r.remove(t))})),r}))},t.prototype.zi=function(t,e,n){for(var r=Go(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof Ou&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Ni.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Fu&&(c=c.rt(t,e))})),c}))},t}(),ac=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}return t.Yi=function(e,n){for(var r=Go(),i=Go(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),cc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Xi=function(t){return n.Zi(t)},this.tr=function(t){return e.er(t)})}return t.prototype.Zi=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.tr&&this.tr(t),t},t}();function hc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Zi(n,i);return 0===s?Zi(r,o):s}cc.nr=-1;var fc=function(){function t(t){this.sr=t,this.buffer=new Lo(hc),this.ir=0}return t.prototype.rr=function(){return++this.ir},t.prototype.ar=function(t){var e=[t,this.rr()];if(this.buffer.size<this.sr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),lc={cr:!1,ur:0,hr:0,lr:0},pc=function(){function t(t,e,n){this._r=t,this.dr=e,this.wr=n}return t.Tr=function(e){return new t(e,t.Er,t.Ir)},t}();pc.Er=10,pc.Ir=1e3,pc.mr=new pc(41943040,pc.Er,pc.Ir),pc.Ar=new pc(-1,0,0);var dc=function(){function t(t,e){this.Rr=t,this.rs=e,this.Pr=!1,this.gr=null}return t.prototype.start=function(t){-1!==this.Rr.params._r&&this.Vr(t)},t.prototype.stop=function(){this.gr&&(this.gr.cancel(),this.gr=null)},Object.defineProperty(t.prototype,"yr",{get:function(){return null!==this.gr},enumerable:!1,configurable:!0}),t.prototype.Vr=function(t){var e=this,n=this.Pr?3e5:6e4;zi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.gr=this.rs.Pn("lru_garbage_collection",n,(function(){return z(e,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:this.gr=null,this.Pr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.pr(this.Rr)];case 2:return n.sent(),[3,7];case 3:return Oa(e=n.sent())?(zi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,qh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Vr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),vc=function(){function t(t,e){this.vr=t,this.params=e}return t.prototype.br=function(t,e){return this.vr.Sr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Dr=function(t,e){var n=this;if(0===e)return Na.resolve(cc.nr);var r=new fc(e);return this.vr.De(t,(function(t){return r.ar(t.sequenceNumber)})).next((function(){return n.vr.Cr(t,(function(t){return r.ar(t)}))})).next((function(){return r.maxValue}))},t.prototype.Nr=function(t,e,n){return this.vr.Nr(t,e,n)},t.prototype.Fr=function(t,e){return this.vr.Fr(t,e)},t.prototype.Or=function(t,e){var n=this;return-1===this.params._r?(zi("LruGarbageCollector","Garbage collection skipped; disabled"),Na.resolve(lc)):this.Mr(t).next((function(r){return r<n.params._r?(zi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params._r),lc):n.kr(t,e)}))},t.prototype.Mr=function(t){return this.vr.Mr(t)},t.prototype.kr=function(t,e){var n,r,i,o,s,u,a,c=this,h=Date.now();return this.br(t,this.params.dr).next((function(e){return e>c.params.wr?(zi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.wr+" from "+e),r=c.params.wr):r=e,o=Date.now(),c.Dr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Nr(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.Fr(t,n)})).next((function(t){return a=Date.now(),Gi()<=dt.DEBUG&&zi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-h)+"ms"),Na.resolve({cr:!0,ur:r,hr:i,lr:t})}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function yc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mc(e)),e=gc(t.get(n),e);return mc(e)}function gc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function mc(t){return t+""}function bc(t){var e=t.length;if(Wi(e>=2),2===e)return Wi(""===t.charAt(0)&&""===t.charAt(1)),fo.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Qi(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Qi()}o=s+2}return new fo(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wc=function(t){this.$r=t};function Ec(t,e){if(e.document)return function(t,e,n){var r=Ms(t,e.name),i=Cs(e.updateTime),o=new Vu({mapValue:{fields:e.fields}});return new Fu(r,i,o,{hasCommittedMutations:!!n})}(t.$r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=vo.H(e.noDocument.path),r=xc(e.noDocument.readTime);return new qu(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=vo.H(e.unknownDocument.path),o=xc(e.unknownDocument.version);return new Bu(i,o)}return Qi()}function _c(t,e,n){var r=Ic(n),i=e.key.path.S().O();if(e instanceof Fu){var o=function(t,e){return{name:Vs(t,e.key),fields:e.sn().mapValue.fields,updateTime:ks(t,e.version.P())}}(t.$r,e),s=e.hasCommittedMutations;return new Zc(null,null,o,s,r,i)}if(e instanceof qu){var u=e.key.path.O(),a=Nc(e.version),c=e.hasCommittedMutations;return new Zc(null,new Xc(u,a),null,c,r,i)}if(e instanceof Bu){var h=e.key.path.O(),f=Nc(e.version);return new Zc(new Jc(h,f),null,null,!0,r,i)}return Qi()}function Ic(t){var e=t.P();return[e.seconds,e.nanoseconds]}function Tc(t){var e=new ao(t[0],t[1]);return co.m(e)}function Nc(t){var e=t.P();return new $c(e.seconds,e.nanoseconds)}function xc(t){var e=new ao(t.seconds,t.nanoseconds);return co.m(e)}function Ac(t,e){var n=(e.baseMutations||[]).map((function(e){return zs(t.$r,e)})),r=e.mutations.map((function(e){return zs(t.$r,e)})),i=ao.fromMillis(e.localWriteTimeMs);return new tc(e.batchId,i,n,r)}function Sc(t){var e,n,r=xc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?xc(t.lastLimboFreeSnapshotVersion):co.min();return void 0!==t.query.documents?(Wi(1===(n=t.query).documents.length),e=Ju(Ku(Us(n.documents[0])))):e=function(t){return Ju(Hs(t))}(t.query),new Ao(e,t.targetId,0,t.lastListenSequenceNumber,r,i,To.fromBase64String(t.resumeToken))}function Oc(t,e){var n,r=Nc(e.et),i=Nc(e.lastLimboFreeSnapshotVersion);n=Io(e.target)?Ks(t.$r,e.target):$s(t.$r,e.target);var o=e.resumeToken.toBase64();return new eh(e.targetId,Eo(e.target),r,o,e.sequenceNumber,i,n)}function kc(t){var e=Hs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Zu(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Dc=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Fi=n,this.Lr=r,this.Br={}}return t.qr=function(e,n,r,i){return Wi(""!==e.uid),new t(e.Js()?e.uid:"",n,r,i)},t.prototype.Ur=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).ns({index:Wc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Qr=function(t,e,n,r){var i=this,o=Rc(t),s=Lc(t);return s.add({}).next((function(u){Wi("number"==typeof u);for(var a=new tc(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Gs(t.$r,e)})),i=n.mutations.map((function(e){return Gs(t.$r,e)}));return new Wc(e,n.batchId,n.li.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new Lo((function(t,e){return Zi(t.M(),e.M())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Yc.key(i.userId,d.key.path,u);f=f.add(d.key.path.S()),h.push(s.put(c)),h.push(o.put(v,Yc.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Fi.Kr(t,e))})),t.Di((function(){i.Br[u]=a.keys()})),Na.xn(h).next((function(){return a}))}))},t.prototype.Wr=function(t,e){var n=this;return Lc(t).get(e).next((function(t){return t?(Wi(t.userId===n.userId),Ac(n.serializer,t)):null}))},t.prototype.jr=function(t,e){var n=this;return this.Br[e]?Na.resolve(this.Br[e]):this.Wr(t,e).next((function(t){if(t){var r=t.keys();return n.Br[e]=r,r}return null}))},t.prototype.Gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lc(t).ns({index:Wc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Wi(e.batchId>=r),o=Ac(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.zr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Lc(t).ns({index:Wc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Hr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).Xn(Wc.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ac(e.serializer,t)}))}))},t.prototype.Mi=function(t,e){var n=this,r=Yc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Rc(t).ns({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=bc(a);if(u===n.userId&&e.path.isEqual(h))return Lc(t).get(c).next((function(t){if(!t)throw Qi();Wi(t.userId===n.userId),o.push(Ac(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.qi=function(t,e){var n=this,r=new Lo(Zi),i=[];return e.forEach((function(e){var o=Yc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Rc(t).ns({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=bc(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Na.xn(i).next((function(){return n.Jr(t,r)}))},t.prototype.Gi=function(t,e){var n=this,r=e.path,i=r.length+1,o=Yc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Lo(Zi);return Rc(t).ns({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=bc(a);s===n.userId&&r.N(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Jr(t,u)}))},t.prototype.Jr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Lc(t).get(e).next((function(t){if(null===t)throw Qi();Wi(t.userId===n.userId),r.push(Ac(n.serializer,t))})))})),Na.xn(i).next((function(){return r}))},t.prototype.Yr=function(t,e){var n=this;return Cc(t.Xr,this.userId,e).next((function(r){return t.Di((function(){n.Zr(e.batchId)})),Na.forEach(r,(function(e){return n.Lr.eo(t,e)}))}))},t.prototype.Zr=function(t){delete this.Br[t]},t.prototype.no=function(t){var e=this;return this.Ur(t).next((function(n){if(!n)return Na.resolve();var r=IDBKeyRange.lowerBound(Yc.prefixForUser(e.userId)),i=[];return Rc(t).ns({range:r},(function(t,n,r){if(t[0]===e.userId){var o=bc(t[1]);i.push(o)}else r.done()})).next((function(){Wi(0===i.length)}))}))},t.prototype.so=function(t,e){return Pc(t,this.userId,e)},t.prototype.io=function(t){var e=this;return Vc(t).get(this.userId).next((function(t){return t||new Qc(e.userId,-1,"")}))},t}();function Pc(t,e,n){var r=Yc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Rc(t).ns({range:o,es:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Cc(t,e,n){var r=t.store(Wc.store),i=t.store(Yc.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ns({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Wi(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Yc.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return Na.xn(o).next((function(){return c}))}function Lc(t){return _h.qn(t,Wc.store)}function Rc(t){return _h.qn(t,Yc.store)}function Vc(t){return _h.qn(t,Qc.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Mc=function(){function t(t,e){this.serializer=t,this.Fi=e}return t.prototype.Ri=function(t,e,n){return Fc(t).put(qc(e),n)},t.prototype.Vi=function(t,e){var n=Fc(t),r=qc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.ro(t,r)}))},t.prototype.yi=function(t,e){var n=this;return Fc(t).get(qc(e)).next((function(t){return n.oo(t)}))},t.prototype.ao=function(t,e){var n=this;return Fc(t).get(qc(e)).next((function(t){var e=n.oo(t);return e?{gi:e,size:Bc(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=jo();return this.co(t,e,(function(t,e){var i=n.oo(e);r=r.rt(t,i)})).next((function(){return r}))},t.prototype.uo=function(t,e){var n=this,r=jo(),i=new Do(vo.V);return this.co(t,e,(function(t,e){var o=n.oo(e);o?(r=r.rt(t,o),i=i.rt(t,Bc(e))):(r=r.rt(t,null),i=i.rt(t,0))})).next((function(){return{ho:r,lo:i}}))},t.prototype.co=function(t,e,n){if(e.T())return Na.resolve();var r=IDBKeyRange.bound(e.first().path.O(),e.last().path.O()),i=e.lt(),o=i.Et();return Fc(t).ns({range:r},(function(t,e,r){for(var s=vo.H(t);o&&vo.V(o,s)<0;)n(o,null),o=i.Et();o&&o.isEqual(s)&&(n(o,e),o=i.It()?i.Et():null),o?r.Jn(o.path.O()):r.done()})).next((function(){for(;o;)n(o,null),o=i.It()?i.Et():null}))},t.prototype.Ui=function(t,e,n){var r=this,i=Fo(),o=e.path.length+1,s={};if(n.isEqual(co.min())){var u=e.path.O();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.O(),c=Ic(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Zc.collectionReadTimeIndex}return Fc(t).ns(s,(function(t,n,s){if(t.length===o){var u=Ec(r.serializer,n);e.path.N(u.key.path)?u instanceof Fu&&oa(e,u)&&(i=i.rt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype._o=function(t){return new jc(this,!!t&&t.fo)},t.prototype.wo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Uc(t).get(th.key).next((function(t){return Wi(!!t),t}))},t.prototype.ro=function(t,e){return Uc(t).put(th.key,e)},t.prototype.oo=function(t){if(t){var e=Ec(this.serializer,t);return e instanceof qu&&e.version.isEqual(co.min())?null:e}return null},t}(),jc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).To=e,r.fo=n,r.Eo=new oo((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return B(e,t),e.prototype.bi=function(t){var e=this,n=[],r=0,i=new Lo((function(t,e){return Zi(t.M(),e.M())}));return this.Ii.forEach((function(o,s){var u=e.Eo.get(o);if(s.gi){var a=_c(e.To.serializer,s.gi,e.Ai(o));i=i.add(o.path.S());var c=Bc(a);r+=c-u,n.push(e.To.Ri(t,o,a))}else if(r-=u,e.fo){var h=_c(e.To.serializer,new qu(o,co.min()),e.Ai(o));n.push(e.To.Ri(t,o,h))}else n.push(e.To.Vi(t,o))})),i.forEach((function(r){n.push(e.To.Fi.Kr(t,r))})),n.push(this.To.updateMetadata(t,r)),Na.xn(n)},e.prototype.pi=function(t,e){var n=this;return this.To.ao(t,e).next((function(t){return null===t?(n.Eo.set(e,0),null):(n.Eo.set(e,t.size),t.gi)}))},e.prototype.vi=function(t,e){var n=this;return this.To.uo(t,e).next((function(t){var e=t.ho;return t.lo.forEach((function(t,e){n.Eo.set(t,e)})),e}))},e}(nc);function Uc(t){return _h.qn(t,th.store)}function Fc(t){return _h.qn(t,Zc.store)}function qc(t){return t.path.O()}function Bc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Qi();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Gc=function(){function t(){this.Io=new zc}return t.prototype.Kr=function(t,e){return this.Io.add(e),Na.resolve()},t.prototype.ji=function(t,e){return Na.resolve(this.Io.getEntries(e))},t}(),zc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.C(),n=t.S(),r=this.index[e]||new Lo(fo.V),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.C(),n=t.S(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Lo(fo.V)).O()},t}(),Kc=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Wi(n<r&&n>=0&&r<=11);var o=new ka("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Hc.store)}(t),function(t){t.createObjectStore(Qc.store,{keyPath:Qc.keyPath}),t.createObjectStore(Wc.store,{keyPath:Wc.keyPath,autoIncrement:!0}).createIndex(Wc.userMutationsIndex,Wc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Yc.store)}(t),oh(t),function(t){t.createObjectStore(Zc.store)}(t));var s=Na.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(nh.store),t.deleteObjectStore(eh.store),t.deleteObjectStore(rh.store)}(t),oh(t)),s=s.next((function(){return function(t){var e=t.store(rh.store),n=new rh(0,0,co.min().P(),0);return e.put(rh.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Wc.store).Xn().next((function(n){t.deleteObjectStore(Wc.store),t.createObjectStore(Wc.store,{keyPath:Wc.keyPath,autoIncrement:!0}).createIndex(Wc.userMutationsIndex,Wc.userMutationsKeyPath,{unique:!0});var r=e.store(Wc.store),i=n.map((function(t){return r.put(t)}));return Na.xn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(sh.store,{keyPath:sh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(th.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Zc.store);e.createIndex(Zc.readTimeIndex,Zc.readTimeIndexPath,{unique:!1}),e.createIndex(Zc.collectionReadTimeIndex,Zc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(uh.store,{keyPath:uh.keyPath})}(t),function(t){t.createObjectStore(ah.store,{keyPath:ah.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Zc.store).ns((function(t,n){e+=Bc(n)})).next((function(){var n=new th(e);return t.store(th.store).put(th.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Qc.store),r=t.store(Wc.store);return n.Xn().next((function(n){return Na.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Xn(Wc.userMutationsIndex,i).next((function(r){return Na.forEach(r,(function(r){Wi(r.userId===n.userId);var i=Ac(e.serializer,r);return Cc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(nh.store),n=t.store(Zc.store);return t.store(rh.store).get(rh.key).next((function(t){var r=[];return n.ns((function(n,i){var o=new fo(n),s=function(t){return[0,yc(t)]}(o);r.push(e.get(s).next((function(n){return n?Na.resolve():function(n){return e.put(new nh(0,yc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Na.xn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ih.store,{keyPath:ih.keyPath});var n=e.store(ih.store),r=new zc,i=function(t){if(r.add(t)){var e=t.C(),i=t.S();return n.put({collectionId:e,parent:yc(i)})}};return e.store(Zc.store).ns({es:!0},(function(t,e){var n=new fo(t);return i(n.S())})).next((function(){return e.store(Yc.store).ns({es:!0},(function(t,e){t[0];var n=t[1],r=(t[2],bc(n));return i(r.S())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(eh.store);return n.ns((function(t,r){var i=Sc(r),o=Oc(e.serializer,i);return n.put(o)}))},t}(),$c=function(t,e){this.seconds=t,this.nanoseconds=e},Hc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Hc.store="owner",Hc.key="owner";var Qc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Qc.store="mutationQueues",Qc.keyPath="userId";var Wc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Wc.store="mutations",Wc.keyPath="batchId",Wc.userMutationsIndex="userMutationsIndex",Wc.userMutationsKeyPath=["userId","batchId"];var Yc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yc(e)]},t.key=function(t,e,n){return[t,yc(e),n]},t}();Yc.store="documentMutations",Yc.PLACEHOLDER=new Yc;var Xc=function(t,e){this.path=t,this.readTime=e},Jc=function(t,e){this.path=t,this.version=e},Zc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Zc.store="remoteDocuments",Zc.readTimeIndex="readTimeIndex",Zc.readTimeIndexPath="readTime",Zc.collectionReadTimeIndex="collectionReadTimeIndex",Zc.collectionReadTimeIndexPath=["parentPath","readTime"];var th=function(t){this.byteSize=t};th.store="remoteDocumentGlobal",th.key="remoteDocumentGlobalKey";var eh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};eh.store="targets",eh.keyPath="targetId",eh.queryTargetsIndexName="queryTargetsIndex",eh.queryTargetsKeyPath=["canonicalId","targetId"];var nh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};nh.store="targetDocuments",nh.keyPath=["targetId","path"],nh.documentTargetsIndex="documentTargetsIndex",nh.documentTargetsKeyPath=["path","targetId"];var rh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};rh.key="targetGlobalKey",rh.store="targetGlobal";var ih=function(t,e){this.collectionId=t,this.parent=e};function oh(t){t.createObjectStore(nh.store,{keyPath:nh.keyPath}).createIndex(nh.documentTargetsIndex,nh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(eh.store,{keyPath:eh.keyPath}).createIndex(eh.queryTargetsIndexName,eh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(rh.store)}ih.store="collectionParents",ih.keyPath=["collectionId","parent"];var sh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};sh.store="clientMetadata",sh.keyPath="clientId";var uh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};uh.store="bundles",uh.keyPath="bundleId";var ah=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ah.store="namedQueries",ah.keyPath="name";var ch=W(W(W(W([Qc.store,Wc.store,Yc.store,Zc.store,eh.store,Hc.store,rh.store,nh.store],[sh.store]),[th.store]),[ih.store]),[uh.store,ah.store]),hh=function(){function t(t){this.serializer=t}return t.prototype.mo=function(t,e){return fh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:xc(e.createTime),version:e.version};var e}))},t.prototype.Ao=function(t,e){return fh(t).put({bundleId:(n=e).id,createTime:Nc(Cs(n.createTime)),version:n.version});var n},t.prototype.Ro=function(t,e){return lh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:kc(e.bundledQuery),readTime:xc(e.readTime)};var e}))},t.prototype.Po=function(t,e){return lh(t).put(function(t){return{name:t.name,readTime:Nc(Cs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fh(t){return _h.qn(t,uh.store)}function lh(t){return _h.qn(t,ah.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ph=function(){function t(){this.Vo=new zc}return t.prototype.Kr=function(t,e){var n=this;if(!this.Vo.has(e)){var r=e.C(),i=e.S();t.Di((function(){n.Vo.add(e)}));var o={collectionId:r,parent:yc(i)};return dh(t).put(o)}return Na.resolve()},t.prototype.ji=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[eo(e),""],!1,!0);return dh(t).Xn(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bc(o.parent))}return n}))},t}();function dh(t){return _h.qn(t,ih.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vh=function(){function t(t){this.yo=t}return t.prototype.next=function(){return this.yo+=2,this.yo},t.po=function(){return new t(0)},t.vo=function(){return new t(-1)},t}(),yh=function(){function t(t,e){this.Lr=t,this.serializer=e}return t.prototype.bo=function(t){var e=this;return this.So(t).next((function(n){var r=new vh(n.highestTargetId);return n.highestTargetId=r.next(),e.Do(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Co=function(t){return this.So(t).next((function(t){return co.m(new ao(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.No=function(t){return this.So(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.xo=function(t,e,n){var r=this;return this.So(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.P()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Do(t,i)}))},t.prototype.Fo=function(t,e){var n=this;return this.Oo(t,e).next((function(){return n.So(t).next((function(r){return r.targetCount+=1,n.Mo(e,r),n.Do(t,r)}))}))},t.prototype.ko=function(t,e){return this.Oo(t,e)},t.prototype.$o=function(t,e){var n=this;return this.Lo(t,e.targetId).next((function(){return gh(t).delete(e.targetId)})).next((function(){return n.So(t)})).next((function(e){return Wi(e.targetCount>0),e.targetCount-=1,n.Do(t,e)}))},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return gh(t).ns((function(s,u){var a=Sc(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.$o(t,a)))})).next((function(){return Na.xn(o)})).next((function(){return i}))},t.prototype.De=function(t,e){return gh(t).ns((function(t,n){var r=Sc(n);e(r)}))},t.prototype.So=function(t){return mh(t).get(rh.key).next((function(t){return Wi(null!==t),t}))},t.prototype.Do=function(t,e){return mh(t).put(rh.key,e)},t.prototype.Oo=function(t,e){return gh(t).put(Oc(this.serializer,e))},t.prototype.Mo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Bo=function(t){return this.So(t).next((function(t){return t.targetCount}))},t.prototype.qo=function(t,e){var n=Eo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return gh(t).ns({range:r,index:eh.queryTargetsIndexName},(function(t,n,r){var o=Sc(n);_o(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Uo=function(t,e,n){var r=this,i=[],o=bh(t);return e.forEach((function(e){var s=yc(e.path);i.push(o.put(new nh(n,s))),i.push(r.Lr.Qo(t,n,e))})),Na.xn(i)},t.prototype.Ko=function(t,e,n){var r=this,i=bh(t);return Na.forEach(e,(function(e){var o=yc(e.path);return Na.xn([i.delete([n,o]),r.Lr.Wo(t,n,e)])}))},t.prototype.Lo=function(t,e){var n=bh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.jo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=bh(t),i=Go();return r.ns({range:n,es:!0},(function(t,e,n){var r=bc(t[1]),o=new vo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.so=function(t,e){var n=yc(e.path),r=IDBKeyRange.bound([n],[eo(n)],!1,!0),i=0;return bh(t).ns({index:nh.documentTargetsIndex,es:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.qe=function(t,e){return gh(t).get(e).next((function(t){return t?Sc(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gh(t){return _h.qn(t,eh.store)}function mh(t){return _h.qn(t,rh.store)}function bh(t){return _h.qn(t,nh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Eh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Xr=e,r.Go=n,r}return B(e,t),e}(sc),_h=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ln=o,this.window=s,this.document=u,this.zo=c,this.Ho=h,this.Jo=null,this.Yo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Xo=null,this.inForeground=!1,this.Zo=null,this.ta=null,this.ea=Number.NEGATIVE_INFINITY,this.na=function(t){return Promise.resolve()},!t.kn())throw new uo(so.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Lr=new Nh(this,i),this.sa=n+"main",this.serializer=new wc(a),this.ia=new xa(this.sa,11,new Kc(this.serializer)),this.ra=new yh(this.Lr,this.serializer),this.Fi=new ph,this.Ni=function(t,e){return new Mc(t,e)}(this.serializer,this.Fi),this.oa=new hh(this.serializer),this.window&&this.window.localStorage?this.aa=this.window.localStorage:(this.aa=null,!1===h&&Ki("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.qn=function(t,e){if(t instanceof Eh)return xa.qn(t.Xr,e);throw Qi()},t.prototype.start=function(){var t=this;return this.ca().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new uo(so.FAILED_PRECONDITION,wh);return t.ua(),t.ha(),t.la(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ra.No(e)}))})).then((function(e){t.Jo=new cc(e,t.zo)})).then((function(){t.Yo=!0})).catch((function(e){return t.ia&&t.ia.close(),Promise.reject(e)}))},t.prototype._a=function(t){var e=this;return this.na=function(n){return z(e,void 0,void 0,(function(){return K(this,(function(e){return this.yr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.fa=function(t){var e=this;this.ia.Kn((function(n){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.da=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ln.fs((function(){return z(e,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.yr?[4,this.ca()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.ca=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Th(e).put(new sh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.wa(e).next((function(e){e||(t.isPrimary=!1,t.ln.Ss((function(){return t.na(!1)})))}))})).next((function(){return t.Ta(e)})).next((function(n){return t.isPrimary&&!n?t.Ea(e).next((function(){return!1})):!!n&&t.Ia(e).next((function(){return!0}))}))})).catch((function(e){if(Oa(e))return zi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return zi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ln.Ss((function(){return t.na(e)})),t.isPrimary=e}))},t.prototype.wa=function(t){var e=this;return Ih(t).get(Hc.key).next((function(t){return Na.resolve(e.ma(t))}))},t.prototype.Aa=function(t){return Th(t).delete(this.clientId)},t.prototype.Ra=function(){return z(this,void 0,void 0,(function(){var e,n,r,i,o=this;return K(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Pa(this.ea,18e5)?[3,2]:(this.ea=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.qn(e,sh.store);return n.Xn().next((function(t){var e=o.ga(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Na.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.aa)for(n=0,r=e;n<r.length;n++)i=r[n],this.aa.removeItem(this.Va(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.la=function(){var t=this;this.ta=this.ln.Pn("client_metadata_refresh",4e3,(function(){return t.ca().then((function(){return t.Ra()})).then((function(){return t.la()}))}))},t.prototype.ma=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ta=function(t){var e=this;return this.Ho?Na.resolve(!0):Ih(t).get(Hc.key).next((function(n){if(null!==n&&e.Pa(n.leaseTimestampMs,5e3)&&!e.ya(n.ownerId)){if(e.ma(n)&&e.networkEnabled)return!0;if(!e.ma(n)){if(!n.allowTabSynchronization)throw new uo(so.FAILED_PRECONDITION,wh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Th(t).Xn().next((function(t){return void 0===e.ga(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&zi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.pa=function(){return z(this,void 0,void 0,(function(){var t=this;return K(this,(function(e){switch(e.label){case 0:return this.Yo=!1,this.va(),this.ta&&(this.ta.cancel(),this.ta=null),this.ba(),this.Sa(),[4,this.ia.runTransaction("shutdown","readwrite",[Hc.store,sh.store],(function(e){var n=new Eh(e,cc.nr);return t.Ea(n).next((function(){return t.Aa(n)}))}))];case 1:return e.sent(),this.ia.close(),this.Da(),[2]}}))}))},t.prototype.ga=function(t,e){var n=this;return t.filter((function(t){return n.Pa(t.updateTimeMs,e)&&!n.ya(t.clientId)}))},t.prototype.Ca=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Th(e).Xn().next((function(e){return t.ga(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.Na=function(t){return Dc.qr(t,this.serializer,this.Fi,this.Lr)},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Oa=function(){return this.Fi},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;zi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.ia.runTransaction(t,o,ch,(function(o){return i=new Eh(o,r.Jo?r.Jo.next():cc.nr),"readwrite-primary"===e?r.wa(i).next((function(t){return!!t||r.Ta(i)})).next((function(e){if(!e)throw Ki("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.ln.Ss((function(){return r.na(!1)})),new uo(so.FAILED_PRECONDITION,oc);return n(i)})).next((function(t){return r.Ia(i).next((function(){return t}))})):r.ka(i).next((function(){return n(i)}))})).then((function(t){return i.Ci(),t}))},t.prototype.ka=function(t){var e=this;return Ih(t).get(Hc.key).next((function(t){if(null!==t&&e.Pa(t.leaseTimestampMs,5e3)&&!e.ya(t.ownerId)&&!e.ma(t)&&!(e.Ho||e.allowTabSynchronization&&t.allowTabSynchronization))throw new uo(so.FAILED_PRECONDITION,wh)}))},t.prototype.Ia=function(t){var e=new Hc(this.clientId,this.allowTabSynchronization,Date.now());return Ih(t).put(Hc.key,e)},t.kn=function(){return xa.kn()},t.prototype.Ea=function(t){var e=this,n=Ih(t);return n.get(Hc.key).next((function(t){return e.ma(t)?(zi("IndexedDbPersistence","Releasing primary lease."),n.delete(Hc.key)):Na.resolve()}))},t.prototype.Pa=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ki("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ua=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Zo=function(){t.ln.fs((function(){return t.inForeground="visible"===t.document.visibilityState,t.ca()}))},this.document.addEventListener("visibilitychange",this.Zo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ba=function(){this.Zo&&(this.document.removeEventListener("visibilitychange",this.Zo),this.Zo=null)},t.prototype.ha=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Xo=function(){e.va(),e.ln.fs((function(){return e.pa()}))},this.window.addEventListener("unload",this.Xo))},t.prototype.Sa=function(){this.Xo&&(this.window.removeEventListener("unload",this.Xo),this.Xo=null)},t.prototype.ya=function(t){var e;try{var n=null!==(null===(e=this.aa)||void 0===e?void 0:e.getItem(this.Va(t)));return zi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ki("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.va=function(){if(this.aa)try{this.aa.setItem(this.Va(this.clientId),String(Date.now()))}catch(t){Ki("Failed to set zombie client id.",t)}},t.prototype.Da=function(){if(this.aa)try{this.aa.removeItem(this.Va(this.clientId))}catch(t){}},t.prototype.Va=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ih(t){return _h.qn(t,Hc.store)}function Th(t){return _h.qn(t,sh.store)}var Nh=function(){function t(t,e){this.db=t,this.Rr=new vc(this,e)}return t.prototype.Sr=function(t){var e=this.$a(t);return this.db.xa().Bo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.$a=function(t){var e=0;return this.Cr(t,(function(t){e++})).next((function(){return e}))},t.prototype.De=function(t,e){return this.db.xa().De(t,e)},t.prototype.Cr=function(t,e){return this.La(t,(function(t,n){return e(n)}))},t.prototype.Qo=function(t,e,n){return xh(t,n)},t.prototype.Wo=function(t,e,n){return xh(t,n)},t.prototype.Nr=function(t,e,n){return this.db.xa().Nr(t,e,n)},t.prototype.eo=function(t,e){return xh(t,e)},t.prototype.Ba=function(t,e){return function(t,e){var n=!1;return Vc(t).ss((function(r){return Pc(t,r,e).next((function(t){return t&&(n=!0),Na.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Fr=function(t,e){var n=this,r=this.db.Fa()._o(),i=[],o=0;return this.La(t,(function(s,u){if(u<=e){var a=n.Ba(t,s).next((function(e){if(!e)return o++,r.yi(t,s).next((function(){return r.Vi(s),bh(t).delete([0,yc(s.path)])}))}));i.push(a)}})).next((function(){return Na.xn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.nt(t.Go);return this.db.xa().ko(t,n)},t.prototype.qa=function(t,e){return xh(t,e)},t.prototype.La=function(t,e){var n,r=bh(t),i=cc.nr;return r.ns({index:nh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==cc.nr&&e(new vo(bc(n)),i),i=u,n=s):i=cc.nr})).next((function(){i!==cc.nr&&e(new vo(bc(n)),i)}))},t.prototype.Mr=function(t){return this.db.Fa().wo(t)},t}();function xh(t,e){return bh(t).put(function(t,e){return new nh(0,yc(t.path),e)}(e,t.Go))}function Ah(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Sh=function(){function t(t,e,n,r){this.persistence=t,this.Ua=e,this.serializer=r,this.Qa=new Do(Zi),this.Ka=new oo((function(t){return Eo(t)}),_o),this.Wa=co.min(),this.xi=t.Na(n),this.ja=t.Fa(),this.ra=t.xa(),this.Ga=new uc(this.ja,this.xi,this.persistence.Oa()),this.oa=t.Ma(),this.Ua.za(this.Ga)}return t.prototype.pr=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Or(n,e.Qa)}))},t}();function Oh(t,e,n,r){return new Sh(t,e,n,r)}function kh(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(s){switch(s.label){case 0:return n=Yi(t),r=n.xi,i=n.Ga,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.xi.Hr(t).next((function(s){return o=s,r=n.persistence.Na(e),i=new uc(n.ja,r,n.persistence.Oa()),r.Hr(t)})).next((function(e){for(var n=[],r=[],s=Go(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Li(t,s).next((function(t){return{Ha:t,Ja:n,Ya:r}}))}))}))];case 1:return o=s.sent(),[2,(n.xi=r,n.Ga=i,n.Ua.za(n.Ga),o)]}}))}))}function Dh(t,e){var n=Yi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.ja._o({fo:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Na.resolve();return o.forEach((function(t){s=s.next((function(){return r.yi(e,t)})).next((function(e){var o=e,s=n.Ei.get(t);Wi(null!==s),(!o||o.version.A(s)<0)&&(o=i._i(t,o,n))&&r.Ri(o,n.Ti)}))})),s.next((function(){return t.xi.Yr(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}function Ph(t){var e=Yi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ra.Co(t)}))}function Ch(t,e){var n=Yi(t),r=e.et,i=n.Qa;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.ja._o({fo:!0});i=n.Qa;var s=[];e.Gt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.ra.Ko(t,e.ne,o).next((function(){return n.ra.Uo(t,e.te,o)})));var a=e.resumeToken;if(a.X()>0){var c=u.st(a,r).nt(t.Go);i=i.rt(o,c),function(t,e,n){return Wi(e.resumeToken.X()>0),0===t.resumeToken.X()||e.et.R()-t.et.R()>=3e8||n.te.size+n.ee.size+n.ne.size>0}(u,c,e)&&s.push(n.ra.ko(t,c))}}}));var u=Mo();if(e.Ht.forEach((function(r,i){e.Jt.has(r)&&s.push(n.persistence.Lr.qa(t,r))})),s.push(function(t,e,n,r,i){var o=Go();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=Mo();return n.forEach((function(n,o){var s=t.get(n),u=r;o instanceof qu&&o.version.isEqual(co.min())?(e.Vi(n,u),i=i.rt(n,o)):null==s||o.version.A(s.version)>0||0===o.version.A(s.version)&&s.hasPendingWrites?(e.Ri(o,u),i=i.rt(n,o)):zi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.Ht,r).next((function(t){u=t}))),!r.isEqual(co.min())){var a=n.ra.Co(t).next((function(e){return n.ra.xo(t,t.Go,r)}));s.push(a)}return Na.xn(s).next((function(){return o.apply(t)})).next((function(){return n.Ga.Bi(t,u)}))})).then((function(t){return n.Qa=i,t}))}function Lh(t,e){var n=Yi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.xi.Gr(t,e)}))}function Rh(t,e){var n=Yi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ra.qo(t,e).next((function(i){return i?(r=i,Na.resolve(r)):n.ra.bo(t).next((function(i){return r=new Ao(e,i,0,t.Go),n.ra.Fo(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Qa.get(t.targetId);return(null===r||t.et.A(r.et)>0)&&(n.Qa=n.Qa.rt(t.targetId,t),n.Ka.set(e,t.targetId)),t}))}function Vh(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(u){switch(u.label){case 0:r=Yi(t),i=r.Qa.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Lr.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Oa(s=u.sent()))throw s;return zi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Qa=r.Qa.remove(e),r.Ka.delete(i.target),[2]}}))}))}function Mh(t,e,n){var r=Yi(t),i=co.min(),o=Go();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Yi(t),i=r.Ka.get(n);return void 0!==i?Na.resolve(r.Qa.get(i)):r.ra.qo(e,n)}(r,t,Ju(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ra.jo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Ua.Ui(t,e,n?i:co.min(),n?o:Go())})).next((function(t){return{documents:t,Xa:o}}))}))}function jh(t,e){var n=Yi(t),r=Yi(n.ra),i=n.Qa.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.qe(t,e).next((function(t){return t?t.target:null}))}))}function Uh(t){var e=Yi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Yi(t),i=Mo(),o=Ic(n),s=Fc(e),u=IDBKeyRange.lowerBound(o,!0);return s.ns({index:Zc.readTimeIndex,range:u},(function(t,e){var n=Ec(r.serializer,e);i=i.rt(n.key,n),o=e.readTime})).next((function(){return{Za:i,readTime:Tc(o)}}))}(e.ja,t,e.Wa)})).then((function(t){var n=t.Za,r=t.readTime;return e.Wa=r,n}))}function Fh(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){return[2,(e=Yi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Fc(t),n=co.min();return e.ns({index:Zc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Tc(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Wa=t}))]}))}))}function qh(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){if(t.code!==so.FAILED_PRECONDITION||t.message!==oc)throw t;return zi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bh=function(){function t(t,e,n,r,i,o){this.ln=t,this.tc=n,this.ec=r,this.nc=i,this.listener=o,this.state=0,this.sc=0,this.ic=null,this.stream=null,this.Ps=new Ta(t,e)}return t.prototype.rc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.oc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ac()},t.prototype.stop=function(){return z(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.rc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.cc=function(){this.state=0,this.Ps.reset()},t.prototype.uc=function(){var t=this;this.oc()&&null===this.ic&&(this.ic=this.ln.Pn(this.tc,6e4,(function(){return t.hc()})))},t.prototype.lc=function(t){this._c(),this.stream.send(t)},t.prototype.hc=function(){return z(this,void 0,void 0,(function(){return K(this,(function(t){return this.oc()?[2,this.close(0)]:[2]}))}))},t.prototype._c=function(){this.ic&&(this.ic.cancel(),this.ic=null)},t.prototype.close=function(t,e){return z(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this._c(),this.Ps.cancel(),this.sc++,3!==t?this.Ps.reset():e&&e.code===so.RESOURCE_EXHAUSTED?(Ki(e.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.Ps.mn()):e&&e.code===so.UNAUTHENTICATED&&this.nc.ni(),null!==this.stream&&(this.fc(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.dc(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.fc=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.wc(this.sc),n=this.sc;this.nc.getToken().then((function(e){t.sc===n&&t.Tc(e)}),(function(n){e((function(){var e=new uo(so.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ec(e)}))}))},t.prototype.Tc=function(t){var e=this,n=this.wc(this.sc);this.stream=this.Ic(t),this.stream.mc((function(){n((function(){return e.state=2,e.listener.mc()}))})),this.stream.dc((function(t){n((function(){return e.Ec(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ac=function(){var t=this;this.state=4,this.Ps.An((function(){return z(t,void 0,void 0,(function(){return K(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Ec=function(t){return zi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.wc=function(t){var e=this;return function(n){e.ln.fs((function(){return e.sc===t?n():(zi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Gh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return B(e,t),e.prototype.Ic=function(t){return this.ec.Ac("Listen",t)},e.prototype.onMessage=function(t){this.Ps.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Qi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Ue?(Wi(void 0===e||"string"==typeof e),To.fromBase64String(e||"")):(Wi(void 0===e||e instanceof Uint8Array),To.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?so.UNKNOWN:ko(t.code);return new uo(e,t.message||"")}(s);n=new Zo(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var c=Ms(t,a.document.name),h=Cs(a.document.updateTime),f=new Vu({mapValue:{fields:a.document.fields}}),l=new Fu(c,h,f,{}),p=a.targetIds||[],d=a.removedTargetIds||[];n=new Xo(p,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var y=Ms(t,v.document),g=v.readTime?Cs(v.readTime):co.min(),m=new qu(y,g),b=v.removedTargetIds||[];n=new Xo([],b,m.key,m)}else if("documentRemove"in e){e.documentRemove;var w=e.documentRemove;w.document;var E=Ms(t,w.document),_=w.removedTargetIds||[];n=new Xo([],_,E,null)}else{if(!("filter"in e))return Qi();e.filter;var I=e.filter;I.targetId;var T=I.count||0,N=new So(T),x=I.targetId;n=new Jo(x,N)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return co.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?co.min():e.readTime?Cs(e.readTime):co.min()}(t);return this.listener.Rc(e,n)},e.prototype.Pc=function(t){var e={};e.database=Fs(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Io(r)?{documents:Ks(t,r)}:{query:$s(t,r)}).targetId=e.targetId,e.resumeToken.X()>0?n.resumeToken=Ds(t,e.resumeToken):e.et.A(co.min())>0&&(n.readTime=ks(t,e.et.P())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qi()}}(0,e.tt);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.lc(e)},e.prototype.gc=function(t){var e={};e.database=Fs(this.serializer),e.removeTarget=t,this.lc(e)},e}(Bh),zh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Vc=!1,s}return B(e,t),Object.defineProperty(e.prototype,"yc",{get:function(){return this.Vc},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Vc=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.fc=function(){this.Vc&&this.vc([])},e.prototype.Ic=function(t){return this.ec.Ac("Write",t)},e.prototype.onMessage=function(t){if(Wi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vc){this.Ps.reset();var e=function(t,e){return t&&t.length>0?(Wi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Cs(t.updateTime):Cs(e);n.isEqual(co.min())&&(n=Cs(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new bu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Cs(t.commitTime);return this.listener.bc(n,e)}return Wi(!t.writeResults||0===t.writeResults.length),this.Vc=!0,this.listener.Sc()},e.prototype.Dc=function(){var t={};t.database=Fs(this.serializer),this.lc(t)},e.prototype.vc=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Gs(e.serializer,t)}))};this.lc(n)},e}(Bh),Kh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.ec=n,i.serializer=r,i.Cc=!1,i}return B(e,t),e.prototype.Nc=function(){if(this.Cc)throw new uo(so.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.xc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.xc(t,e,n,i)})).catch((function(t){throw t.code===so.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.Fc=function(t,e,n){var r=this;return this.Nc(),this.credentials.getToken().then((function(i){return r.ec.Fc(t,e,n,i)})).catch((function(t){throw t.code===so.UNAUTHENTICATED&&r.credentials.ni(),t}))},e.prototype.terminate=function(){this.Cc=!1},e}((function(){})),$h=function(){function t(t,e){this.rs=t,this.Oc=e,this.state="Unknown",this.Mc=0,this.kc=null,this.$c=!0}return t.prototype.Lc=function(){var t=this;0===this.Mc&&(this.Bc("Unknown"),this.kc=this.rs.Pn("online_state_timeout",1e4,(function(){return t.kc=null,t.qc("Backend didn't respond within 10 seconds."),t.Bc("Offline"),Promise.resolve()})))},t.prototype.Uc=function(t){"Online"===this.state?this.Bc("Unknown"):(this.Mc++,this.Mc>=1&&(this.Qc(),this.qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Bc("Offline")))},t.prototype.set=function(t){this.Qc(),this.Mc=0,"Online"===t&&(this.$c=!1),this.Bc(t)},t.prototype.Bc=function(t){t!==this.state&&(this.state=t,this.Oc(t))},t.prototype.qc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.$c?(Ki(e),this.$c=!1):zi("OnlineStateTracker",e)},t.prototype.Qc=function(){null!==this.kc&&(this.kc.cancel(),this.kc=null)},t}(),Hh=function(t,e,n,r,i){var o=this;this.Kc=t,this.Wc=e,this.rs=n,this.jc={},this.Gc=[],this.zc=new Map,this.Hc=new Set,this.Jc=[],this.Yc=i,this.Yc.Xc((function(t){n.fs((function(){return z(o,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return nf(this)?(zi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return(e=Yi(t)).Hc.add(4),[4,Wh(e)];case 1:return n.sent(),e.Zc.set("Unknown"),e.Hc.delete(4),[4,Qh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Zc=new $h(n,r)};function Qh(t){return z(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:if(!nf(t))return[3,4];e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wh(t){return z(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:e=0,n=t.Jc,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Yh(t,e){var n=Yi(t);n.zc.has(e.targetId)||(n.zc.set(e.targetId,e),ef(n)?tf(n):mf(n).oc()&&Jh(n,e))}function Xh(t,e){var n=Yi(t),r=mf(n);n.zc.delete(e),r.oc()&&Zh(n,e),0===n.zc.size&&(r.oc()?r.uc():nf(n)&&n.Zc.set("Unknown"))}function Jh(t,e){t.tu.Ie(e.targetId),mf(t).Pc(e)}function Zh(t,e){t.tu.Ie(e),mf(t).gc(e)}function tf(t){t.tu=new es({Be:function(e){return t.jc.Be(e)},qe:function(e){return t.zc.get(e)||null}}),mf(t).start(),t.Zc.Lc()}function ef(t){return nf(t)&&!mf(t).rc()&&t.zc.size>0}function nf(t){return 0===Yi(t).Hc.size}function rf(t){t.tu=void 0}function of(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){return t.zc.forEach((function(e,n){Jh(t,e)})),[2]}))}))}function sf(t,e){return z(this,void 0,void 0,(function(){return K(this,(function(n){return rf(t),ef(t)?(t.Zc.Uc(e),tf(t)):t.Zc.set("Unknown"),[2]}))}))}function uf(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o;return K(this,(function(s){switch(s.label){case 0:if(t.Zc.set("Online"),!(e instanceof Zo&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o;return K(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.zc.has(o)?[4,t.jc.eu(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.zc.delete(o),t.tu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),zi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,af(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xo?t.tu.pe(e):e instanceof Jo?t.tu.Fe(e):t.tu.Se(e),n.isEqual(co.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ph(t.Kc)];case 8:return i=s.sent(),n.A(i)>=0?[4,function(t,e){var n=t.tu.ke(e);return n.Gt.forEach((function(n,r){if(n.resumeToken.X()>0){var i=t.zc.get(r);i&&t.zc.set(r,i.st(n.resumeToken,e))}})),n.zt.forEach((function(e){var n=t.zc.get(e);if(n){t.zc.set(e,n.st(To.Z,n.et)),Zh(t,e);var r=new Ao(n.target,e,1,n.sequenceNumber);Jh(t,r)}})),t.jc.nu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return zi("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,af(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function af(t,e,n){return z(this,void 0,void 0,(function(){var r=this;return K(this,(function(i){switch(i.label){case 0:if(!Oa(e))throw e;return t.Hc.add(1),[4,Wh(t)];case 1:return i.sent(),t.Zc.set("Offline"),n||(n=function(){return Ph(t.Kc)}),t.rs.Ss((function(){return z(r,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return zi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Hc.delete(1),[4,Qh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function cf(t,e){return e().catch((function(n){return af(t,n,e)}))}function hf(t){return z(this,void 0,void 0,(function(){var e,n,r,i,o;return K(this,(function(s){switch(s.label){case 0:e=Yi(t),n=bf(e),r=e.Gc.length>0?e.Gc[e.Gc.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return nf(t)&&t.Gc.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Lh(e.Kc,r)];case 3:return null===(i=s.sent())?(0===e.Gc.length&&n.uc(),[3,7]):(r=i.batchId,function(t,e){t.Gc.push(e);var n=bf(t);n.oc()&&n.yc&&n.vc(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,af(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ff(e)&&lf(e),[2]}}))}))}function ff(t){return nf(t)&&!bf(t).rc()&&t.Gc.length>0}function lf(t){bf(t).start()}function pf(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){return bf(t).Dc(),[2]}))}))}function df(t){return z(this,void 0,void 0,(function(){var e,n,r,i;return K(this,(function(o){for(e=bf(t),n=0,r=t.Gc;n<r.length;n++)i=r[n],e.vc(i.mutations);return[2]}))}))}function vf(t,e,n){return z(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:return r=t.Gc.shift(),i=ec.from(r,e,n),[4,cf(t,(function(){return t.jc.su(i)}))];case 1:return o.sent(),[4,hf(t)];case 2:return o.sent(),[2]}}))}))}function yf(t,e){return z(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return e&&bf(t).yc?[4,function(t,e){return z(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return Oo(r=e.code)&&r!==so.ABORTED?(n=t.Gc.shift(),bf(t).cc(),[4,cf(t,(function(){return t.jc.iu(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,hf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ff(t)&&lf(t),[2]}}))}))}function gf(t,e){return z(this,void 0,void 0,(function(){var n;return K(this,(function(r){switch(r.label){case 0:return n=Yi(t),e?(n.Hc.delete(2),[4,Qh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Hc.add(2),[4,Wh(n)]);case 3:r.sent(),n.Zc.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function mf(t){var e=this;return t.ru||(t.ru=function(t,e,n){var r=Yi(t);return r.Nc(),new Gh(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:of.bind(null,t),dc:sf.bind(null,t),Rc:uf.bind(null,t)}),t.Jc.push((function(n){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return n?(t.ru.cc(),ef(t)?tf(t):t.Zc.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ru.stop()];case 2:e.sent(),rf(t),e.label=3;case 3:return[2]}}))}))}))),t.ru}function bf(t){var e=this;return t.ou||(t.ou=function(t,e,n){var r=Yi(t);return r.Nc(),new zh(e,r.ec,r.credentials,r.serializer,n)}(t.Wc,t.rs,{mc:pf.bind(null,t),dc:yf.bind(null,t),Sc:df.bind(null,t),bc:vf.bind(null,t)}),t.Jc.push((function(n){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return n?(t.ou.cc(),[4,hf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ou.stop()];case 3:e.sent(),t.Gc.length>0&&(zi("RemoteStore","Stopping write stream with "+t.Gc.length+" pending writes"),t.Gc=[]),e.label=4;case 4:return[2]}}))}))}))),t.ou
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var wf=function(){function t(){this.au=new Lo(Ef.cu),this.uu=new Lo(Ef.hu)}return t.prototype.T=function(){return this.au.T()},t.prototype.Qo=function(t,e){var n=new Ef(t,e);this.au=this.au.add(n),this.uu=this.uu.add(n)},t.prototype.lu=function(t,e){var n=this;t.forEach((function(t){return n.Qo(t,e)}))},t.prototype.Wo=function(t,e){this._u(new Ef(t,e))},t.prototype.fu=function(t,e){var n=this;t.forEach((function(t){return n.Wo(t,e)}))},t.prototype.du=function(t){var e=this,n=new vo(new fo([])),r=new Ef(n,t),i=new Ef(n,t+1),o=[];return this.uu.Nt([r,i],(function(t){e._u(t),o.push(t.key)})),o},t.prototype.wu=function(){var t=this;this.au.forEach((function(e){return t._u(e)}))},t.prototype._u=function(t){this.au=this.au.delete(t),this.uu=this.uu.delete(t)},t.prototype.Tu=function(t){var e=new vo(new fo([])),n=new Ef(e,t),r=new Ef(e,t+1),i=Go();return this.uu.Nt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.so=function(t){var e=new Ef(t,0),n=this.au.Ft(e);return null!==n&&t.isEqual(n.key)},t}(),Ef=function(){function t(t,e){this.key=t,this.Eu=e}return t.cu=function(t,e){return vo.V(t.key,e.key)||Zi(t.Eu,e.Eu)},t.hu=function(t,e){return Zi(t.Eu,e.Eu)||vo.V(t.key,e.key)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _f(t,e){return"firestore_clients_"+t+"_"+e}function If(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Js()&&(r+="_"+e.uid),r}function Tf(t,e){return"firestore_targets_"+t+"_"+e}var Nf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Iu=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new uo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Ki("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Iu=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new uo(r.error.code,r.error.message)),i?new t(e,r.state,o):(Ki("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.mu=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Af=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Iu=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ko(),s=0;i&&s<r.activeTargetIds.length;++s)i=mo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ki("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Sf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Iu=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ki("SharedClientState","Failed to parse online state: "+e),null)},t}(),Of=function(){function t(){this.activeTargetIds=Ko()}return t.prototype.Au=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ru=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.mu=function(){var t={activeTargetIds:this.activeTargetIds.O(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),kf=function(){function t(t,e,n,r,i){this.window=t,this.ln=e,this.persistenceKey=n,this.Pu=r,this.gu=null,this.Oc=null,this.Xi=null,this.Vu=this.yu.bind(this),this.pu=new Do(Zi),this.yr=!1,this.vu=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bu=_f(this.persistenceKey,this.Pu),this.Su=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pu=this.pu.rt(this.Pu,new Of),this.Du=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Cu=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Nu=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xu=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fu=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Vu)}return t.kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return z(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,h,f=this;return K(this,(function(l){switch(l.label){case 0:return[4,this.gu.Ca()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pu&&(i=this.getItem(_f(this.persistenceKey,r)))&&(o=Af.Iu(r,i))&&(this.pu=this.pu.rt(o.clientId,o));for(this.Ou(),(s=this.storage.getItem(this.xu))&&(u=this.Mu(s))&&this.ku(u),a=0,c=this.vu;a<c.length;a++)h=c[a],this.yu(h);return this.vu=[],this.window.addEventListener("unload",(function(){return f.pa()})),this.yr=!0,[2]}}))}))},t.prototype.er=function(t){this.setItem(this.Su,JSON.stringify(t))},t.prototype.$u=function(){return this.Lu(this.pu)},t.prototype.Bu=function(t){var e=!1;return this.pu.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qu=function(t){this.Uu(t,"pending")},t.prototype.Qu=function(t,e,n){this.Uu(t,e,n),this.Ku(t)},t.prototype.Wu=function(t){var e="not-current";if(this.Bu(t)){var n=this.storage.getItem(Tf(this.persistenceKey,t));if(n){var r=xf.Iu(t,n);r&&(e=r.state)}}return this.ju.Au(t),this.Ou(),e},t.prototype.Gu=function(t){this.ju.Ru(t),this.Ou()},t.prototype.zu=function(t){return this.ju.activeTargetIds.has(t)},t.prototype.Hu=function(t){this.removeItem(Tf(this.persistenceKey,t))},t.prototype.Ju=function(t,e,n){this.Yu(t,e,n)},t.prototype.Xu=function(t,e,n){var r=this;e.forEach((function(t){r.Ku(t)})),this.currentUser=t,n.forEach((function(t){r.qu(t)}))},t.prototype.Zu=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.pa=function(){this.yr&&(this.window.removeEventListener("storage",this.Vu),this.removeItem(this.bu),this.yr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return zi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){zi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){zi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.yu=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(zi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.bu)return void Ki("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ln.Ss((function(){return z(e,void 0,void 0,(function(){var t,e,r,i,o,s;return K(this,(function(u){if(this.yr){if(null!==n.key)if(this.Du.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Cu.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.ah(r)]}else if(this.Nu.test(n.key)){if(null!==n.newValue&&(i=this.uh(n.key,n.newValue)))return[2,this.hh(i)]}else if(n.key===this.xu){if(null!==n.newValue&&(o=this.Mu(n.newValue)))return[2,this.ku(o)]}else if(n.key===this.Su)(s=function(t){var e=cc.nr;if(null!=t)try{var n=JSON.parse(t);Wi("number"==typeof n),e=n}catch(t){Ki("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==cc.nr&&this.Xi(s);else if(n.key===this.Fu)return[2,this.gu.lh()]}else this.vu.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ju",{get:function(){return this.pu.get(this.Pu)},enumerable:!1,configurable:!0}),t.prototype.Ou=function(){this.setItem(this.bu,this.ju.mu())},t.prototype.Uu=function(t,e,n){var r=new Nf(this.currentUser,t,e,n),i=If(this.persistenceKey,this.currentUser,t);this.setItem(i,r.mu())},t.prototype.Ku=function(t){var e=If(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){var e={clientId:this.Pu,onlineState:t};this.storage.setItem(this.xu,JSON.stringify(e))},t.prototype.Yu=function(t,e,n){var r=Tf(this.persistenceKey,t),i=new xf(t,e,n);this.setItem(r,i.mu())},t.prototype.nh=function(){this.setItem(this.Fu,"value-not-used")},t.prototype.sh=function(t){var e=this.Du.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Af.Iu(n,e)},t.prototype.oh=function(t,e){var n=this.Cu.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Nf.Iu(new Qa(i),r,e)},t.prototype.uh=function(t,e){var n=this.Nu.exec(t),r=Number(n[1]);return xf.Iu(r,e)},t.prototype.Mu=function(t){return Sf.Iu(t)},t.prototype.ah=function(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.gu._h(t.batchId,t.state,t.error)]:(zi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.gu.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pu.rt(t,e):this.pu.remove(t),i=this.Lu(this.pu),o=this.Lu(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.gu.dh(s,u).then((function(){n.pu=r}))},t.prototype.ku=function(t){this.pu.get(t.clientId)&&this.Oc(t.onlineState)},t.prototype.Lu=function(t){var e=Ko();return t.forEach((function(t,n){e=e.Ot(n.activeTargetIds)})),e},t}(),Df=function(){function t(){this.wh=new Of,this.Th={},this.Oc=null,this.Xi=null}return t.prototype.qu=function(t){},t.prototype.Qu=function(t,e,n){},t.prototype.Wu=function(t){return this.wh.Au(t),this.Th[t]||"not-current"},t.prototype.Ju=function(t,e,n){this.Th[t]=e},t.prototype.Gu=function(t){this.wh.Ru(t)},t.prototype.zu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Hu=function(t){delete this.Th[t]},t.prototype.$u=function(){return this.wh.activeTargetIds},t.prototype.Bu=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new Of,Promise.resolve()},t.prototype.Xu=function(t,e,n){},t.prototype.Zu=function(t){},t.prototype.pa=function(){},t.prototype.er=function(t){},t.prototype.eh=function(){},t}(),Pf=function(t){this.key=t},Cf=function(t){this.key=t},Lf=function(){function t(t,e){this.query=t,this.Eh=e,this.Ih=null,this.Zt=!1,this.mh=Go(),this.Qt=Go(),this.Ah=sa(t),this.Rh=new $o(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Eh},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.Vh:new Ho,i=e?e.Rh:this.Rh,o=e?e.Qt:this.Qt,s=i,u=!1,a=$u(this.query)&&i.size===this.query.limit?i.last():null,c=Hu(this.query)&&i.size===this.query.limit?i.first():null;if(t.ut((function(t,e){var h=i.get(t),f=e instanceof Fu?e:null;f&&(f=oa(n.query,f)?f:null);var l=!!h&&n.Qt.has(h.key),p=!!f&&(f.Je||n.Qt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.yh(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.Ah(f,a)>0||c&&n.Ah(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),$u(this.query)||Hu(this.query))for(;s.size>this.query.limit;){var h=$u(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Rh:s,Vh:r,ph:u,Qt:o}},t.prototype.yh=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.bi=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.Qt=t.Qt;var o=t.Vh.qt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qi()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],u=0===this.mh.size&&this.Zt?1:0,a=u!==this.Ih;return this.Ih=u,0!==o.length||a?{snapshot:new Qo(this.query,t.Rh,i,o,t.Qt,0===u,a,!1),Dh:s}:{Dh:s}},t.prototype.Bs=function(t){return this.Zt&&"Offline"===t?(this.Zt=!1,this.bi({Rh:this.Rh,Vh:new Ho,Qt:this.Qt,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Eh.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).Je},t.prototype.bh=function(t){var e=this;t&&(t.te.forEach((function(t){return e.Eh=e.Eh.add(t)})),t.ee.forEach((function(t){})),t.ne.forEach((function(t){return e.Eh=e.Eh.delete(t)})),this.Zt=t.Zt)},t.prototype.Sh=function(){var t=this;if(!this.Zt)return[];var e=this.mh;this.mh=Go(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new Cf(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new Pf(t))})),n},t.prototype.Nh=function(t){this.Eh=t.Xa,this.mh=Go();var e=this.gh(t.documents);return this.bi(e,!0)},t.prototype.xh=function(){return Qo.jt(this.query,this.Rh,this.Qt,0===this.Ih)},t}(),Rf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vf=function(t){this.key=t,this.Fh=!1},Mf=function(){function t(t,e,n,r,i,o){this.Kc=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new oo((function(t){return ra(t)}),na),this.qh=new Map,this.Uh=[],this.Qh=new Do(vo.V),this.Kh=new Map,this.Wh=new wf,this.jh={},this.Gh=new Map,this.zh=vh.vo(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function jf(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u;return K(this,(function(a){switch(a.label){case 0:return n=pl(t),(o=n.Bh.get(e))?(r=o.targetId,n.kh.Wu(r),i=o.view.xh(),[3,4]):[3,1];case 1:return[4,Rh(n.Kc,Ju(e))];case 2:return s=a.sent(),u=n.kh.Wu(s.targetId),r=s.targetId,[4,Uf(n,e,r,"current"===u)];case 3:i=a.sent(),n.Jh&&Yh(n.Oh,s),a.label=4;case 4:return[2,i]}}))}))}function Uf(t,e,n,r){return z(this,void 0,void 0,(function(){var i,o,s,u,a,c;return K(this,(function(h){switch(h.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return z(this,void 0,void 0,(function(){var i,o,s;return K(this,(function(u){switch(u.label){case 0:return(i=e.view.gh(n)).ph?[4,Mh(t.Kc,e.query,!1).then((function(t){var n=t.documents;return e.view.gh(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Gt.get(e.targetId),s=e.view.bi(i,t.Jh,o),[2,(Jf(t,e.targetId,s.Dh),s.snapshot)]}}))}))}(t,e,n,r)},[4,Mh(t.Kc,e,!0)];case 1:return i=h.sent(),o=new Lf(e,i.Xa),s=o.gh(i.documents),u=Yo.Xt(n,r&&"Offline"!==t.onlineState),a=o.bi(s,t.Jh,u),Jf(t,n,a.Dh),c=new Rf(e,n,o),[2,(t.Bh.set(e,c),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),a.snapshot)]}}))}))}function Ff(t,e){return z(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return n=Yi(t),r=n.Bh.get(e),(i=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,i.filter((function(t){return!na(t,e)}))),void n.Bh.delete(e))]:n.Jh?(n.kh.Gu(r.targetId),n.kh.Bu(r.targetId)?[3,2]:[4,Vh(n.Kc,r.targetId,!1).then((function(){n.kh.Hu(r.targetId),Xh(n.Oh,r.targetId),Yf(n,r.targetId)})).catch(qh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Yf(n,r.targetId),[4,Vh(n.Kc,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function qf(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(u){switch(u.label){case 0:r=dl(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yi(t),i=ao.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Go());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ga.Li(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=Nu(c,n.get(c.key));null!=h&&s.push(new Ou(c.key,h,ju(h.proto.mapValue),wu.exists(!0)))}return r.xi.Qr(t,i,s,e)}))})).then((function(t){var e=t.wi(n);return{batchId:t.batchId,Ii:e}}))}(r.Kc,e)];case 2:return i=u.sent(),r.kh.qu(i.batchId),function(t,e,n){var r=t.jh[t.currentUser.Ys()];r||(r=new Do(Zi)),r=r.rt(e,n),t.jh[t.currentUser.Ys()]=r}(r,i.batchId,n),[4,el(r,i.Ii)];case 3:return u.sent(),[4,hf(r.Oh)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Ua(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Bf(t,e){return z(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:n=Yi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ch(n.Kc,e)];case 2:return r=i.sent(),e.Gt.forEach((function(t,e){var r=n.Kh.get(e);r&&(Wi(t.te.size+t.ee.size+t.ne.size<=1),t.te.size>0?r.Fh=!0:t.ee.size>0?Wi(r.Fh):t.ne.size>0&&(Wi(r.Fh),r.Fh=!1))})),[4,el(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,qh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Gf(t,e,n){var r=Yi(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Bs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Yi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Bs(e)&&(r=!0)})),r&&$a(n)}(r.Mh,e),i.length&&r.Lh.Rc(i),r.onlineState=e,r.Jh&&r.kh.Zu(e)}}function zf(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s,u,a;return K(this,(function(c){switch(c.label){case 0:return(r=Yi(t)).kh.Ju(e,"rejected",n),i=r.Kh.get(e),(o=i&&i.key)?(s=(s=new Do(vo.V)).rt(o,new qu(o,co.min())),u=Go().add(o),a=new Wo(co.min(),new Map,new Lo(Zi),s,u),[4,Bf(r,a)]):[3,2];case 1:return c.sent(),r.Qh=r.Qh.remove(o),r.Kh.delete(e),tl(r),[3,4];case 2:return[4,Vh(r.Kc,e,!1).then((function(){return Yf(r,e,n)})).catch(qh)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Kf(t,e){return z(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:n=Yi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Dh(n.Kc,e)];case 2:return i=o.sent(),Wf(n,r,null),Qf(n,r),n.kh.Qu(r,"acknowledged"),[4,el(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,qh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function $f(t,e,n){return z(this,void 0,void 0,(function(){var r,i;return K(this,(function(o){switch(o.label){case 0:r=Yi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Yi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.xi.Wr(t,e).next((function(e){return Wi(null!==e),r=e.keys(),n.xi.Yr(t,e)})).next((function(){return n.xi.no(t)})).next((function(){return n.Ga.Li(t,r)}))}))}(r.Kc,e)];case 2:return i=o.sent(),Wf(r,e,n),Qf(r,e),r.kh.Qu(e,"rejected",n),[4,el(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,qh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Hf(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s;return K(this,(function(u){switch(u.label){case 0:nf((n=Yi(t)).Oh)||zi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(t){var e=Yi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.xi.zr(t)}))}(n.Kc)];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Gh.get(r)||[]).push(e),n.Gh.set(r,i),[3,4]);case 3:return o=u.sent(),s=Ua(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Qf(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function Wf(t,e,n){var r=Yi(t),i=r.jh[r.currentUser.Ys()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.Ys()]=i}}function Yf(t,e,n){void 0===n&&(n=null),t.kh.Gu(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.du(e).forEach((function(e){t.Wh.so(e)||Xf(t,e)}))}function Xf(t,e){var n=t.Qh.get(e);null!==n&&(Xh(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),tl(t))}function Jf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Pf?(t.Wh.Qo(o.key,e),Zf(t,o)):o instanceof Cf?(zi("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.Wo(o.key,e),t.Wh.so(o.key)||Xf(t,o.key)):Qi()}}function Zf(t,e){var n=e.key;t.Qh.get(n)||(zi("SyncEngine","New document in limbo: "+n),t.Uh.push(n),tl(t))}function tl(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new Vf(e)),t.Qh=t.Qh.rt(e,n),Yh(t.Oh,new Ao(Ju(Ku(e.path)),n,2,cc.nr))}}function el(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s;return K(this,(function(u){switch(u.label){case 0:return r=Yi(t),i=[],o=[],s=[],r.Bh.T()?[3,3]:(r.Bh.forEach((function(t,u){s.push(r.Yh(u,e,n).then((function(t){if(t){r.Jh&&r.kh.Ju(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=ac.Yi(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.Lh.Rc(i),[4,function(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h;return K(this,(function(f){switch(f.label){case 0:n=Yi(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Na.forEach(e,(function(e){return Na.forEach(e.Hi,(function(r){return n.persistence.Lr.Qo(t,e.targetId,r)})).next((function(){return Na.forEach(e.Ji,(function(r){return n.persistence.Lr.Wo(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!Oa(r=f.sent()))throw r;return zi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.Qa.get(u),c=a.et,h=a.it(c),n.Qa=n.Qa.rt(u,h));return[2]}}))}))}(r.Kc,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function nl(t,e){return z(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return(n=Yi(t)).currentUser.isEqual(e)?[3,3]:(zi("SyncEngine","User change. New user:",e.Ys()),[4,kh(n.Kc,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new uo(so.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(n),n.kh.Xu(e,r.Ja,r.Ya),[4,el(n,r.Ha)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function rl(t,e){var n=Yi(t),r=n.Kh.get(e);if(r&&r.Fh)return Go().add(r.key);var i=Go(),o=n.qh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Bh.get(a);i=i.Ot(c.view.Ph)}return i}function il(t,e){return z(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return[4,Mh((n=Yi(t)).Kc,e.query,!0)];case 1:return r=o.sent(),i=e.view.Nh(r),[2,(n.Jh&&Jf(n,e.targetId,i.Dh),i)]}}))}))}function ol(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){return[2,Uh((e=Yi(t)).Kc).then((function(t){return el(e,t)}))]}))}))}function sl(t,e,n,r){return z(this,void 0,void 0,(function(){var i,o;return K(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Yi(t),r=Yi(n.xi);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jr(t,e).next((function(e){return e?n.Ga.Li(t,e):Na.resolve(null)}))}))}((i=Yi(t)).Kc,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,hf(i.Oh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Wf(i,e,r||null),Qf(i,e),function(t,e){Yi(Yi(t).xi).Zr(e)}(i.Kc,e)):Qi(),s.label=4;case 4:return[4,el(i,o)];case 5:return s.sent(),[3,7];case 6:zi("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function ul(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return K(this,(function(h){switch(h.label){case 0:return pl(n=Yi(t)),dl(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$u(),[4,al(n,r.O())]);case 1:return i=h.sent(),n.Hh=!0,[4,gf(n.Oh,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)u=s[o],Yh(n.Oh,u);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],c=Promise.resolve(),n.qh.forEach((function(t,e){n.kh.zu(e)?a.push(e):c=c.then((function(){return Yf(n,e),Vh(n.Kc,e,!0)})),Xh(n.Oh,e)})),[4,c]);case 4:return h.sent(),[4,al(n,a)];case 5:return h.sent(),function(t){var e=Yi(t);e.Kh.forEach((function(t,n){Xh(e.Oh,n)})),e.Wh.wu(),e.Kh=new Map,e.Qh=new Do(vo.V)}(n),n.Hh=!1,[4,gf(n.Oh,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function al(t,e,n){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,h,f,l,p,d,v;return K(this,(function(y){switch(y.label){case 0:n=Yi(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.qh.get(u))&&0!==c.length?[4,Rh(n.Kc,Ju(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),h=0,f=c,y.label=3;case 3:return h<f.length?(l=f[h],p=n.Bh.get(l),[4,il(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,jh(n.Kc,u)];case 8:return v=y.sent(),[4,Rh(n.Kc,v)];case 9:return a=y.sent(),[4,Uf(n,cl(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Lh.Rc(i),r)]}}))}))}function cl(t){return zu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hl(t){var e=Yi(t);return Yi(Yi(e.Kc).persistence).Ca()}function fl(t,e,n,r){return z(this,void 0,void 0,(function(){var i,o,s;return K(this,(function(u){switch(u.label){case 0:return(i=Yi(t)).Hh?(zi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Uh(i.Kc)];case 3:return o=u.sent(),s=Wo.Yt(e,"current"===n),[4,el(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Vh(i.Kc,e,!0)];case 6:return u.sent(),Yf(i,e,r),[3,8];case 7:Qi(),u.label=8;case 8:return[2]}}))}))}function ll(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l;return K(this,(function(p){switch(p.label){case 0:if(!(r=pl(t)).Hh)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.qh.has(s)?(zi("SyncEngine","Adding an already active target "+s),[3,5]):[4,jh(r.Kc,s)]):[3,6];case 2:return u=p.sent(),[4,Rh(r.Kc,u)];case 3:return a=p.sent(),[4,Uf(r,cl(u),a.targetId,!1)];case 4:p.sent(),Yh(r.Oh,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return K(this,(function(e){switch(e.label){case 0:return r.qh.has(t)?[4,Vh(r.Kc,t,!1).then((function(){Xh(r.Oh,t),Yf(r,t)})).catch(qh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,p.label=7;case 7:return h<f.length?(l=f[h],[5,c(l)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function pl(t){var e=Yi(t);return e.Oh.jc.nu=Bf.bind(null,e),e.Oh.jc.Be=rl.bind(null,e),e.Oh.jc.eu=zf.bind(null,e),e.Lh.Rc=za.bind(null,e.Mh),e.Lh.Xh=Ka.bind(null,e.Mh),e}function dl(t){var e=Yi(t);return e.Oh.jc.su=Kf.bind(null,e),e.Oh.jc.iu=$f.bind(null,e),e}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vl=function(){function t(){}return t.prototype.za=function(t){this.Zh=t},t.prototype.Ui=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.rn.length||1===t.rn.length&&t.rn[0].field.B())}(e)||n.isEqual(co.min())?this.tl(t,e):this.Zh.Li(t,r).next((function(o){var s=i.el(e,o);return($u(e)||Hu(e))&&i.ph(e.limitType,s,r,n)?i.tl(t,e):(Gi()<=dt.DEBUG&&zi("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ia(e)),i.Zh.Ui(t,e,n).next((function(t){return s.forEach((function(e){t=t.rt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new Lo(sa(t));return e.forEach((function(e,r){r instanceof Fu&&oa(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.A(r)>0)},t.prototype.tl=function(t,e){return Gi()<=dt.DEBUG&&zi("IndexFreeQueryEngine","Using full collection scan to execute query:",ia(e)),this.Zh.Ui(t,e,co.min())},t}(),yl=function(){function t(t,e){this.Fi=t,this.Lr=e,this.xi=[],this.nl=1,this.sl=new Lo(Ef.cu)}return t.prototype.Ur=function(t){return Na.resolve(0===this.xi.length)},t.prototype.Qr=function(t,e,n,r){var i=this.nl;this.nl++,this.xi.length>0&&this.xi[this.xi.length-1];var o=new tc(i,e,n,r);this.xi.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.sl=this.sl.add(new Ef(a.key,i)),this.Fi.Kr(t,a.key.path.S())}return Na.resolve(o)},t.prototype.Wr=function(t,e){return Na.resolve(this.il(e))},t.prototype.Gr=function(t,e){var n=e+1,r=this.rl(n),i=r<0?0:r;return Na.resolve(this.xi.length>i?this.xi[i]:null)},t.prototype.zr=function(){return Na.resolve(0===this.xi.length?-1:this.nl-1)},t.prototype.Hr=function(t){return Na.resolve(this.xi.slice())},t.prototype.Mi=function(t,e){var n=this,r=new Ef(e,0),i=new Ef(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Nt([r,i],(function(t){var e=n.il(t.Eu);o.push(e)})),Na.resolve(o)},t.prototype.qi=function(t,e){var n=this,r=new Lo(Zi);return e.forEach((function(t){var e=new Ef(t,0),i=new Ef(t,Number.POSITIVE_INFINITY);n.sl.Nt([e,i],(function(t){r=r.add(t.Eu)}))})),Na.resolve(this.ol(r))},t.prototype.Gi=function(t,e){var n=e.path,r=n.length+1,i=n;vo.G(i)||(i=i.child(""));var o=new Ef(new vo(i),0),s=new Lo(Zi);return this.sl.xt((function(t){var e=t.key.path;return!!n.N(e)&&(e.length===r&&(s=s.add(t.Eu)),!0)}),o),Na.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.Yr=function(t,e){var n=this;Wi(0===this.al(e.batchId,"removed")),this.xi.shift();var r=this.sl;return Na.forEach(e.mutations,(function(i){var o=new Ef(i.key,e.batchId);return r=r.delete(o),n.Lr.eo(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Zr=function(t){},t.prototype.so=function(t,e){var n=new Ef(e,0),r=this.sl.Ft(n);return Na.resolve(e.isEqual(r&&r.key))},t.prototype.no=function(t){return this.xi.length,Na.resolve()},t.prototype.al=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.xi.length?0:t-this.xi[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.xi.length?null:this.xi[e]},t}(),gl=function(){function t(t,e){this.Fi=t,this.cl=e,this.docs=new Do(vo.V),this.size=0}return t.prototype.Ri=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.cl(e);return this.docs=this.docs.rt(r,{gi:e,size:s,readTime:n}),this.size+=s-o,this.Fi.Kr(t,r.path.S())},t.prototype.Vi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.yi=function(t,e){var n=this.docs.get(e);return Na.resolve(n?n.gi:null)},t.prototype.getEntries=function(t,e){var n=this,r=jo();return e.forEach((function(t){var e=n.docs.get(t);r=r.rt(t,e?e.gi:null)})),Na.resolve(r)},t.prototype.Ui=function(t,e,n){for(var r=Fo(),i=new vo(e.path.child("")),o=this.docs._t(i);o.It();){var s=o.Et(),u=s.key,a=s.value,c=a.gi,h=a.readTime;if(!e.path.N(u.path))break;h.A(n)<=0||c instanceof Fu&&oa(e,c)&&(r=r.rt(c.key,c))}return Na.resolve(r)},t.prototype.ul=function(t,e){return Na.forEach(this.docs,(function(t){return e(t)}))},t.prototype._o=function(t){return new ml(this)},t.prototype.wo=function(t){return Na.resolve(this.size)},t}(),ml=function(t){function e(e){var n=this;return(n=t.call(this)||this).To=e,n}return B(e,t),e.prototype.bi=function(t){var e=this,n=[];return this.Ii.forEach((function(r,i){i&&i.gi?n.push(e.To.Ri(t,i.gi,e.Ai(r))):e.To.Vi(r)})),Na.xn(n)},e.prototype.pi=function(t,e){return this.To.yi(t,e)},e.prototype.vi=function(t,e){return this.To.getEntries(t,e)},e}(nc),bl=function(){function t(t){this.persistence=t,this.hl=new oo((function(t){return Eo(t)}),_o),this.lastRemoteSnapshotVersion=co.min(),this.highestTargetId=0,this.ll=0,this._l=new wf,this.targetCount=0,this.fl=vh.po()}return t.prototype.De=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Na.resolve()},t.prototype.Co=function(t){return Na.resolve(this.lastRemoteSnapshotVersion)},t.prototype.No=function(t){return Na.resolve(this.ll)},t.prototype.bo=function(t){return this.highestTargetId=this.fl.next(),Na.resolve(this.highestTargetId)},t.prototype.xo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Na.resolve()},t.prototype.Oo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new vh(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Fo=function(t,e){return this.Oo(e),this.targetCount+=1,Na.resolve()},t.prototype.ko=function(t,e){return this.Oo(e),Na.resolve()},t.prototype.$o=function(t,e){return this.hl.delete(e.target),this._l.du(e.targetId),this.targetCount-=1,Na.resolve()},t.prototype.Nr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.hl.delete(s),o.push(r.Lo(t,u.targetId)),i++)})),Na.xn(o).next((function(){return i}))},t.prototype.Bo=function(t){return Na.resolve(this.targetCount)},t.prototype.qo=function(t,e){var n=this.hl.get(e)||null;return Na.resolve(n)},t.prototype.Uo=function(t,e,n){return this._l.lu(e,n),Na.resolve()},t.prototype.Ko=function(t,e,n){this._l.fu(e,n);var r=this.persistence.Lr,i=[];return r&&e.forEach((function(e){i.push(r.eo(t,e))})),Na.xn(i)},t.prototype.Lo=function(t,e){return this._l.du(e),Na.resolve()},t.prototype.jo=function(t,e){var n=this._l.Tu(e);return Na.resolve(n)},t.prototype.so=function(t,e){return Na.resolve(this._l.so(e))},t}(),wl=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.mo=function(t,e){return Na.resolve(this.dl.get(e))},t.prototype.Ao=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:Cs(n.createTime)}),Na.resolve()},t.prototype.Ro=function(t,e){return Na.resolve(this.wl.get(e))},t.prototype.Po=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:kc(n.bundledQuery),readTime:Cs(n.readTime)}),Na.resolve()},t}(),El=function(){function t(t,e){var n=this;this.Tl={},this.Jo=new cc(0),this.Yo=!1,this.Yo=!0,this.Lr=t(this),this.ra=new bl(this),this.Fi=new Gc,this.Ni=function(t,e){return new gl(t,(function(t){return n.Lr.El(t)}))}(this.Fi),this.serializer=new wc(e),this.oa=new wl(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.pa=function(){return this.Yo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"yr",{get:function(){return this.Yo},enumerable:!1,configurable:!0}),t.prototype.fa=function(){},t.prototype.da=function(){},t.prototype.Oa=function(){return this.Fi},t.prototype.Na=function(t){var e=this.Tl[t.Ys()];return e||(e=new yl(this.Fi,this.Lr),this.Tl[t.Ys()]=e),e},t.prototype.xa=function(){return this.ra},t.prototype.Fa=function(){return this.Ni},t.prototype.Ma=function(){return this.oa},t.prototype.runTransaction=function(t,e,n){var r=this;zi("MemoryPersistence","Starting transaction:",t);var i=new _l(this.Jo.next());return this.Lr.Il(),n(i).next((function(t){return r.Lr.ml(i).next((function(){return t}))})).Cn().then((function(t){return i.Ci(),t}))},t.prototype.Al=function(t,e){return Na.Fn(Object.values(this.Tl).map((function(n){return function(){return n.so(t,e)}})))},t}(),_l=function(t){function e(e){var n=this;return(n=t.call(this)||this).Go=e,n}return B(e,t),e}(sc),Il=function(){function t(t){this.persistence=t,this.Rl=new wf,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"Vl",{get:function(){if(this.Pl)return this.Pl;throw Qi()},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t,e,n){return this.Rl.Qo(n,e),this.Vl.delete(n.toString()),Na.resolve()},t.prototype.Wo=function(t,e,n){return this.Rl.Wo(n,e),this.Vl.add(n.toString()),Na.resolve()},t.prototype.eo=function(t,e){return this.Vl.add(e.toString()),Na.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.du(e.targetId).forEach((function(t){return n.Vl.add(t.toString())}));var r=this.persistence.xa();return r.jo(t,e.targetId).next((function(t){t.forEach((function(t){return n.Vl.add(t.toString())}))})).next((function(){return r.$o(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Fa()._o();return Na.forEach(this.Vl,(function(r){var i=vo.K(r);return e.yl(t,i).next((function(t){t||n.Vi(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.qa=function(t,e){var n=this;return this.yl(t,e).next((function(t){t?n.Vl.delete(e.toString()):n.Vl.add(e.toString())}))},t.prototype.El=function(t){return 0},t.prototype.yl=function(t,e){var n=this;return Na.Fn([function(){return Na.resolve(n.Rl.so(e))},function(){return n.persistence.xa().so(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Tl=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.mc=function(t){this.bl=t},t.prototype.dc=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Nl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return B(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var s=new Ui;s.listenOnce(Mi.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Vi.NO_ERROR:var e=s.getResponseJson();zi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Vi.TIMEOUT:zi("Connection",'RPC "'+t+'" timed out'),o(new uo(so.DEADLINE_EXCEEDED,"Request time out"));break;case Vi.HTTP_ERROR:var n=s.getStatus();if(zi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(so).indexOf(e)>=0?e:so.UNKNOWN}(r.status);o(new uo(u,r.message))}else o(new uo(so.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new uo(so.UNAVAILABLE,"Connection failed."));break;default:Qi()}}finally{zi("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Ac=function(t,e){var n,r=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Di,o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(J())||"object"==typeof navigator&&"ReactNative"===navigator.product||J().indexOf("Electron/")>=0||function(){var t=J();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||J().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");zi("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),a=!1,c=!1,h=new Tl({pl:function(t){c?zi("Connection","Not sending because WebChannel is closed:",t):(a||(zi("Connection","Opening WebChannel transport."),u.open(),a=!0),zi("Connection","WebChannel sending:",t),u.send(t))},vl:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(ji.EventType.OPEN,(function(){c||zi("Connection","WebChannel transport opened.")})),f(ji.EventType.CLOSE,(function(){c||(c=!0,zi("Connection","WebChannel transport closed"),h.Nl())})),f(ji.EventType.ERROR,(function(t){c||(c=!0,$i("Connection","WebChannel transport errored:",t),h.Nl(new uo(so.UNAVAILABLE,"The operation could not be completed")))})),f(ji.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Wi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){zi("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=No[t];if(void 0!==e)return ko(e)}(o),a=i.message;void 0===s&&(s=so.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.Nl(new uo(s,a)),u.close()}else zi("Connection","WebChannel received:",n),h.xl(n)}})),setTimeout((function(){h.Cl()}),0),h},e}(function(){function t(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.xc=function(t,e,n,r){var i=this.kl(t,e);zi("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return zi("RestConnection","Received: ",t),t}),(function(e){throw $i("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Fc=function(t,e,n,r){return this.xc(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.2",t["Content-Type"]="text/plain",e)for(var n in e.ti)e.ti.hasOwnProperty(n)&&(t[n]=e.ti[n])},t.prototype.kl=function(t,e){var n=Nl[t];return this.Ol+"/v1/"+e+":"+n},t}()),Al=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Xc=function(t){this.Kl.push(t)},t.prototype.pa=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){zi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){zi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Sl=function(){function t(){}return t.prototype.Xc=function(t){},t.prototype.pa=function(){},t}(),Ol=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return this.serializer=rc(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Kc=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Oh(this.persistence,new vl,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new El(Il.gl,this.serializer)},t.prototype.jl=function(t){return new Df},t.prototype.terminate=function(){return z(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.pa()];case 1:return t.sent(),[4,this.persistence.pa()];case 2:return t.sent(),[2]}}))}))},t}(),kl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return B(e,t),e.prototype.initialize=function(e){return z(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Fh(this.Kc)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,dl(this.Xl.gu)];case 4:return n.sent(),[4,hf(this.Xl.Oh)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return Oh(this.persistence,new vl,t.Yl,this.serializer)},e.prototype.Hl=function(t){var e=this.persistence.Lr.Rr;return new dc(e,t.rs)},e.prototype.Gl=function(t){var e=Ah(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?pc.Tr(this.cacheSizeBytes):pc.mr;return new _h(this.synchronizeTabs,e,t.clientId,n,t.rs,Ra(),Va(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Df},e}(Ol),Dl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return B(e,t),e.prototype.initialize=function(e){return z(this,void 0,void 0,(function(){var n,r=this;return K(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.gu,this.kh instanceof kf?(this.kh.gu={_h:sl.bind(null,n),fh:fl.bind(null,n),dh:ll.bind(null,n),Ca:hl.bind(null,n),lh:ol.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence._a((function(t){return z(r,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return[4,ul(this.Xl.gu,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.yr?this.zl.start(this.Kc):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Ra();if(!kf.kn(e))throw new uo(so.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ah(t.Fl.t,t.Fl.persistenceKey);return new kf(e,t.rs,n,t.clientId,t.Yl)},e}(kl),Pl=function(){function t(){}return t.prototype.initialize=function(t,e){return z(this,void 0,void 0,(function(){var n=this;return K(this,(function(r){switch(r.label){case 0:return this.Kc?[3,2]:(this.Kc=t.Kc,this.kh=t.kh,this.Wc=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.gu=this.n_(e,!t.synchronizeTabs),this.kh.Oc=function(t){return Gf(n.gu,t,1)},this.Oh.jc.s_=nl.bind(null,this.gu),[4,gf(this.Oh,this.gu.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new qa},t.prototype.Zl=function(t){var e,n=rc(t.Fl.t),r=(e=t.Fl,new xl(e));return function(t,e,n){return new Kh(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Kc,n=this.Wc,r=t.rs,i=function(t){return Gf(s.gu,t,0)},o=Al.kn()?new Al:new Sl,new Hh(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Mf(t,e,n,r,i,o);return s&&(u.Hh=!0),u}(this.Kc,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Yi(t),zi("RemoteStore","RemoteStore shutting down."),e.Hc.add(5),[4,Wh(e)];case 1:return n.sent(),e.Yc.pa(),e.Zc.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),Cl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ll=function(t){this.o_=t};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Rl(t,e,n){if(!n)throw new uo(so.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new uo(so.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ml(t,e,n,r){if(!0===e&&!0===r)throw new uo(so.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function jl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Qi()}function Ul(t,e){if(t instanceof Ll&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new uo(so.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=jl(t);throw new uo(so.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Fl(t,e){if(e<=0)throw new uo(so.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ql=function(t){this.a_=t},Bl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.h_(this.a_+"() can only appear at the top level of your update data"):t.h_(this.a_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ql);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gl(t,e,n){return new vp({u_:3,l_:e.settings.l_,methodName:t.a_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var zl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.c_=function(t){return new mu(t.path,new cu)},e.prototype.isEqual=function(t){return t instanceof e},e}(ql),Kl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return B(e,t),e.prototype.c_=function(t){var e=Gl(this,t,!0),n=this.f_.map((function(t){return Ep(t,e)})),r=new hu(n);return new mu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ql),$l=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return B(e,t),e.prototype.c_=function(t){var e=Gl(this,t,!0),n=this.f_.map((function(t){return Ep(t,e)})),r=new lu(n);return new mu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ql),Hl=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return B(e,t),e.prototype.c_=function(t){var e=new du(t.serializer,Os(t.serializer,this.d_));return new mu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ql),Ql=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new uo(so.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new uo(so.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.T_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.T_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.T_===t.T_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.T_}},t.prototype.I=function(t){return Zi(this.w_,t.w_)||Zi(this.T_,t.T_)},t}(),Wl=function(){function t(t){this.E_=t}return t.fromBase64String=function(e){try{return new t(To.fromBase64String(e))}catch(e){throw new uo(so.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(To.fromUint8Array(e))},t.prototype.toBase64=function(){return this.E_.toBase64()},t.prototype.toUint8Array=function(){return this.E_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},t}(),Yl=new Map,Xl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new uo(so.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uo(so.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ml("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Jl(){if("undefined"==typeof Uint8Array)throw new uo(so.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Zl(){if("undefined"==typeof atob)throw new uo(so.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.fromBase64String=function(t){Zl();try{return new e(To.fromBase64String(t))}catch(t){throw new uo(so.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){return Jl(),new e(To.fromUint8Array(t))},e.prototype.toBase64=function(){return Zl(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return Jl(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Wl),ep=function(){function t(){}return t.prototype.I_=function(t,e){switch(void 0===e&&(e="none"),as(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ys(t.integerValue||t.doubleValue);case 3:return this.m_(t.timestampValue);case 4:return this.A_(t,e);case 5:return t.stringValue;case 6:return this.R_(gs(t.bytesValue));case 7:return this.P_(t.referenceValue);case 8:return this.g_(t.geoPointValue);case 9:return this.V_(t.arrayValue,e);case 10:return this.y_(t.mapValue,e);default:throw Qi()}},t.prototype.y_=function(t,e){var n=this,r={};return ro(t.fields||{},(function(t,i){r[t]=n.I_(i,e)})),r},t.prototype.g_=function(t){return new Ql(ys(t.latitude),ys(t.longitude))},t.prototype.V_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.I_(t,e)}))},t.prototype.A_=function(t,e){switch(e){case"previous":var n=os(t);return null==n?null:this.I_(n,e);case"estimate":return this.m_(ss(t));default:return null}},t.prototype.m_=function(t){var e=vs(t);return new ao(e.seconds,e.nanos)},t.prototype.p_=function(t,e){var n=fo.k(t);Wi(iu(n));var r=new qi(n.get(1),n.get(3)),i=new vo(n.v(5));return r.isEqual(e)||Ki("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),np=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return B(e,t),e.prototype.R_=function(t){return new tp(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return cd.b_(e,this.firestore,null)},e}(ep),rp=function(){function t(t,e,n,r,i){this.S_=t,this.D_=e,this.C_=n,this.N_=r,this.x_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new up(this.S_,this.x_,this.C_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.N_},t.prototype.data=function(){if(this.N_){if(this.x_){var t=new ip(this.S_,this.D_,this.C_,this.N_,null);return this.x_.fromFirestore(t)}return this.D_.I_(this.N_.sn())}},t.prototype.get=function(t){if(this.N_){var e=this.N_.data().field(op("DocumentSnapshot.get",t));if(null!==e)return this.D_.I_(e)}},t}(),ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(rp);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function op(t,e){return"string"==typeof e?Ap(t,e):e instanceof Ll?e.o_.F_:e.F_}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new uo(so.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.F_=new po(t)}return t.prototype.isEqual=function(t){return this.F_.isEqual(t.F_)},t}(),up=function(){function t(t,e,n){this.x_=e,this.C_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"O_",{get:function(){return this.C_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new cp(this.firestore,this.x_,this.C_.path.S())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),ap=function(){function t(t,e,n){this.x_=e,this.M_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.M_)},t}(),cp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ku(r))||this).firestore=e,i.O_=r,i.type="collection",i}return B(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.O_.S();return t.T()?null:new up(this.firestore,null,new vo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.O_)},e}(ap);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hp(t){var e=t.k_(),n=rc(t.v_);return new yp(t.v_,!!e.ignoreUndefinedProperties,n)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fp=/^__.*__$/,lp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[];return null!==this.Qe?n.push(new Ou(t,this.data,this.Qe,e)):n.push(new Su(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Du(t,this.fieldTransforms)),n},t}(),pp=function(){function t(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}return t.prototype.L_=function(t,e){var n=[new Ou(t,this.data,this.Qe,e)];return this.fieldTransforms.length>0&&n.push(new Du(t,this.fieldTransforms)),n},t}();function dp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qi()}}var vp=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.B_(),this.fieldTransforms=i||[],this.Qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),t.prototype.q_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.Q_(t),r},t.prototype.K_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.q_({path:n,__:!1});return r.B_(),r},t.prototype.W_=function(t){return this.q_({path:void 0,__:!0})},t.prototype.h_=function(t){return Sp(t,this.settings.methodName,this.settings.j_||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.Qe.find((function(e){return t.N(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.N(e.field)}))},t.prototype.B_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Q_(this.path.get(t))},t.prototype.Q_=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(dp(this.u_)&&fp.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),yp=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||rc(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new vp({u_:t,methodName:e,l_:n,path:po.$(),__:!1,j_:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function gp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Tp("Data must be an object, but it was:",s,r);var u,a,c=_p(r,s);if(o.merge)u=new gu(s.Qe),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=Np(e,l[f],n);if(!s.contains(p))throw new uo(so.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Op(h,p)||h.push(p)}u=new gu(h),a=s.fieldTransforms.filter((function(t){return u.He(t.field)}))}else u=null,a=s.fieldTransforms;return new lp(new Vu(c),u,a)}function mp(t,e,n,r){var i=t.G_(1,e,n);Tp("Data must be an object, but it was:",i,r);var o=[],s=new Mu;ro(r,(function(t,r){var u=Ap(e,t,n);r instanceof Ll&&(r=r.o_);var a=i.K_(u);if(r instanceof Bl)o.push(u);else{var c=Ep(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new gu(o);return new pp(s.Ye(),u,i.fieldTransforms)}function bp(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Np(e,r,n)],a=[i];if(o.length%2!=0)throw new uo(so.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Np(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Mu,l=u.length-1;l>=0;--l)if(!Op(h,u[l])){var p=u[l],d=a[l];d instanceof Ll&&(d=d.o_);var v=s.K_(p);if(d instanceof Bl)h.push(p);else{var y=Ep(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new gu(h);return new pp(f.Ye(),g,s.fieldTransforms)}function wp(t,e,n,r){return void 0===r&&(r=!1),Ep(n,t.G_(r?4:3,e))}function Ep(t,e){if(t instanceof Ll&&(t=t.o_),Ip(t))return Tp("Unsupported field value:",e,t),_p(t,e);if(t instanceof ql)return function(t,e){if(!dp(e.u_))throw e.h_(t.a_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.a_+"() is not currently supported inside arrays");var n=t.c_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Qe.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.u_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ep(o[i],e.W_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Ll&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Os(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ao.fromDate(t);return{timestampValue:ks(e.serializer,n)}}if(t instanceof ao){var r=new ao(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ks(e.serializer,r)}}if(t instanceof Ql)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wl)return{bytesValue:Ds(e.serializer,t.E_)};if(t instanceof up){var i=e.t,o=t.firestore.v_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ls(t.firestore.v_||e.t,t.C_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+jl(t))}(t,e)}function _p(t,e){var n={};return io(t)?e.path&&e.path.length>0&&e.Qe.push(e.path):ro(t,(function(t,r){var i=Ep(r,e.U_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ip(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ao||t instanceof Ql||t instanceof Wl||t instanceof up||t instanceof ql)}function Tp(t,e,n){if(!Ip(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=jl(n);throw"an object"===r?e.h_(t+" a custom object"):e.h_(t+" "+r)}}function Np(t,e,n){if(e instanceof Ll&&(e=e.o_),e instanceof sp)return e.F_;if("string"==typeof e)return Ap(t,e);throw Sp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xp=new RegExp("[~\\*/\\[\\]]");function Ap(t,e,n){if(e.search(xp)>=0)throw Sp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(sp.bind.apply(sp,W([void 0],e.split("."))))).F_}catch(r){throw Sp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Sp(t,e,n,r,i){var o=r&&!r.T(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new uo(so.INVALID_ARGUMENT,(u+=". ")+t+a)}function Op(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var kp=function(){function t(t){this.Wc=t,this.z_=new Map,this.mutations=[],this.H_=!1,this.J_=null,this.Y_=new Set}return t.prototype.X_=function(t){return z(this,void 0,void 0,(function(){var e,n=this;return K(this,(function(r){switch(r.label){case 0:if(this.Z_(),this.mutations.length>0)throw new uo(so.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return z(this,void 0,void 0,(function(){var n,r,i,o,s,u;return K(this,(function(a){switch(a.label){case 0:return n=Yi(t),r=Fs(n.serializer)+"/documents",i={documents:e.map((function(t){return Vs(n.serializer,t)}))},[4,n.Fc("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Wi(!!e.found),e.found.name,e.found.updateTime;var n=Ms(t,e.found.name),r=Cs(e.found.updateTime),i=new Vu({mapValue:{fields:e.found.fields}});return new Fu(n,r,i,{})}(t,e):"missing"in e?function(t,e){Wi(!!e.missing),Wi(!!e.readTime);var n=Ms(t,e.missing),r=Cs(e.readTime);return new qu(n,r)}(t,e):Qi()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Wi(!!e),u.push(e)})),u)]}}))}))}(this.Wc,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof qu||t instanceof Fu?n.tf(t):Qi()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.L_(t,this.je(t))),this.Y_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.L_(t,this.ef(t)))}catch(t){this.J_=t}this.Y_.add(t.toString())},t.prototype.delete=function(t){this.write([new Lu(t,this.je(t))]),this.Y_.add(t.toString())},t.prototype.commit=function(){return z(this,void 0,void 0,(function(){var t,e=this;return K(this,(function(n){switch(n.label){case 0:if(this.Z_(),this.J_)throw this.J_;return t=this.z_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=vo.K(n);e.mutations.push(new Ru(r,e.je(r)))})),[4,function(t,e){return z(this,void 0,void 0,(function(){var n,r,i;return K(this,(function(o){switch(o.label){case 0:return n=Yi(t),r=Fs(n.serializer)+"/documents",i={writes:e.map((function(t){return Gs(n.serializer,t)}))},[4,n.xc("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Wc,this.mutations)];case 1:return n.sent(),this.H_=!0,[2]}}))}))},t.prototype.tf=function(t){var e;if(t instanceof Fu)e=t.version;else{if(!(t instanceof qu))throw Qi();e=co.min()}var n=this.z_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new uo(so.ABORTED,"Document version changed between two reads.")}else this.z_.set(t.key.toString(),e)},t.prototype.je=function(t){var e=this.z_.get(t.toString());return!this.Y_.has(t.toString())&&e?wu.updateTime(e):wu.Ge()},t.prototype.ef=function(t){var e=this.z_.get(t.toString());if(!this.Y_.has(t.toString())&&e){if(e.isEqual(co.min()))throw new uo(so.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wu.updateTime(e)}return wu.exists(!0)},t.prototype.write=function(t){this.Z_(),this.mutations=this.mutations.concat(t)},t.prototype.Z_=function(){},t}(),Dp=function(){function t(t,e,n,r){this.rs=t,this.Wc=e,this.updateFunction=n,this.us=r,this.nf=5,this.Ps=new Ta(this.rs,"transaction_retry")}return t.prototype.run=function(){this.sf()},t.prototype.sf=function(){var t=this;this.Ps.An((function(){return z(t,void 0,void 0,(function(){var t,e,n=this;return K(this,(function(r){return t=new kp(this.Wc),(e=this.rf(t))&&e.then((function(e){n.rs.fs((function(){return t.commit().then((function(){n.us.resolve(e)})).catch((function(t){n.af(t)}))}))})).catch((function(t){n.af(t)})),[2]}))}))}))},t.prototype.rf=function(t){try{var e=this.updateFunction(t);return!yo(e)&&e.catch&&e.then?e:(this.us.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.us.reject(t),null}},t.prototype.af=function(t){var e=this;this.nf>0&&this.cf(t)?(this.nf-=1,this.rs.fs((function(){return e.sf(),Promise.resolve()}))):this.us.reject(t)},t.prototype.cf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Oo(e)}return!1},t}(),Pp=function(){function t(t,e,n){var r=this;this.credentials=t,this.rs=e,this.Fl=n,this.user=Qa.UNAUTHENTICATED,this.clientId=Ji.u(),this.uf=function(){},this.oi=new Ia,this.credentials.si((function(t){zi("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.uf(t)),r.oi.resolve()}))}return t.prototype.getConfiguration=function(){return z(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.oi.promise];case 1:return[2,(t.sent(),{rs:this.rs,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.hf=function(t){var e=this;this.uf=t,this.oi.promise.then((function(){return e.uf(e.user)}))},t.prototype.lf=function(){if(this.rs.Vs)throw new uo(so.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.rs.bs();var e=new Ia;return this.rs.ys((function(){return z(t,void 0,void 0,(function(){var t,n;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this._f?[4,this._f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.ff?[4,this.ff.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.ii(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ua(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Cp(t,e){return z(this,void 0,void 0,(function(){var n,r=this;return K(this,(function(i){switch(i.label){case 0:return t.rs.Ns(),zi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.hf((function(n){return t.rs.Ss((function(){return z(r,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,kh(e.Kc,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.fa((function(){return t.terminate()})),t.ff=e,[2]}}))}))}function Lp(t,e){return z(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return t.rs.Ns(),[4,Rp(t)];case 1:return n=i.sent(),zi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.hf((function(n){return t.rs.Ss((function(){return function(t,e){return z(this,void 0,void 0,(function(){var n,r;return K(this,(function(i){switch(i.label){case 0:return(n=Yi(t)).rs.Ns(),zi("RemoteStore","RemoteStore received new credentials"),r=nf(n),n.Hc.add(3),[4,Wh(n)];case 1:return i.sent(),r&&n.Zc.set("Unknown"),[4,n.jc.s_(e)];case 2:return i.sent(),n.Hc.delete(3),[4,Qh(n)];case 3:return i.sent(),[2]}}))}))}(e.Oh,n)}))})),t._f=e,[2]}}))}))}function Rp(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return t.ff?[3,2]:(zi("FirestoreClient","Using default OfflineComponentProvider"),[4,Cp(t,new Ol)]);case 1:e.sent(),e.label=2;case 2:return[2,t.ff]}}))}))}function Vp(t){return z(this,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return t._f?[3,2]:(zi("FirestoreClient","Using default OnlineComponentProvider"),[4,Lp(t,new Pl)]);case 1:e.sent(),e.label=2;case 2:return[2,t._f]}}))}))}function Mp(t){return Rp(t).then((function(t){return t.persistence}))}function jp(t){return Rp(t).then((function(t){return t.Kc}))}function Up(t){return Vp(t).then((function(t){return t.Oh}))}function Fp(t){return Vp(t).then((function(t){return t.gu}))}function qp(t){return z(this,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Vp(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ls=jf.bind(null,e.gu),n.Us=Ff.bind(null,e.gu),n)]}}))}))}function Bp(t,e){var n=this,r=new Ia;return t.rs.fs((function(){return z(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return n=qf,[4,Fp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}function Gp(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o;return K(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Yi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ga.Oi(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof Fu?n.resolve(r):r instanceof qu?n.resolve(null):n.reject(new uo(so.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=Ua(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}function zp(t,e,n,r,i){var o=new Cl({next:function(o){e.fs((function(){return Ga(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new uo(so.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new uo(so.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Ha(Ku(n.path),o,{includeMetadataChanges:!0,Hs:!0});return Ba(t,s)}var Kp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).yf=new ja,r.df="name"in e?e.name:"[DEFAULT]",r}return B(e,t),e.prototype.Vf=function(){return this.pf||sd(this),this.pf.terminate()},e}(function(){function t(t,e){this.df="(lite)",this.wf=new Xl({}),this.Tf=!1,t instanceof qi?(this.v_=t,this.Ef=new Ya):(this.If=t,this.v_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new uo(so.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qi(t.options.projectId)}(t),this.Ef=new Xa(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.If)throw new uo(so.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.If},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Af",{get:function(){return void 0!==this.Rf},enumerable:!1,configurable:!0}),t.prototype.Pf=function(t){if(this.Tf)throw new uo(so.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.wf=new Xl(t),void 0!==t.credentials&&(this.Ef=function(t){if(!t)return new Ya;switch(t.type){case"gapi":var e=t.client;return Wi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Za(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new uo(so.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.gf=function(){return this.wf},t.prototype.k_=function(){return this.Tf=!0,this.wf},t.prototype._delete=function(){return this.Rf||(this.Rf=this.Vf()),this.Rf},t.prototype.Vf=function(){return function(t){var e=Yl.get(t);e&&(zi("ComponentProvider","Removing Datastore"),Yl.delete(t),e.terminate())}(this),Promise.resolve()},t}());function $p(t,e,n){var r=this,i=new Ia;return t.rs.enqueue((function(){return z(r,void 0,void 0,(function(){var r;return K(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Cp(t,n)];case 1:return o.sent(),[4,Lp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===so.FAILED_PRECONDITION||t.code===so.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Hp(t){if(t.mf||t.Af)throw new uo(so.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qp=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).S_=e,u.vf=e,u.metadata=o,u}return B(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.N_){if(this.x_){var e=new Wp(this.S_,this.D_,this.C_,this.N_,this.metadata,null);return this.x_.fromFirestore(e,t)}return this.D_.I_(this.N_.sn(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.N_){var n=this.N_.data().field(op("DocumentSnapshot.get",t));if(null!==n)return this.D_.I_(n,e.serverTimestamps)}},e}(rp),Wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Qp),Yp=function(){function t(t,e,n,r){this.S_=t,this.D_=e,this.bf=r,this.metadata=new fd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.bf.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.bf.docs.forEach((function(r){t.call(e,new Wp(n.S_,n.D_,r.key,r,new fd(n.bf.Qt.has(r.key),n.bf.fromCache),n.query.x_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.bf.Wt)throw new uo(so.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Sf&&this.Df===e||(this.Sf=function(t,e){if(t.bf.Ut.T()){var n=0;return t.bf.docChanges.map((function(e){var r=new Wp(t.S_,t.D_,e.doc.key,e.doc,new fd(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.bf.Ut;return t.bf.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Wp(t.S_,t.D_,e.doc.key,e.doc,new fd(t.bf.Qt.has(e.doc.key),t.bf.fromCache),t.query.x_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Xp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Df=e),this.Sf},t}();function Xp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qi()}}function Jp(t,e){return t instanceof Qp&&e instanceof Qp?t.S_===e.S_&&t.C_.isEqual(e.C_)&&(null===t.N_?null===e.N_:t.N_.isEqual(e.N_))&&t.x_===e.x_:t instanceof Yp&&e instanceof Yp&&t.S_===e.S_&&function(t,e){return t instanceof ap&&e instanceof ap&&t.firestore===e.firestore&&na(t.M_,e.M_)&&t.x_===e.x_}(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.bf.isEqual(e.bf)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return B(e,t),e.prototype.R_=function(t){return new Wl(t)},e.prototype.P_=function(t){var e=this.p_(t,this.firestore.v_);return new up(this.firestore,null,e)},e}(ep);function td(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Ul(t.firestore,Kp),s=hp(o);return e instanceof Ll&&(e=e.o_),ed(o,("string"==typeof e||e instanceof sp?bp(s,"updateDoc",t.C_,e,n,r):mp(s,"updateDoc",t.C_,e)).L_(t.C_,wu.exists(!0)))}function ed(t,e){return Bp(od(t),e)}function nd(t,e,n){var r=n.docs.get(e.C_),i=new Zp(t);return new Qp(t,i,e.C_,r,new fd(n.hasPendingWrites,n.fromCache),e.x_)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var rd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Hp(t);var n=od(t),r=t.k_(),i=new Pl;return $p(n,i,new kl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Hp(t);var e=od(t),n=t.k_(),r=new Pl;return $p(e,r,new Dl(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.mf&&!t.Af)throw new uo(so.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ia;return t.yf.ys((function(){return z(e,void 0,void 0,(function(){var e;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return xa.kn()?(e=t+"main",[4,xa.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ah(t.v_,t.df))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.o_)},t}(),id=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Cf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof qi||(i.Nf=e),i}return B(e,t),Object.defineProperty(e.prototype,"v_",{get:function(){return this.o_.v_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.gf()),t)).merge,this.o_.Pf(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.gf().host&&$i("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return z(e,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Mp(t)];case 1:return e=r.sent(),[4,Up(t)];case 2:return n=r.sent(),[2,(e.da(!0),function(t){var e=Yi(t);return e.Hc.delete(0),Qh(e)}(n))]}}))}))}))}(od(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.rs.enqueue((function(){return z(e,void 0,void 0,(function(){var e,n;return K(this,(function(r){switch(r.label){case 0:return[4,Mp(t)];case 1:return e=r.sent(),[4,Up(t)];case 2:return n=r.sent(),[2,(e.da(!1),function(t){return z(this,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return(e=Yi(t)).Hc.add(0),[4,Wh(e)];case 1:return n.sent(),e.Zc.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(od(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ml("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Cf.enableMultiTabIndexedDbPersistence(this):this.Cf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Cf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ia;return t.rs.fs((function(){return z(e,void 0,void 0,(function(){var e;return K(this,(function(r){switch(r.label){case 0:return e=Hf,[4,Fp(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(od(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=od(t),i=ic(e)?e:{next:e},o=new Cl(i);return t.yf.fs((function(){return z(n,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=function(t,e){Yi(t).$s.add(e),e.next()},[4,qp(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))})),function(){o.r_(),t.yf.fs((function(){return z(n,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=function(t,e){Yi(t).$s.delete(e)},[4,qp(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Nf)throw new uo(so.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Nf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){return Rl("Firestore.collection","path",t),od(this.o_),new Ed(fo.k(t),this,null)},e.prototype.doc=function(t){return Rl("Firestore.doc","path",t),od(this.o_),cd.xf(fo.k(t),this,null)},e.prototype.collectionGroup=function(t){if(Rl("Firestore.collectionGroup","collectionId",t),t.indexOf("/")>=0)throw new uo(so.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return od(this.o_),new md(function(t){return new Gu(fo.$(),t)}(t),this,null)},e.prototype.runTransaction=function(t){var e=this;return function(t,e){var n=this,r=new Ia;return t.rs.fs((function(){return z(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,function(t){return Vp(t).then((function(t){return t.Wc}))}(t)];case 1:return n=i.sent(),new Dp(t.rs,n,e,r).run(),[2]}}))}))})),r.promise}(od(this.o_),(function(n){return t(new ud(e,n))}))},e.prototype.batch=function(){return od(this.o_),new ad(this)},e}(Ll);function od(t){return t.pf||sd(t),t.pf.lf(),t.pf}function sd(t){var e=t.k_(),n=function(t,e,n){return new Fi(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.v_,t.df,e);t.pf=new Pp(t.Ef,t.yf,n)}var ud=function(){function t(t,e){this.S_=t,this.Ff=e,this.Of=hp(this.S_.o_)}return t.prototype.get=function(t){var e=this,n=_d("Transaction.get",t,this.S_),r=new np(this.S_);return this.Ff.X_([n.C_]).then((function(t){if(!t||1!==t.length)return Qi();var i=t[0];if(i instanceof qu)return new ld(e.S_,new Qp(e.S_.o_,r,n.C_,null,new fd(!1,!1),n.x_));if(i instanceof Fu)return new ld(e.S_,new Qp(e.S_.o_,r,n.C_,i,new fd(!1,!1),n.x_));throw Qi()}))},t.prototype.set=function(t,e,n){var r=_d("Transaction.set",t,this.S_);n=Vl("Transaction.set",n);var i=Id(r.x_,e,n),o=gp(this.Of,"Transaction.set",r.C_,i,null!==r.x_,n);return this.Ff.set(r.C_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=_d("Transaction.update",t,this.S_);return e instanceof Ll&&(e=e.o_),o="string"==typeof e||e instanceof sp?bp(this.Of,"Transaction.update",s.C_,e,n,r):mp(this.Of,"Transaction.update",s.C_,e),this.Ff.update(s.C_,o),this},t.prototype.delete=function(t){var e=_d("Transaction.delete",t,this.S_);return this.Ff.delete(e.C_),this},t}(),ad=function(){function t(t){this.S_=t,this.Mf=[],this.kf=!1,this.Of=hp(this.S_.o_)}return t.prototype.set=function(t,e,n){this.$f();var r=_d("WriteBatch.set",t,this.S_);n=Vl("WriteBatch.set",n);var i=Id(r.x_,e,n),o=gp(this.Of,"WriteBatch.set",r.C_,i,null!==r.x_,n);return this.Mf=this.Mf.concat(o.L_(r.C_,wu.Ge())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.$f();var o,s=_d("WriteBatch.update",t,this.S_);return e instanceof Ll&&(e=e.o_),o="string"==typeof e||e instanceof sp?bp(this.Of,"WriteBatch.update",s.C_,e,n,r):mp(this.Of,"WriteBatch.update",s.C_,e),this.Mf=this.Mf.concat(o.L_(s.C_,wu.exists(!0))),this},t.prototype.delete=function(t){this.$f();var e=_d("WriteBatch.delete",t,this.S_);return this.Mf=this.Mf.concat(new Lu(e.C_,wu.Ge())),this},t.prototype.commit=function(){return this.$f(),this.kf=!0,this.Mf.length>0?Bp(od(this.S_.o_),this.Mf):Promise.resolve()},t.prototype.$f=function(){if(this.kf)throw new uo(so.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),cd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.D_=new np(e),r}return B(e,t),e.xf=function(t,n,r){if(t.length%2!=0)throw new uo(so.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.M()+" has "+t.length);return new e(n,new up(n.o_,r,new vo(t)))},e.b_=function(t,n,r){return new e(n,new up(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ed(this.o_.O_.S(),this.firestore,this.o_.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Rl("DocumentReference.collection","path",t),!t)throw new uo(so.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=fo.k(t);return new Ed(this.o_.O_.child(e),this.firestore,null)},e.prototype.isEqual=function(t){return t instanceof Ll&&(t=t.o_),t instanceof up&&(n=t,((e=this.o_)instanceof up||e instanceof cp)&&(n instanceof up||n instanceof cp)&&e.firestore===n.firestore&&e.path===n.path&&e.x_===n.x_);var e,n},e.prototype.set=function(t,e){e=Vl("DocumentReference.set",e);try{return function(t,e,n){var r=Ul(t.firestore,Kp),i=Id(t.x_,e,n);return ed(r,gp(hp(r),"setDoc",t.C_,i,null!==t.x_,n).L_(t.C_,wu.Ge()))}(this.o_,t,e)}catch(t){throw hd(t,"setDoc","DocumentReference.set")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?td(this.o_,t):td.apply(void 0,W([this.o_,t,e],n))}catch(t){throw hd(t,"updateDoc","DocumentReference.update")}},e.prototype.delete=function(){return ed(Ul((t=this.o_).firestore,Kp),[new Lu(t.C_,wu.Ge())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ic(r))return r}return{}}(e),i=function(e,n){var r,i,o;return{next:function(e){o.next&&o.next(function(e){return new ld(t.firestore,new Qp(t.firestore.o_,t.D_,e.C_,e.N_,e.metadata,t.o_.x_))}(e))},error:null===(r=(o=ic(e[0])?e[0]:ic(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===r?void 0:r.bind(o),complete:null===(i=o.complete)||void 0===i?void 0:i.bind(o)}}(e);return function(t){for(var e,n,r,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var u={includeMetadataChanges:!1},a=0;"object"!=typeof o[a]||ic(o[a])||(u=o[a],a++);var c,h,f,l={includeMetadataChanges:u.includeMetadataChanges};if(ic(o[a])){var p=o[a];o[a]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[a+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[a+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof up)h=Ul(t.firestore,Kp),f=Ku(t.C_.path),c={next:function(e){o[a]&&o[a](nd(h,t,e))},error:o[a+1],complete:o[a+2]};else{h=Ul(t.firestore,Kp),f=t.M_;var d=new Zp(h);c={next:function(e){o[a]&&o[a](new Yp(h,d,t,e))},error:o[a+1],complete:o[a+2]},gd(t.M_)}var v=od(h),y=new Cl(c),g=new Ha(f,y,l);return h.yf.fs((function(){return z(i,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=Ba,[4,qp(v)];case 1:return[2,t.apply(void 0,[e.sent(),g])]}}))}))})),function(){y.r_(),h.yf.fs((function(){return z(i,void 0,void 0,(function(){var t;return K(this,(function(e){switch(e.label){case 0:return t=Ga,[4,qp(v)];case 1:return[2,t.apply(void 0,[e.sent(),g])]}}))}))}))}}(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Ul(t.firestore,Kp),r=od(n),i=new Zp(n),o=new Ia;return n.yf.fs((function(){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return[4,jp(r)];case 1:return[4,Gp(e.sent(),t.C_,o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new Qp(n,i,t.C_,e,new fd(e instanceof Fu&&e.Je,!0),t.x_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Ul(t.firestore,Kp),r=od(n),i=new Ia;return n.yf.fs((function(){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return[4,qp(r)];case 1:return[4,zp(e.sent(),n.yf,t.C_,{source:"server"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return nd(n,t,e)}))}(this.o_):function(t){var e=this,n=Ul(t.firestore,Kp),r=od(n),i=new Ia;return n.yf.fs((function(){return z(e,void 0,void 0,(function(){return K(this,(function(e){switch(e.label){case 0:return[4,qp(r)];case 1:return[4,zp(e.sent(),n.yf,t.C_,{source:"default"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return nd(n,t,e)}))}(this.o_)).then((function(t){return new ld(e.firestore,new Qp(e.firestore.o_,e.D_,t.C_,t.N_,t.metadata,e.o_.x_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Ll);function hd(t,e,n){return t.message=t.message.replace(e+"()",n+"()"),t}var fd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ld=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return B(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new cd(this.S_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Jp(this.o_,t.o_)},e}(Ll),pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(ld);function dd(t,e,n){if(n instanceof Ll&&(n=n.o_),"string"==typeof n){if(""===n)throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yu(e)&&-1!==n.indexOf("/"))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(fo.k(n));if(!vo.G(r))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ms(t,new vo(r))}if(n instanceof up)return ms(t,n.C_);throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+jl(n)+".")}function vd(t,e){if(!Array.isArray(t)||0===t.length)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yd(t,e,n){if(!n.isEqual(e))throw new uo(so.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function gd(t){if(Hu(t)&&0===t.rn.length)throw new uo(so.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var md=function(){function t(t,e,n){this.M_=t,this.firestore=e,this.x_=n,this.Lf=hp(e.o_),this.D_=new np(e)}return t.prototype.where=function(e,n,r){var i=Np("Query.where",e),o=function(t,e,n,r,i,o,s){var u;if(i.B()){if("array-contains"===o||"array-contains-any"===o)throw new uo(so.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){vd(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(dd(r,t,f))}u={arrayValue:{values:a}}}else u=dd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vd(s,o),u=wp(n,"Query.where",s,"in"===o||"not-in"===o);var l=ua.create(i,o,u);return function(t,e){if(e.cn()){var n=Wu(t);if(null!==n&&!n.isEqual(e.field))throw new uo(so.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Qu(t);null!==r&&yd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new uo(so.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new uo(so.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(this.M_,0,this.Lf,this.firestore.v_,i,n,r);return new t(function(t,e){var n=t.filters.concat([e]);return new Gu(t.path,t.collectionGroup,t.rn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.orderBy=function(e,n){var r;if(void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new uo(so.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Np("Query.orderBy",e),o=function(t,e,n){if(null!==t.startAt)throw new uo(so.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new uo(so.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new wa(e,n);return function(t,e){if(null===Qu(t)){var n=Wu(t);null!==n&&yd(0,n,e.field)}}(t,r),r}(this.M_,i,r);return new t(function(t,e){var n=t.rn.concat([e]);return new Gu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(this.M_,o),this.firestore,this.x_)},t.prototype.limit=function(e){return Fl("Query.limit",e),new t(Zu(this.M_,e,"F"),this.firestore,this.x_)},t.prototype.limitToLast=function(e){return Fl("Query.limitToLast",e),new t(Zu(this.M_,e,"L"),this.firestore,this.x_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAt",e,n,!0);return new t(ta(this.M_,i),this.firestore,this.x_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.startAfter",e,n,!1);return new t(ta(this.M_,i),this.firestore,this.x_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endBefore",e,n,!0);return new t(ea(this.M_,i),this.firestore,this.x_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.Bf("Query.endAt",e,n,!1);return new t(ea(this.M_,i),this.firestore,this.x_)},t.prototype.isEqual=function(e){return e instanceof t&&this.firestore===e.firestore&&na(this.M_,e.M_)&&this.x_===e.x_},t.prototype.withConverter=function(e){return new t(this.M_,this.firestore,e)},t.prototype.Bf=function(t,e,n,r){if(e instanceof ld)return function(t,e,n,r,i){if(!r)throw new uo(so.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Xu(t);s<u.length;s++){var a=u[s];if(a.field.B())o.push(ms(e,r.key));else{var c=r.field(a.field);if(is(c))throw new uo(so.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.M();throw new uo(so.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ya(o,i)}(this.M_,this.firestore.v_,t,e.o_.N_,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.rn;if(i.length>s.length)throw new uo(so.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.B()){if("string"!=typeof c)throw new uo(so.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Yu(t)&&-1!==c.indexOf("/"))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(fo.k(c));if(!vo.G(h))throw new uo(so.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new vo(h);u.push(ms(e,f))}else{var l=wp(n,r,c);u.push(l)}}return new ya(u,o)}(this.M_,this.firestore.v_,this.Lf,t,i,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s={},u=0;if("object"!=typeof i[u]||ic(i[u])||(s=i[u],u++),ic(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}var c={next:function(t){i[u]&&i[u](new wd(r.firestore,new Yp(r.firestore.o_,r.D_,new ap(r.firestore.o_,r.x_,r.M_),t)))},error:i[u+1],complete:i[u+2]};return gd(this.M_),function(t,e,n,r){var i=this,o=new Cl(r),s=new Ha(e,o,n);return t.rs.fs((function(){return z(i,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Ba,[4,qp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.r_(),t.rs.fs((function(){return z(i,void 0,void 0,(function(){var e;return K(this,(function(n){switch(n.label){case 0:return e=Ga,[4,qp(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(od(this.firestore.o_),this.M_,s,c)},t.prototype.get=function(t){var e=this;gd(this.M_);var n=od(this.firestore.o_);return(t&&"cache"===t.source?function(t,e){var n=this,r=new Ia;return t.rs.fs((function(){return z(n,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return z(this,void 0,void 0,(function(){var r,i,o,s,u,a;return K(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,Mh(t,e,!0)];case 1:return r=c.sent(),i=new Lf(e,r.Xa),o=i.gh(r.documents),s=i.bi(o,!1),n.resolve(s.snapshot),[3,3];case 2:return u=c.sent(),a=Ua(u,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,jp(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,this.M_):function(t,e,n){var r=this;void 0===n&&(n={});var i=new Ia;return t.rs.fs((function(){return z(r,void 0,void 0,(function(){var r;return K(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Cl({next:function(n){e.fs((function(){return Ga(t,s)})),n.fromCache&&"server"===r.source?i.reject(new uo(so.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Ha(n,o,{includeMetadataChanges:!0,Hs:!0});return Ba(t,s)},[4,qp(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.rs,e,n,i])]}}))}))})),i.promise}(n,this.M_,t)).then((function(t){return new wd(e.firestore,new Yp(e.firestore.o_,e.D_,new ap(e.firestore.o_,e.x_,e.M_),t))}))},t}(),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return B(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new pd(this.S_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),e}(Ll),wd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).S_=e,r}return B(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new md(this.o_.query.M_,this.S_,this.o_.query.x_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new pd(t.S_,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new bd(e.S_,t)}))},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new pd(n.S_,r))}))},e.prototype.isEqual=function(t){return Jp(this.o_,t.o_)},e}(Ll),Ed=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Ku(e),n,r)||this).O_=e,e.length%2!=1)throw new uo(so.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.M()+" has "+e.length);return i}return B(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.M_.path.C()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.M_.path.S();return t.T()?null:cd.xf(t,this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.M_.path.M()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){0===arguments.length&&(t=Ji.u()),Rl("CollectionReference.doc","path",t);var e=fo.k(t);return cd.xf(this.M_.path.child(e),this.firestore,this.x_)},e.prototype.add=function(t){var e=this.x_?this.x_.toFirestore(t):t,n=this.doc();return cd.b_(n.o_.C_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.O_,this.firestore,t)},e}(md);function _d(t,e,n){var r=Ul(e,up);if(r.firestore!==n.o_)throw new uo(so.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function Id(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Td,Nd=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(sp.bind.apply(sp,W([void 0],e))))||this}return B(e,t),e.documentId=function(){return new e(po.q().M())},e.prototype.isEqual=function(t){return t instanceof Ll&&(t=t.o_),t instanceof sp&&this.o_.F_.isEqual(t.F_)},e}(Ll),xd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.serverTimestamp=function(){var t=new zl("serverTimestamp");return t.a_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Bl("deleteField");return t.a_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kl("arrayUnion",t)}.apply(void 0,t);return r.a_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $l("arrayRemove",t)}.apply(void 0,t);return r.a_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Hl("increment",t)}(t);return n.a_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(Ll),Ad={Firestore:id,GeoPoint:Ql,Timestamp:ao,Blob:tp,Transaction:ud,WriteBatch:ad,DocumentReference:cd,DocumentSnapshot:ld,Query:md,QueryDocumentSnapshot:pd,QuerySnapshot:wd,CollectionReference:Ed,FieldPath:Nd,FieldValue:xd,setLogLevel:function(t){var e;e=t,Bi.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(function(t,e){t.INTERNAL.registerComponent(new at("firestore",(function(t){return function(t,e){return new id(t,new Kp(t,e),new rd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Ad)))})(Td=Vt),Td.registerVersion("@firebase/firestore","2.0.2");Vt.initializeApp({apiKey:"AIzaSyDzJr78xXPyMBgLZM6485nj3ULFwbdZi5o",authDomain:"sveltesf4.firebaseapp.com",databaseURL:"https://sveltesf4.firebaseio.com",projectId:"sveltesf4",storageBucket:"sveltesf4.appspot.com",messagingSenderId:"685304491415",appId:"1:685304491415:web:7d406a321ebca0a11328d2"});Vt.firestore();function Sd(e){let n,r,i,o,p,y,g;return{c(){n=c("div"),r=c("p"),i=h(e[0]),o=f(),p=c("button"),p.textContent="Delete",d(r,"class","svelte-lne9ia"),d(n,"class","field svelte-lne9ia")},m(t,a){u(t,n,a),s(n,r),s(r,i),s(n,o),s(n,p),y||(g=l(p,"click",e[1]),y=!0)},p(t,[e]){1&e&&v(i,t[0])},i:t,o:t,d(t){t&&a(n),y=!1,g()}}}function Od(t,e,n){const r=b();let{fieldName:i=""}=e;return t.$$set=t=>{"fieldName"in t&&n(0,i=t.fieldName)},[i,function(t){r("delete_field",{fieldName:i})}]}class kd extends F{constructor(t){super(),U(this,t,Od,Sd,o,{fieldName:0})}}var Dd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t,e,n){t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){!function(){function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Dd&&Dd.global===Dd?Dd:void 0,s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,s){var u=o.URL||o.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?i(a):r(a.href)?n(t,e,s):i(a,a.target="_blank")):(a.href=u.createObjectURL(t),setTimeout((function(){u.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,s){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),o);else if(r(t))n(t,o,s);else{var u=document.createElement("a");u.href=t,u.target="_blank",setTimeout((function(){i(u)}))}}:function(t,e,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,r);var s="application/octet-stream"===t.type,u=/constructor/i.test(o.HTMLElement)||o.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&u)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var h=o.URL||o.webkitURL,f=h.createObjectURL(t);i?i.location=f:location.href=f,i=null,setTimeout((function(){h.revokeObjectURL(f)}),4e4)}});o.saveAs=s.saveAs=s,t.exports=s}()}));function Pd(t,e,n){const r=t.slice();return r[19]=e[n],r}function Cd(t){let e,n;return e=new kd({props:{fieldName:t[19]}}),e.$on("delete_field",t[7]),{c(){R(e.$$.fragment)},m(t,r){V(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.fieldName=t[19]),e.$set(r)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ld(t){let e,n,i,o,g,m,b,w,E,_,I,T,N,x,A,S,O,k,D,R,V,M,j,U,F,q,B=t[0],G=[];for(let e=0;e<B.length;e+=1)G[e]=Cd(Pd(t,B,e));const z=t=>L(G[t],1,1,(()=>{G[t]=null}));return{c(){e=c("div"),n=c("form"),i=c("input"),o=f(),g=c("button"),g.textContent="Save Class name",m=f(),b=c("div"),w=c("form"),E=c("input"),_=f(),I=c("button"),I.textContent="Add field",T=f(),N=c("div");for(let t=0;t<G.length;t+=1)G[t].c();x=f(),A=c("br"),S=f(),O=c("button"),k=h(t[3]),D=f(),R=c("br"),V=f(),M=c("button"),j=h(t[4]),d(i,"type","text"),d(e,"id","nameofclass"),d(E,"type","text"),d(b,"id","addField"),d(N,"id","users")},m(r,a){u(r,e,a),s(e,n),s(n,i),y(i,t[2]),s(n,o),s(n,g),u(r,m,a),u(r,b,a),s(b,w),s(w,E),y(E,t[1]),s(w,_),s(w,I),u(r,T,a),u(r,N,a);for(let t=0;t<G.length;t+=1)G[t].m(N,null);u(r,x,a),u(r,A,a),u(r,S,a),u(r,O,a),s(O,k),s(O,D),u(r,R,a),u(r,V,a),u(r,M,a),s(M,j),U=!0,F||(q=[l(i,"input",t[10]),l(n,"submit",p(t[5])),l(E,"input",t[11]),l(w,"submit",p(t[6])),l(O,"click",t[9]),l(M,"click",t[8])],F=!0)},p(t,[e]){if(4&e&&i.value!==t[2]&&y(i,t[2]),2&e&&E.value!==t[1]&&y(E,t[1]),129&e){let n;for(B=t[0],n=0;n<B.length;n+=1){const r=Pd(t,B,n);G[n]?(G[n].p(r,e),C(G[n],1)):(G[n]=Cd(r),G[n].c(),C(G[n],1),G[n].m(N,null))}for(P={r:0,c:[],p:P},n=B.length;n<G.length;n+=1)z(n);P.r||r(P.c),P=P.p}(!U||8&e)&&v(k,t[3]),(!U||16&e)&&v(j,t[4])},i(t){if(!U){for(let t=0;t<B.length;t+=1)C(G[t]);U=!0}},o(t){G=G.filter(Boolean);for(let t=0;t<G.length;t+=1)L(G[t]);U=!1},d(t){t&&a(e),t&&a(m),t&&a(b),t&&a(T),t&&a(N),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(G,t),t&&a(x),t&&a(A),t&&a(S),t&&a(O),t&&a(R),t&&a(V),t&&a(M),F=!1,r(q)}}}function Rd(t,e){var n=new Blob([t],{type:"text/plain;charset=utf-8"});window.saveAs(n,e)}function Vd(t,e,n){let r=["name","email"],i="Name",o="User",s="Download file: "+o+".svelte",u="Download file: "+o+"s.svelte";function a(){let t=12/r.length,e="grid-template-columns: ";for(let n=0;n<r.length;n++)e+=t+"fr ";return e+="2fr 2fr;",e}return[r,i,o,s,u,function(){console.log("saved class "+o),n(3,s="Download file: "+o+".svelte"),n(4,u="Download file: "+o+"s.svelte")},function(){r.push(i),n(0,r),console.log("added field "+i)},function(t){console.log("delete a field..."+t.detail.fieldName);let e=-1;for(let n=0;n<r.length;n++)r[n]==t.detail.fieldName&&(console.log("found it !! at pos "+n),e=n);e>=0&&(r.splice(e,1),n(0,r))},function(){let t=o.toLowerCase(),e=`\n<script>\nimport {db} from './firestore.js'\nimport ${o} from './${o}.svelte'\nlet ${t}s = []\n${function(){let t="";for(let e=0;e<r.length;e++)t+="let "+r[e]+" = ''\n";return t}()}\n\ndb.collection('${t}s').onSnapshot(data => {\n    ${t}s = data.docs\n})\n\nfunction add${o}(){\n    db.collection('${t}s').add({${function(){let t="";for(let e=0;e<r.length;e++)t+=r[e]+", ";return t.substring(0,t.length-2)}()}})\n    // Firebase will automatically map to relevant names !!\n${function(){let t="";for(let e=0;e<r.length;e++)t+="\t"+r[e]+" = ''\n";return t}()}\n}\n<\/script>\n\n\x3c!-- ###################### --\x3e\n\n<div class="${t}">\n    <form on:submit|preventDefault={add${o}}>\n${function(){let t="";for(let e=0;e<r.length;e++)t+='\t\t<input type="text" placeholder="'+r[e]+'" bind:value={'+r[e]+"}>\n";return t}()}\t\t<button>Add</button>\n    </form>\n</div>\n\n\n<div>\n{#each ${t}s as ${t}}\n    <${o} id={${t}.id} ${t}={${t}.data()} />\n{/each}\n</div>\n\n\x3c!-- ###################### --\x3e\n\n<style>\n.${t} form {\n    display: grid;\n    ${a()}\n    grid-gap: 10px;\n}\n</style>\n`;console.log(e),Rd(e,o+"s.svelte")},function(){let t=o.toLowerCase(),e=function(){let t="";for(let e=0;e<r.length;e++)t+='\t<input type="text" bind:value="{'+o.toLowerCase()+"."+r[e]+'}">\n';return t}(),n=`\n<script>\nimport {db} from './firestore.js'\nexport let id = ''\nexport let ${t} = {}\n\nfunction delete${o}(){\n    db.collection('${t}s').doc(id).delete()\n}\n\nfunction update${o}(){\n    db.collection('${t}s').doc(id).update(${t})\n}\n\n<\/script>\n\n<div class="${t}">\n${e}\t<button on:click={delete${o}}>Delete</button>\n\t<button on:click={update${o}}>Update</button>\n</div>\n\n\x3c!-- ###################### --\x3e\n\n<style>\n.${t} {\n    display: grid;\n    ${a()}\n    grid-gap: 10px;\n}\n</style>\n`;console.log(n),Rd(n,o+".svelte")},function(){o=this.value,n(2,o)},function(){i=this.value,n(1,i)}]}class Md extends F{constructor(t){super(),U(this,t,Vd,Ld,o,{})}}function jd(e){let n,r,i,o;return i=new Md({}),{c(){n=c("h2"),n.textContent="Generator",r=f(),R(i.$$.fragment)},m(t,e){u(t,n,e),u(t,r,e),V(i,t,e),o=!0},p:t,i(t){o||(C(i.$$.fragment,t),o=!0)},o(t){L(i.$$.fragment,t),o=!1},d(t){t&&a(n),t&&a(r),M(i,t)}}}return new class extends F{constructor(t){super(),U(this,t,null,jd,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
